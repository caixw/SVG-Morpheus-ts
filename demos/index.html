<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG Morpheus TypeScript Demo - Object</title>
  <link rel="icon" type="image/png" href="https://github.com/caixw.png?size=32">
  <link rel="apple-touch-icon" href="https://github.com/caixw.png?size=180">
  <link rel="stylesheet" href="demo.css" />
  <!-- highlight.js CSS -->
  <link rel="stylesheet"
        href="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/styles/atom-one-dark.min.css">
</head>
<body>
  <div id="heading">
    <div class="language-switcher">
      <button class="lang-btn active" onclick="switchLanguage('en')">English</button>
      <button class="lang-btn" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
    </div>

    <div class="project-links">
      <a href="https://github.com/caixw/SVG-Morpheus-ts"
         target="_blank"
         class="project-source"
         data-i18n-title="project.github">
        <img src="https://github.com/caixw.png?size=24" alt="GitHub Avatar" class="github-avatar">
        <span data-i18n="project.github">GitHub Repository</span>
      </a>

      <a href="https://github.com/adoin/SVG-Morpheus-ts"
         target="_blank"
         class="project-source"
         data-i18n-title="project.source">
        <span class="icon">âš¡</span>
        <span data-i18n="project.basedOn">Based on SVG-Morpheus-ts</span>
      </a>
    </div>

    <h1 data-i18n="title">SVG Morpheus TypeScript</h1>
    <h2 data-i18n="subtitle">Demo: SVG placed via &lt;Object&gt;</h2>
    <p data-i18n="description">Modern TypeScript + Vite + pnpm refactored version</p>
  </div>

  <!-- åŸæœ‰ç¤ºä¾‹ï¼šä½¿ç”¨é™æ€ iconset.svg -->
  <div class="demo-section">
    <h3 data-i18n="example1.title">Example 1: Using Static iconset.svg File</h3>
    <div class="description">
      <span data-i18n="example1.description">
        ğŸ“ Traditional approach: Using pre-built iconset.svg files<br>
        Suitable for scenarios with fixed icons that don't require dynamic loading
      </span>
    </div>

    <div class="demo-content">
      <div class="demo-left">
        <object type="image/svg+xml" id="icon"></object>

        <div class="options-container">
          <div id="options">
            <div class="option">
              <label for="selIcon" data-i18n="label.icon">Icon:</label>
              <select id="selIcon"></select>
            </div>
            <div class="option">
              <label for="selEasing" data-i18n="label.easing">Easing:</label>
              <select id="selEasing"></select>
            </div>
            <div class="option">
              <label for="selDuration" data-i18n="label.duration">Duration:</label>
              <select id="selDuration"></select>
            </div>
            <div class="option">
              <label for="selRotation" data-i18n="label.rotation">Rotation:</label>
              <select id="selRotation"></select>
            </div>
          </div>
        </div>
      </div>

      <div class="demo-right">
        <div class="code-section">
          <h4>
            <span data-i18n="example1.codeTitle">ğŸ’» Example Code</span>
            <button class="copy-btn" onclick="copyCode(this)" data-i18n="button.copy">
              Copy Code
            </button>
          </h4>
          <pre><code class="language-javascript" data-i18n-code="code.example1">// 1. å‡†å¤‡é™æ€ iconset.svg æ–‡ä»¶
// iconset.svg åŒ…å«æ‰€æœ‰å›¾æ ‡çš„ <g> å…ƒç´ 

// 2. HTML ç»“æ„
<object data="/iconset.svg"
        type="image/svg+xml"
        id="icon"></object>

// 3. JavaScript åˆå§‹åŒ–
import { SVGMorpheus } from '@iconsets/svg-morpheus-ts';

const morpheus = new SVGMorpheus('#icon', {
  duration: 600,
  easing: 'quad-in-out',
  rotation: 'clock'
});

// 4. åˆ‡æ¢åˆ°æŒ‡å®šå›¾æ ‡
morpheus.to('icon-name');

// 5. å¸¦å›è°ƒçš„åŠ¨ç”»
morpheus.to('another-icon', {
  duration: 1000
}, () => {
  console.log('åŠ¨ç”»å®Œæˆ!');
});</code></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- æ–°ç¤ºä¾‹ï¼šä½¿ç”¨ bundleSvgs åŠ¨æ€ç”Ÿæˆ -->
  <div class="demo-section">
    <h3 data-i18n="example2.title">Example 2: Using bundleSvgs for Dynamic SVG Generation</h3>
    <div class="description">
      <span data-i18n="example2.description">
        ğŸš€ Modern approach: Runtime dynamic SVG icon merging with loading support<br>
        Suitable for modern applications requiring dynamic icon addition and diverse icon sources<br>
        âœ¨ <strong>New Feature</strong>: Support for custom SVG attributes (viewBox, class, data-* etc.)
      </span>
    </div>

    <div class="demo-content">
      <div class="demo-left">
        <div id="loadingIndicator">
          <div class="loading-spinner"></div>
          <span data-i18n="loading.text">Generating dynamic SVG...</span>
        </div>

        <object id="iconDynamic"
                type="image/svg+xml"
                class="initially-hidden"></object>

        <div class="options-container initially-hidden" id="dynamicOptionsContainer">
          <div id="optionsDynamic">
            <div class="option">
              <label for="selIconDynamic" data-i18n="label.icon">Icon:</label>
              <select id="selIconDynamic"></select>
            </div>
            <div class="option">
              <label for="selEasingDynamic" data-i18n="label.easing">Easing:</label>
              <select id="selEasingDynamic"></select>
            </div>
            <div class="option">
              <label for="selDurationDynamic" data-i18n="label.duration">Duration:</label>
              <select id="selDurationDynamic"></select>
            </div>
            <div class="option">
              <label for="selRotationDynamic" data-i18n="label.rotation">Rotation:</label>
              <select id="selRotationDynamic"></select>
            </div>
          </div>
        </div>
      </div>

      <div class="demo-right">
        <div class="code-section">
          <h4>
            <span data-i18n="example2.codeTitle">ğŸ’» Advanced Usage</span>
            <button class="copy-btn" onclick="copyCode(this)" data-i18n="button.copy">
              Copy Code
            </button>
          </h4>
          <pre><code class="language-javascript" data-i18n-code="code.example2">// 1. å¯¼å…¥æ‰€éœ€å‡½æ•°
import {
  SVGMorpheus,
  bundleSvgs
} from '@iconsets/svg-morpheus-ts';

// 2. å®šä¹‰ SVG å›¾æ ‡æ˜ å°„
const svgMap = {
  'circle': `<svg viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="8"/>
  </svg>`,
  'square': `<svg viewBox="0 0 24 24">
    <rect x="4" y="4" width="16" height="16"/>
  </svg>`,
  'vite': '/vite.svg', // æ–‡ä»¶è·¯å¾„
};

// 3. è‡ªå®šä¹‰ SVG å±æ€§ (å¯é€‰)
const customAttributes = {
  viewBox: '0 0 24 24',
  class: 'dynamic-iconset',
  'data-version': '1.0'
};

// 4. ç”Ÿæˆåˆå¹¶çš„ SVG Blob URL (ä¸€æ­¥å®Œæˆ)
const bundledSvgUrl = await bundleSvgs(svgMap, customAttributes);

// 5. è®¾ç½®åˆ° object å…ƒç´ 
objectElement.data = bundledSvgUrl;

// 6. åˆå§‹åŒ– SVGMorpheus
const morpheus = new SVGMorpheus('#iconDynamic');
morpheus.to('circle');</code></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- highlight.js JavaScript -->
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  <!-- å¯¼å…¥æ¨¡å—åŒ–JavaScript -->
  <script type="module" src="./demo.js"></script>
</body>
</html>
