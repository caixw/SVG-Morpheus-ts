<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG Morpheus TypeScript Demo - Object</title>
  <link rel="stylesheet" href="demo.css"/>
  <style>
    .demo-section {
      margin: 40px auto;
      padding: 30px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(42, 36, 71, 0.3);
      max-width: 1200px;
      text-align: left;
      color: #333;
      backdrop-filter: blur(10px);
    }
    
    .demo-content {
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }
    
    .demo-left {
      flex: 1;
      min-width: 0;
    }
    
    .demo-right {
      flex: 1;
      min-width: 0;
    }
    
    .code-section {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e9ecef;
      height: fit-content;
      position: sticky;
      top: 20px;
    }
    
    .code-section h4 {
      margin: 0 0 15px 0;
      color: #495057;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    
    .copy-btn {
      background: #007bff;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .copy-btn:hover {
      background: #0056b3;
    }
    
    .copy-btn.copied {
      background: #28a745;
    }
    
    .code-section pre {
      background: #263238;
      color: #eeffff;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
      font-size: 13px;
      line-height: 1.5;
      margin: 0;
      white-space: pre-wrap;
      max-height: 500px;
      overflow-y: auto;
    }
    
    .code-section pre::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    .code-section pre::-webkit-scrollbar-track {
      background: #37474f;
      border-radius: 4px;
    }
    
    .code-section pre::-webkit-scrollbar-thumb {
      background: #546e7a;
      border-radius: 4px;
    }
    
    .code-section pre::-webkit-scrollbar-thumb:hover {
      background: #607d8b;
    }
    
    .code-section pre .comment {
      color: #546e7a;
    }
    
    .code-section pre .keyword {
      color: #c792ea;
    }
    
    .code-section pre .string {
      color: #c3e88d;
    }
    
    .code-section pre .function {
      color: #82aaff;
    }
    
    .code-section pre .variable {
      color: #eeffff;
    }
    
    .code-section pre .property {
      color: #f78c6c;
    }
    
    .demo-section h3 {
      margin-top: 0;
      margin-bottom: 15px;
      color: #1a1a1a;
      border-bottom: 3px solid #4CAF50;
      padding-bottom: 12px;
      font-size: 24px;
      font-weight: 600;
    }
    
    .demo-section .description {
      color: #555;
      margin-bottom: 25px;
      font-style: italic;
      font-size: 16px;
      line-height: 1.5;
      padding: 15px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 8px;
      border-left: 4px solid #4CAF50;
    }
    
    /* æ”¹å–„ SVG å®¹å™¨æ ·å¼ */
    .demo-section object {
      display: block;
      box-sizing: border-box;
      width: 100%;
      height: 250px;
      background: #ffffff;
      margin: 20px auto;
      padding: 60px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border: 2px solid #e0e0e0;
    }
    
    /* æ”¹å–„é€‰é¡¹åŒºåŸŸæ ·å¼ */
    .demo-section .options-container {
      background: rgba(255, 255, 255, 0.8);
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
    }
    
    .demo-section #options,
    .demo-section #optionsDynamic {
      margin-top: 0;
      margin-bottom: 0;
      text-align: center;
    }
    
    .demo-section .option {
      width: 100%;
      max-width: 500px;
      display: flex;
      align-items: center;
      margin: 15px auto;
      text-align: left;
      overflow: visible;
    }
    
    .demo-section .option label {
      text-align: left;
      display: inline-block;
      font-size: 18px;
      font-weight: 500;
      width: 120px;
      color: #333;
      margin-right: 15px;
    }
    
    .demo-section .option select {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: 16px;
      font-weight: normal;
      padding: 12px 15px;
      color: #333;
      background: #fff;
      border: 2px solid #ddd;
      border-radius: 6px;
      flex: 1;
      transition: border-color 0.3s ease;
      margin: 0;
    }
    
    .demo-section .option select:focus {
      outline: none;
      border-color: #4CAF50;
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
    }
    
    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .demo-section {
        margin: 20px 10px;
        padding: 20px;
      }
      
      .language-switcher {
        position: static;
        margin: 0 auto 20px auto;
        justify-content: center;
      }
      
      .demo-content {
        flex-direction: column;
        gap: 20px;
      }
      
      .code-section {
        position: static;
      }
      
      .demo-section .option {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .demo-section .option label {
        width: 100%;
        margin-bottom: 8px;
      }
      
      .demo-section .option select {
        width: 100%;
      }
      
      .project-source {
        position: static;
        margin: 0 auto 10px auto;
        justify-content: center;
      }
    }
    
    /* æ·»åŠ ä¸€äº›åŠ¨ç”»æ•ˆæœ */
    .demo-section {
      animation: fadeInUp 0.6s ease-out;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* æ”¹å–„æ ‡é¢˜åŒºåŸŸ */
    #heading {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 30px 20px 50px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      position: relative;
    }
    
    .language-switcher {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 4px;
      backdrop-filter: blur(10px);
    }
    
    .lang-btn {
      padding: 8px 16px;
      border: none;
      background: transparent;
      color: white;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      font-size: 14px;
    }
    
    .lang-btn.active {
      background: rgba(255, 255, 255, 0.3);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .lang-btn:hover:not(.active) {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .project-source {
      position: absolute;
      bottom: 15px;
      left: 20px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.9);
      text-decoration: none;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .project-source:hover {
      background: rgba(255, 255, 255, 0.25);
      color: white;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .project-source .icon {
      font-size: 11px;
    }
    
    /* æ”¹å–„é¡µé¢èƒŒæ™¯ */
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    /* åŠ è½½åŠ¨ç”» */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    #loadingIndicator {
      font-size: 16px;
      font-weight: 500;
    }
    
    /* æ¼”ç¤ºè‡ªå®šä¹‰ SVG å±æ€§çš„æ ·å¼ */
    .dynamic-iconset {
      transition: opacity 0.3s ease;
    }
    
    .dynamic-iconset:hover {
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div id="heading">
    <div class="language-switcher">
      <button class="lang-btn active" onclick="switchLanguage('en')">English</button>
      <button class="lang-btn" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
    </div>
    <a href="https://github.com/alexk111/SVG-Morpheus" target="_blank" class="project-source" data-i18n-title="project.source">
      <span class="icon">âš¡</span>
      <span data-i18n="project.basedOn">Based on SVG-Morpheus</span>
    </a>
    <h1 data-i18n="title">SVG Morpheus TypeScript</h1>
    <h2 data-i18n="subtitle">Demo: SVG placed via &lt;Object&gt;</h2>
    <p data-i18n="description">Modern TypeScript + Vite + pnpm refactored version</p>
  </div>

  <!-- åŸæœ‰ç¤ºä¾‹ï¼šä½¿ç”¨é™æ€ iconset.svg -->
  <div class="demo-section">
    <h3 data-i18n="example1.title">Example 1: Using Static iconset.svg File</h3>
    <div class="description">
      <span data-i18n="example1.description">ğŸ“ Traditional approach: Using pre-built iconset.svg files<br>Suitable for scenarios with fixed icons that don't require dynamic loading</span>
    </div>
    
    <div class="demo-content">
      <div class="demo-left">
        <object data="iconset.svg" type="image/svg+xml" id="icon"></object>
        
        <div class="options-container">
          <div id="options">
            <div class="option">
              <label for="selIcon" data-i18n="label.icon">Icon:</label>
              <select id="selIcon"></select>
            </div>
            <div class="option">
              <label for="selEasing" data-i18n="label.easing">Easing:</label>
              <select id="selEasing"></select>
            </div>
            <div class="option">
              <label for="selDuration" data-i18n="label.duration">Duration:</label>
              <select id="selDuration"></select>
            </div>
            <div class="option">
              <label for="selRotation" data-i18n="label.rotation">Rotation:</label>
              <select id="selRotation"></select>
            </div>
          </div>
        </div>
      </div>
      
      <div class="demo-right">
        <div class="code-section">
          <h4>
            <span data-i18n="example1.codeTitle">ğŸ’» Example Code</span>
            <button class="copy-btn" onclick="copyCode(this)" data-i18n="button.copy">Copy Code</button>
          </h4>
          <pre><code data-i18n-code="code.example1"><span class="comment">// 1. å‡†å¤‡é™æ€ iconset.svg æ–‡ä»¶</span>
<span class="comment">// iconset.svg åŒ…å«æ‰€æœ‰å›¾æ ‡çš„ &lt;g&gt; å…ƒç´ </span>

<span class="comment">// 2. HTML ç»“æ„</span>
&lt;<span class="keyword">object</span> <span class="property">data</span>=<span class="string">"iconset.svg"</span> 
        <span class="property">type</span>=<span class="string">"image/svg+xml"</span> 
        <span class="property">id</span>=<span class="string">"icon"</span>&gt;&lt;/<span class="keyword">object</span>&gt;

<span class="comment">// 3. JavaScript åˆå§‹åŒ–</span>
<span class="keyword">import</span> { <span class="function">SVGMorpheus</span> } <span class="keyword">from</span> <span class="string">'svg-morpheus'</span>;

<span class="keyword">const</span> <span class="variable">morpheus</span> = <span class="keyword">new</span> <span class="function">SVGMorpheus</span>(<span class="string">'#icon'</span>, {
  <span class="property">duration</span>: <span class="property">600</span>,
  <span class="property">easing</span>: <span class="string">'quad-in-out'</span>,
  <span class="property">rotation</span>: <span class="string">'clock'</span>
});

<span class="comment">// 4. åˆ‡æ¢åˆ°æŒ‡å®šå›¾æ ‡</span>
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'icon-name'</span>);

<span class="comment">// 5. å¸¦å›è°ƒçš„åŠ¨ç”»</span>
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'another-icon'</span>, {
  <span class="property">duration</span>: <span class="property">1000</span>
}, () => {
  <span class="function">console</span>.<span class="function">log</span>(<span class="string">'åŠ¨ç”»å®Œæˆ!'</span>);
});</code></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- æ–°ç¤ºä¾‹ï¼šä½¿ç”¨ bundleSvgs åŠ¨æ€ç”Ÿæˆ -->
  <div class="demo-section">
    <h3 data-i18n="example2.title">Example 2: Using bundleSvgs for Dynamic SVG Generation</h3>
    <div class="description">
      <span data-i18n="example2.description">ğŸš€ Modern approach: Runtime dynamic SVG icon merging with loading support<br>Suitable for modern applications requiring dynamic icon addition and diverse icon sources<br>âœ¨ <strong>New Feature</strong>: Support for custom SVG attributes (viewBox, class, data-* etc.)</span>
    </div>
    
    <div class="demo-content">
      <div class="demo-left">
        <div id="loadingIndicator" style="text-align: center; padding: 20px; color: #666; display: block;">
          <div style="display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #4CAF50; border-radius: 50%; animation: spin 1s linear infinite; margin-right: 10px;"></div>
          <span data-i18n="loading.text">Generating dynamic SVG...</span>
        </div>
        
        <object id="iconDynamic" type="image/svg+xml" style="display: none;"></object>
        
        <div class="options-container" id="dynamicOptionsContainer" style="display: none;">
          <div id="optionsDynamic">
            <div class="option">
              <label for="selIconDynamic" data-i18n="label.icon">Icon:</label>
              <select id="selIconDynamic"></select>
            </div>
            <div class="option">
              <label for="selEasingDynamic" data-i18n="label.easing">Easing:</label>
              <select id="selEasingDynamic"></select>
            </div>
            <div class="option">
              <label for="selDurationDynamic" data-i18n="label.duration">Duration:</label>
              <select id="selDurationDynamic"></select>
            </div>
            <div class="option">
              <label for="selRotationDynamic" data-i18n="label.rotation">Rotation:</label>
              <select id="selRotationDynamic"></select>
            </div>
          </div>
        </div>
      </div>
      
      <div class="demo-right">
        <div class="code-section">
          <h4>
            <span data-i18n="example2.codeTitle">ğŸ†• bundleSvgs Example Code</span>
            <button class="copy-btn" onclick="copyCode(this)" data-i18n="button.copy">Copy Code</button>
          </h4>
          <pre><code data-i18n-code="code.example2"><span class="comment">// 1. å¯¼å…¥æ‰€éœ€å‡½æ•°</span>
<span class="keyword">import</span> { 
  <span class="function">SVGMorpheus</span>, 
  <span class="function">bundleSvgs</span> 
} <span class="keyword">from</span> <span class="string">'svg-morpheus'</span>;

<span class="comment">// 2. å®šä¹‰ SVG å›¾æ ‡æ˜ å°„</span>
<span class="keyword">const</span> <span class="variable">svgMap</span> = {
  <span class="string">'circle'</span>: <span class="string">\`&lt;svg viewBox="0 0 24 24"&gt;
    &lt;circle cx="12" cy="12" r="8"/&gt;
  &lt;/svg&gt;\`</span>,
  <span class="string">'square'</span>: <span class="string">\`&lt;svg viewBox="0 0 24 24"&gt;
    &lt;rect x="4" y="4" width="16" height="16"/&gt;
  &lt;/svg&gt;\`</span>,
  <span class="string">'star'</span>: <span class="string">'/icons/star.svg'</span>, <span class="comment">// æ–‡ä»¶è·¯å¾„</span>
};

<span class="comment">// 3. è‡ªå®šä¹‰ SVG å±æ€§ (å¯é€‰)</span>
<span class="keyword">const</span> <span class="variable">customAttributes</span> = {
  <span class="property">viewBox</span>: <span class="string">'0 0 24 24'</span>,
  <span class="property">class</span>: <span class="string">'dynamic-iconset'</span>,
  <span class="string">'data-version'</span>: <span class="string">'1.0'</span>
};

<span class="comment">// 4. ç”Ÿæˆåˆå¹¶çš„ SVG Blob URL (ä¸€æ­¥å®Œæˆ)</span>
<span class="keyword">const</span> <span class="variable">bundledSvgUrl</span> = <span class="keyword">await</span> <span class="function">bundleSvgs</span>(<span class="variable">svgMap</span>, <span class="variable">customAttributes</span>);

<span class="comment">// 5. è®¾ç½®åˆ° object å…ƒç´ </span>
<span class="variable">objectElement</span>.<span class="property">data</span> = <span class="variable">bundledSvgUrl</span>;

<span class="comment">// 6. åˆå§‹åŒ– SVGMorpheus</span>
<span class="keyword">const</span> <span class="variable">morpheus</span> = <span class="keyword">new</span> <span class="function">SVGMorpheus</span>(<span class="string">'#iconDynamic'</span>);
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'circle'</span>);</code></pre>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { SVGMorpheus } from '../src/svg-morpheus.ts';
    import { bundleSvgs } from '../src/helpers.ts';
    
    // å¤šè¯­è¨€æ”¯æŒ
    const i18nData = {
      en: {
        title: 'SVG Morpheus TypeScript',
        subtitle: 'Demo: SVG placed via &lt;Object&gt;',
        description: 'Modern TypeScript + Vite + pnpm refactored version',
        'example1.title': 'Example 1: Using Static iconset.svg File',
        'example1.description': 'ğŸ“ Traditional approach: Using pre-built iconset.svg files<br>Suitable for scenarios with fixed icons that don\'t require dynamic loading',
        'example1.codeTitle': 'ğŸ’» Example Code',
        'example2.title': 'Example 2: Using bundleSvgs for Dynamic SVG Generation',
        'example2.description': 'ğŸš€ Modern approach: Runtime dynamic SVG icon merging with loading support<br>Suitable for modern applications requiring dynamic icon addition and diverse icon sources<br>âœ¨ <strong>New Feature</strong>: Support for custom SVG attributes (viewBox, class, data-* etc.)',
        'example2.codeTitle': 'ğŸ†• bundleSvgs Example Code',
        'label.icon': 'Icon:',
        'label.easing': 'Easing:',
        'label.duration': 'Duration:',
        'label.rotation': 'Rotation:',
        'button.copy': 'Copy Code',
        'button.copied': 'Copied!',
        'button.copyFailed': 'Copy Failed',
        'loading.text': 'Generating dynamic SVG...',
        'error.loadFailed': 'âŒ åŠ¨æ€ SVG åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•',
        'error.bundleFailed': 'âŒ bundleSvgs å‡½æ•°å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ helpers.ts æ–‡ä»¶',
        'error.objectLoadFailed': 'âŒ SVG å¯¹è±¡åŠ è½½å¤±è´¥',
        'console.staticComplete': 'é™æ€ SVG ç¤ºä¾‹åˆå§‹åŒ–å®Œæˆ!',
        'console.dynamicComplete': 'åŠ¨æ€ SVG ç¤ºä¾‹åˆå§‹åŒ–å®Œæˆ!',
        'easings.linear': 'Linear',
        'rotations.clock': 'Clockwise',
        'rotations.counterclock': 'Counterclockwise',
        'rotations.random': 'Random',
        'rotations.none': 'None',
        'icons.circle': 'Circle',
        'icons.square': 'Square',
        'icons.triangle': 'Triangle',
        'icons.star': 'Star',
        'icons.heart': 'Heart',
        'icons.diamond': 'Diamond',
        'project.basedOn': 'Based on SVG-Morpheus',
        'project.source': 'View Original Project',
        'code.example1': `<span class="comment">// 1. å‡†å¤‡é™æ€ iconset.svg æ–‡ä»¶</span>
<span class="comment">// iconset.svg åŒ…å«æ‰€æœ‰å›¾æ ‡çš„ &lt;g&gt; å…ƒç´ </span>

<span class="comment">// 2. HTML ç»“æ„</span>
&lt;<span class="keyword">object</span> <span class="property">data</span>=<span class="string">"iconset.svg"</span> 
        <span class="property">type</span>=<span class="string">"image/svg+xml"</span> 
        <span class="property">id</span>=<span class="string">"icon"</span>&gt;&lt;/<span class="keyword">object</span>&gt;

<span class="comment">// 3. JavaScript åˆå§‹åŒ–</span>
<span class="keyword">import</span> { <span class="function">SVGMorpheus</span> } <span class="keyword">from</span> <span class="string">'svg-morpheus'</span>;

<span class="keyword">const</span> <span class="variable">morpheus</span> = <span class="keyword">new</span> <span class="function">SVGMorpheus</span>(<span class="string">'#icon'</span>, {
  <span class="property">duration</span>: <span class="property">600</span>,
  <span class="property">easing</span>: <span class="string">'quad-in-out'</span>,
  <span class="property">rotation</span>: <span class="string">'clock'</span>
});

<span class="comment">// 4. åˆ‡æ¢åˆ°æŒ‡å®šå›¾æ ‡</span>
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'icon-name'</span>);

<span class="comment">// 5. å¸¦å›è°ƒçš„åŠ¨ç”»</span>
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'another-icon'</span>, {
  <span class="property">duration</span>: <span class="property">1000</span>
}, () => {
  <span class="function">console</span>.<span class="function">log</span>(<span class="string">'åŠ¨ç”»å®Œæˆ!'</span>);
});`,
        'code.example2': `<span class="comment">// 1. å¯¼å…¥æ‰€éœ€å‡½æ•°</span>
<span class="keyword">import</span> { 
  <span class="function">SVGMorpheus</span>, 
  <span class="function">bundleSvgs</span> 
} <span class="keyword">from</span> <span class="string">'svg-morpheus'</span>;

<span class="comment">// 2. å®šä¹‰ SVG å›¾æ ‡æ˜ å°„</span>
<span class="keyword">const</span> <span class="variable">svgMap</span> = {
  <span class="string">'circle'</span>: <span class="string">\`&lt;svg viewBox="0 0 24 24"&gt;
    &lt;circle cx="12" cy="12" r="8"/&gt;
  &lt;/svg&gt;\`</span>,
  <span class="string">'square'</span>: <span class="string">\`&lt;svg viewBox="0 0 24 24"&gt;
    &lt;rect x="4" y="4" width="16" height="16"/&gt;
  &lt;/svg&gt;\`</span>,
  <span class="string">'star'</span>: <span class="string">'/icons/star.svg'</span>, <span class="comment">// æ–‡ä»¶è·¯å¾„</span>
};

<span class="comment">// 3. è‡ªå®šä¹‰ SVG å±æ€§ (å¯é€‰)</span>
<span class="keyword">const</span> <span class="variable">customAttributes</span> = {
  <span class="property">viewBox</span>: <span class="string">'0 0 24 24'</span>,
  <span class="property">class</span>: <span class="string">'dynamic-iconset'</span>,
  <span class="string">'data-version'</span>: <span class="string">'1.0'</span>
};

<span class="comment">// 4. ç”Ÿæˆåˆå¹¶çš„ SVG Blob URL (ä¸€æ­¥å®Œæˆ)</span>
<span class="keyword">const</span> <span class="variable">bundledSvgUrl</span> = <span class="keyword">await</span> <span class="function">bundleSvgs</span>(<span class="variable">svgMap</span>, <span class="variable">customAttributes</span>);

<span class="comment">// 5. è®¾ç½®åˆ° object å…ƒç´ </span>
<span class="variable">objectElement</span>.<span class="property">data</span> = <span class="variable">bundledSvgUrl</span>;

<span class="comment">// 6. åˆå§‹åŒ– SVGMorpheus</span>
<span class="keyword">const</span> <span class="variable">morpheus</span> = <span class="keyword">new</span> <span class="function">SVGMorpheus</span>(<span class="string">'#iconDynamic'</span>);
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'circle'</span>);`
      },
      zh: {
        title: 'SVG Morpheus TypeScript',
        subtitle: 'æ¼”ç¤º: é€šè¿‡ &lt;Object&gt; æ”¾ç½®çš„ SVG',
        description: 'ç°ä»£åŒ–çš„ TypeScript + Vite + pnpm é‡æ„ç‰ˆæœ¬',
        'example1.title': 'ç¤ºä¾‹ 1: ä½¿ç”¨é™æ€ iconset.svg æ–‡ä»¶',
        'example1.description': 'ğŸ“ ä¼ ç»Ÿæ–¹å¼ï¼šä½¿ç”¨é¢„æ„å»ºçš„ iconset.svg æ–‡ä»¶<br>é€‚ç”¨äºå›¾æ ‡æ•°é‡å›ºå®šã€ä¸éœ€è¦åŠ¨æ€åŠ è½½çš„åœºæ™¯',
        'example1.codeTitle': 'ğŸ’» ç¤ºä¾‹ä»£ç ',
        'example2.title': 'ç¤ºä¾‹ 2: ä½¿ç”¨ bundleSvgs åŠ¨æ€ç”Ÿæˆ SVG',
        'example2.description': 'ğŸš€ æ–°æ–¹å¼ï¼šè¿è¡Œæ—¶åŠ¨æ€åˆå¹¶ SVG å›¾æ ‡ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½<br>é€‚ç”¨äºéœ€è¦åŠ¨æ€æ·»åŠ å›¾æ ‡ã€å›¾æ ‡æ¥æºå¤šæ ·åŒ–çš„ç°ä»£åº”ç”¨åœºæ™¯<br>âœ¨ <strong>æ–°åŠŸèƒ½</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰ SVG å±æ€§ï¼ˆviewBoxã€classã€data-* ç­‰ï¼‰',
        'example2.codeTitle': 'ğŸ†• bundleSvgs ç¤ºä¾‹ä»£ç ',
        'label.icon': 'å›¾æ ‡:',
        'label.easing': 'ç¼“åŠ¨:',
        'label.duration': 'æ—¶é•¿:',
        'label.rotation': 'æ—‹è½¬:',
        'button.copy': 'å¤åˆ¶ä»£ç ',
        'button.copied': 'å·²å¤åˆ¶!',
        'button.copyFailed': 'å¤åˆ¶å¤±è´¥',
        'loading.text': 'æ­£åœ¨ç”ŸæˆåŠ¨æ€ SVG...',
        'error.loadFailed': 'âŒ åŠ¨æ€ SVG åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•',
        'error.bundleFailed': 'âŒ bundleSvgs å‡½æ•°å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ helpers.ts æ–‡ä»¶',
        'error.objectLoadFailed': 'âŒ SVG å¯¹è±¡åŠ è½½å¤±è´¥',
        'console.staticComplete': 'é™æ€ SVG ç¤ºä¾‹åˆå§‹åŒ–å®Œæˆ!',
        'console.dynamicComplete': 'åŠ¨æ€ SVG ç¤ºä¾‹åˆå§‹åŒ–å®Œæˆ!',
        'easings.linear': 'çº¿æ€§',
        'rotations.clock': 'é¡ºæ—¶é’ˆ',
        'rotations.counterclock': 'é€†æ—¶é’ˆ',
        'rotations.random': 'éšæœº',
        'rotations.none': 'æ— ',
        'icons.circle': 'åœ†å½¢',
        'icons.square': 'æ­£æ–¹å½¢',
        'icons.triangle': 'ä¸‰è§’å½¢',
        'icons.star': 'æ˜Ÿå½¢',
        'icons.heart': 'å¿ƒå½¢',
        'icons.diamond': 'è±å½¢',
        'project.basedOn': 'åŸºäº SVG-Morpheus',
        'project.source': 'æŸ¥çœ‹åŸå§‹é¡¹ç›®',
        'code.example1': `<span class="comment">// 1. å‡†å¤‡é™æ€ iconset.svg æ–‡ä»¶</span>
<span class="comment">// iconset.svg åŒ…å«æ‰€æœ‰å›¾æ ‡çš„ &lt;g&gt; å…ƒç´ </span>

<span class="comment">// 2. HTML ç»“æ„</span>
&lt;<span class="keyword">object</span> <span class="property">data</span>=<span class="string">"iconset.svg"</span> 
        <span class="property">type</span>=<span class="string">"image/svg+xml"</span> 
        <span class="property">id</span>=<span class="string">"icon"</span>&gt;&lt;/<span class="keyword">object</span>&gt;

<span class="comment">// 3. JavaScript åˆå§‹åŒ–</span>
<span class="keyword">import</span> { <span class="function">SVGMorpheus</span> } <span class="keyword">from</span> <span class="string">'svg-morpheus'</span>;

<span class="keyword">const</span> <span class="variable">morpheus</span> = <span class="keyword">new</span> <span class="function">SVGMorpheus</span>(<span class="string">'#icon'</span>, {
  <span class="property">duration</span>: <span class="property">600</span>,
  <span class="property">easing</span>: <span class="string">'quad-in-out'</span>,
  <span class="property">rotation</span>: <span class="string">'clock'</span>
});

<span class="comment">// 4. åˆ‡æ¢åˆ°æŒ‡å®šå›¾æ ‡</span>
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'icon-name'</span>);

<span class="comment">// 5. å¸¦å›è°ƒçš„åŠ¨ç”»</span>
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'another-icon'</span>, {
  <span class="property">duration</span>: <span class="property">1000</span>
}, () => {
  <span class="function">console</span>.<span class="function">log</span>(<span class="string">'åŠ¨ç”»å®Œæˆ!'</span>);
});`,
        'code.example2': `<span class="comment">// 1. å¯¼å…¥æ‰€éœ€å‡½æ•°</span>
<span class="keyword">import</span> { 
  <span class="function">SVGMorpheus</span>, 
  <span class="function">bundleSvgs</span> 
} <span class="keyword">from</span> <span class="string">'svg-morpheus'</span>;

<span class="comment">// 2. å®šä¹‰ SVG å›¾æ ‡æ˜ å°„</span>
<span class="keyword">const</span> <span class="variable">svgMap</span> = {
  <span class="string">'circle'</span>: <span class="string">\`&lt;svg viewBox="0 0 24 24"&gt;
    &lt;circle cx="12" cy="12" r="8"/&gt;
  &lt;/svg&gt;\`</span>,
  <span class="string">'square'</span>: <span class="string">\`&lt;svg viewBox="0 0 24 24"&gt;
    &lt;rect x="4" y="4" width="16" height="16"/&gt;
  &lt;/svg&gt;\`</span>,
  <span class="string">'star'</span>: <span class="string">'/icons/star.svg'</span>, <span class="comment">// æ–‡ä»¶è·¯å¾„</span>
};

<span class="comment">// 3. è‡ªå®šä¹‰ SVG å±æ€§ (å¯é€‰)</span>
<span class="keyword">const</span> <span class="variable">customAttributes</span> = {
  <span class="property">viewBox</span>: <span class="string">'0 0 24 24'</span>,
  <span class="property">class</span>: <span class="string">'dynamic-iconset'</span>,
  <span class="string">'data-version'</span>: <span class="string">'1.0'</span>
};

<span class="comment">// 4. ç”Ÿæˆåˆå¹¶çš„ SVG Blob URL (ä¸€æ­¥å®Œæˆ)</span>
<span class="keyword">const</span> <span class="variable">bundledSvgUrl</span> = <span class="keyword">await</span> <span class="function">bundleSvgs</span>(<span class="variable">svgMap</span>, <span class="variable">customAttributes</span>);

<span class="comment">// 5. è®¾ç½®åˆ° object å…ƒç´ </span>
<span class="variable">objectElement</span>.<span class="property">data</span> = <span class="variable">bundledSvgUrl</span>;

<span class="comment">// 6. åˆå§‹åŒ– SVGMorpheus</span>
<span class="keyword">const</span> <span class="variable">morpheus</span> = <span class="keyword">new</span> <span class="function">SVGMorpheus</span>(<span class="string">'#iconDynamic'</span>);
<span class="variable">morpheus</span>.<span class="function">to</span>(<span class="string">'circle'</span>);`
      }
    };
    
    let currentLanguage = 'en'; // é»˜è®¤è‹±æ–‡
    
    // è¯­è¨€åˆ‡æ¢å‡½æ•°
    function switchLanguage(lang) {
      currentLanguage = lang;
      
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // æ›´æ–°æ‰€æœ‰æ–‡æœ¬
      updateTexts();
      
      // ä¿å­˜è¯­è¨€é€‰æ‹©
      localStorage.setItem('svgMorpheusLang', lang);
    }
    
    // æ›´æ–°é¡µé¢æ–‡æœ¬
    function updateTexts() {
      const texts = i18nData[currentLanguage];
      
      // æ›´æ–°æ‰€æœ‰å¸¦æœ‰ data-i18n å±æ€§çš„å…ƒç´ 
      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (texts[key]) {
          element.innerHTML = texts[key];
        }
      });
      
      // æ›´æ–°ä»£ç å—
      document.querySelectorAll('[data-i18n-code]').forEach(element => {
        const key = element.getAttribute('data-i18n-code');
        if (texts[key]) {
          element.innerHTML = texts[key];
        }
      });
      
      // æ›´æ–°åŠ¨æ€ç¤ºä¾‹çš„ä¸‹æ‹‰æ¡†é€‰é¡¹
      updateDynamicOptions();
    }
    
    // æ›´æ–°åŠ¨æ€ç¤ºä¾‹çš„ä¸‹æ‹‰æ¡†é€‰é¡¹
    function updateDynamicOptions() {
      const selIconDynamic = document.getElementById('selIconDynamic');
      if (selIconDynamic && selIconDynamic.options.length > 0) {
        const currentValue = selIconDynamic.value;
        
        // æ¸…ç©ºç°æœ‰é€‰é¡¹
        selIconDynamic.innerHTML = '';
        
        // é‡æ–°å¡«å……é€‰é¡¹
        const dynamicIcons = {
          'circle': t('icons.circle'),
          'square': t('icons.square'),
          'triangle': t('icons.triangle'),
          'star': t('icons.star'),
          'heart': t('icons.heart'),
          'diamond': t('icons.diamond')
        };
        
        for (const [key, value] of Object.entries(dynamicIcons)) {
          selIconDynamic.options[selIconDynamic.options.length] = new Option(value, key);
        }
        
        // æ¢å¤ä¹‹å‰é€‰ä¸­çš„å€¼
        if (currentValue) {
          selIconDynamic.value = currentValue;
        } else {
          selIconDynamic.selectedIndex = selIconDynamic.options.length - 1;
        }
      }
    }
    
    // è·å–å›½é™…åŒ–æ–‡æœ¬
    function t(key) {
      return i18nData[currentLanguage][key] || key;
    }
    
    // é¡µé¢åŠ è½½æ—¶æ¢å¤è¯­è¨€è®¾ç½®
    function initLanguage() {
      const savedLang = localStorage.getItem('svgMorpheusLang');
      if (savedLang && i18nData[savedLang]) {
        currentLanguage = savedLang;
        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        document.querySelectorAll('.lang-btn').forEach(btn => {
          btn.classList.remove('active');
          if ((savedLang === 'zh' && btn.textContent.includes('ä¸­æ–‡')) ||
              (savedLang === 'en' && btn.textContent.includes('English'))) {
            btn.classList.add('active');
          }
        });
      }
      updateTexts();
    }
    
    // ä½¿å‡½æ•°åœ¨å…¨å±€å¯ç”¨
    window.switchLanguage = switchLanguage;
    
    window.onload = async function () {
      // åˆå§‹åŒ–è¯­è¨€è®¾ç½®
      initLanguage();
      
      // å…±äº«é…ç½®
      const icons = {
        '3d_rotation':'3D Rotation',
        'accessibility':'Accessibility',
        'account_balance':'Account Balance',
        'account_box':'Account Box',
        'account_circle':'Account Circle',
        'add_shopping_cart':'Add Shopping Cart',
        'android':'Android',
        'backup':'Backup',
        'bookmark':'Bookmark',
        'bug_report':'Bug Report',
        'credit_card':'Credit Card',
        'delete':'Delete',
        'done':'Done',
        'drawer':'Drawer',
        'event':'Event',
        'exit_to_app':'Exit To App',
        'explore':'Explore',
        'extension':'Extension',
        'favorite':'Favorite',
        'help':'Help',
        'history':'History',
        'home':'Home',
        'https':'Https',
        'info':'Info',
        'input':'Input',
        'invert_colors':'Invert Colors',
        'label':'Label',
        'language':'Language',
        'launch':'Launch',
        'loyalty':'Loyalty',
        'polymer':'Polymer',
        'print':'Print',
        'receipt':'Receipt'
      };

      const easings = {
        'circ-in': 'Circ In','circ-out': 'Circ Out','circ-in-out': 'Circ In/Out',
        'cubic-in': 'Cubic In', 'cubic-out': 'Cubic Out', 'cubic-in-out': 'Cubic In/Out',
        'elastic-in': 'Elastic In', 'elastic-out': 'Elastic Out', 'elastic-in-out': 'Elastic In/Out',
        'expo-in': 'Expo In', 'expo-out': 'Expo Out', 'expo-in-out': 'Expo In/Out',
        'linear': 'Linear',
        'quad-in': 'Quad In', 'quad-out': 'Quad Out', 'quad-in-out': 'Quad In/Out',
        'quart-in': 'Quart In', 'quart-out': 'Quart Out', 'quart-in-out': 'Quart In/Out',
        'quint-in': 'Quint In', 'quint-out': 'Quint Out', 'quint-in-out': 'Quint In/Out',
        'sine-in': 'Sine In','sine-out': 'Sine Out','sine-in-out': 'Sine In/Out'
      };

      const durations = [250, 500, 750, 1000, 5000];
      const rotations = {
        'clock': 'Clockwise',
        'counterclock': 'Counterclockwise',
        'random': 'Random',
        'none': 'None'
      };

      // åˆå§‹åŒ–ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼ˆé™æ€ iconset.svgï¼‰
      initStaticExample();

      // åˆå§‹åŒ–ç¬¬äºŒä¸ªç¤ºä¾‹ï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰
      await initDynamicExample();

      function initStaticExample() {
        const svgMorpheus = new SVGMorpheus('#icon');
        const selIcon = document.getElementById('selIcon');
        const selEasing = document.getElementById('selEasing');
        const selDuration = document.getElementById('selDuration');
        const selRotation = document.getElementById('selRotation');

        populateSelects(selIcon, selEasing, selDuration, selRotation);
        setupEventHandlers(svgMorpheus, selIcon, selEasing, selDuration, selRotation);

        console.log(t('console.staticComplete'));
      }

      async function initDynamicExample() {
        console.log('å¼€å§‹åˆå§‹åŒ–åŠ¨æ€ç¤ºä¾‹...');
        
        // åŠ¨æ€ SVG å›¾æ ‡æ•°æ®ï¼ˆä½¿ç”¨ç®€å•çš„å‡ ä½•å›¾å½¢ä½œä¸ºç¤ºä¾‹ï¼‰
        const dynamicSvgMap = {
          'circle': `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="8" fill="currentColor"/>
          </svg>`,
          'square': `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <rect x="4" y="4" width="16" height="16" fill="currentColor"/>
          </svg>`,
          'triangle': `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <polygon points="12,3 21,20 3,20" fill="currentColor"/>
          </svg>`,
          'star': `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12,2 L15,8 L22,9 L17,14 L18,21 L12,18 L6,21 L7,14 L2,9 L9,8 Z" fill="currentColor"/>
          </svg>`,
          'heart': `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M20.84,4.61a5.5,5.5 0,0,0 -7.78,0L12,5.67 10.94,4.61a5.5,5.5 0,0,0 -7.78,7.78L12,21.23l8.84,-8.84A5.5,5.5 0,0,0 20.84,4.61Z" fill="currentColor"/>
          </svg>`,
          'diamond': `<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <polygon points="12,2 22,12 12,22 2,12" fill="currentColor"/>
          </svg>`
        };

        try {
          console.log('å‡†å¤‡è°ƒç”¨ bundleSvgs...');
          console.log('bundleSvgs å‡½æ•°ç±»å‹:', typeof bundleSvgs);
          console.log('dynamicSvgMap å†…å®¹:', dynamicSvgMap);
          
          // è‡ªå®šä¹‰ SVG å±æ€§
          const customSvgAttributes = {
            viewBox: '0 0 24 24',
            width: '100%',
            height: '100%',
            class: 'dynamic-iconset',
            'data-source': 'bundleSvgs-dynamic'
          };
          
          console.log('customSvgAttributes:', customSvgAttributes);
          console.log('å¼€å§‹è°ƒç”¨ bundleSvgs...');
          
          // ä½¿ç”¨ bundleSvgs ç”Ÿæˆåˆå¹¶çš„ SVG Blob URLï¼Œå¹¶ä¼ å…¥è‡ªå®šä¹‰å±æ€§
          const bundledSvgUrl = await bundleSvgs(dynamicSvgMap, customSvgAttributes);
          console.log('bundleSvgs è°ƒç”¨æˆåŠŸï¼Œç”Ÿæˆçš„ Blob URL:', bundledSvgUrl);
          
          // è®¾ç½® object å…ƒç´ çš„ data å±æ€§
          const iconObject = document.getElementById('iconDynamic');
          const loadingIndicator = document.getElementById('loadingIndicator');
          const dynamicOptionsContainer = document.getElementById('dynamicOptionsContainer');

          console.log('iconObject å…ƒç´ :', iconObject);
          console.log('loadingIndicator å…ƒç´ :', loadingIndicator);

          // è®¾ç½®è¶…æ—¶æœºåˆ¶ï¼Œé˜²æ­¢ä¸€ç›´å¡åœ¨åŠ è½½çŠ¶æ€
          const loadTimeout = setTimeout(() => {
            console.log('Object åŠ è½½è¶…æ—¶ï¼Œå°è¯•ç›´æ¥ä½¿ç”¨ SVG');
            showDynamicExample();
          }, 3000);

          // ç­‰å¾… SVG åŠ è½½å®Œæˆååˆå§‹åŒ–
          iconObject.onload = function() {
            console.log('Object onload äº‹ä»¶è§¦å‘');
            clearTimeout(loadTimeout);
            showDynamicExample();
          };

          // é”™è¯¯å¤„ç†
          iconObject.onerror = function(e) {
            console.error('Object åŠ è½½å¤±è´¥:', e);
            clearTimeout(loadTimeout);
            showErrorMessage(t('error.loadFailed'));
          };

          // è®¾ç½® data å±æ€§
          console.log('è®¾ç½® iconObject.data ä¸º:', bundledSvgUrl);
          iconObject.data = bundledSvgUrl;
          console.log('å·²è®¾ç½® object.dataï¼Œç­‰å¾…åŠ è½½å®Œæˆ...');

          function showDynamicExample() {
            // éšè—åŠ è½½æŒ‡ç¤ºå™¨
            if (loadingIndicator) {
              loadingIndicator.style.display = 'none';
            }
            
            // æ˜¾ç¤ºSVGå’Œé€‰é¡¹
            iconObject.style.display = 'block';
            if (dynamicOptionsContainer) {
              dynamicOptionsContainer.style.display = 'block';
            }
            
            try {
              const svgMorpheusDynamic = new SVGMorpheus('#iconDynamic');
              const selIconDynamic = document.getElementById('selIconDynamic');
              const selEasingDynamic = document.getElementById('selEasingDynamic');
              const selDurationDynamic = document.getElementById('selDurationDynamic');
              const selRotationDynamic = document.getElementById('selRotationDynamic');

              // ä¸ºåŠ¨æ€ç¤ºä¾‹åˆ›å»ºå›¾æ ‡é€‰é¡¹
              const dynamicIcons = {
                'circle': t('icons.circle'),
                'square': t('icons.square'),
                'triangle': t('icons.triangle'),
                'star': t('icons.star'),
                'heart': t('icons.heart'),
                'diamond': t('icons.diamond')
              };

              populateSelectsDynamic(selIconDynamic, selEasingDynamic, selDurationDynamic, selRotationDynamic, dynamicIcons);
              setupEventHandlers(svgMorpheusDynamic, selIconDynamic, selEasingDynamic, selDurationDynamic, selRotationDynamic, true);

              console.log(t('console.dynamicComplete'));
            } catch (morpheusError) {
              console.error('SVGMorpheus åˆå§‹åŒ–å¤±è´¥:', morpheusError);
              showErrorMessage(t('error.loadFailed'));
            }
          }

          function showErrorMessage(message) {
            const loadingIndicator = document.getElementById('loadingIndicator');
            if (loadingIndicator) {
              loadingIndicator.innerHTML = `<span style="color: #f44336;">${message}</span>`;
            }
          }
        } catch (error) {
          console.error('åŠ¨æ€ SVG åˆå§‹åŒ–å¤±è´¥:', error);
          // æ£€æŸ¥æ˜¯å¦æ˜¯å› ä¸ºæ¨¡å—å¯¼å…¥å¤±è´¥
          const loadingIndicator = document.getElementById('loadingIndicator');
          if (loadingIndicator) {
            if (error.message && error.message.includes('bundleSvgs')) {
              loadingIndicator.innerHTML = `<span style="color: #f44336;">${t('error.bundleFailed')}</span>`;
            } else {
              loadingIndicator.innerHTML = `<span style="color: #f44336;">${t('error.loadFailed')}</span>`;
            }
          }
        }
      }

      function populateSelects(selIcon, selEasing, selDuration, selRotation) {
        populateSelectsDynamic(selIcon, selEasing, selDuration, selRotation, icons);
      }

      function populateSelectsDynamic(selIcon, selEasing, selDuration, selRotation, iconMap) {
        // å¡«å……å›¾æ ‡é€‰æ‹©
        for (const key in iconMap) {
          selIcon.options[selIcon.options.length] = new Option(iconMap[key], key);
        }

        // å¡«å……ç¼“åŠ¨é€‰æ‹©
        for (const key in easings) {
          selEasing.options[selEasing.options.length] = new Option(easings[key], key);
        }

        // å¡«å……æ—¶é•¿é€‰æ‹©
        for (let i = 0; i < durations.length; i++) {
          selDuration.options[selDuration.options.length] = new Option(durations[i], durations[i]);
        }

        // å¡«å……æ—‹è½¬é€‰æ‹©
        for (const key in rotations) {
          selRotation.options[selRotation.options.length] = new Option(rotations[key], key);
        }

        // è®¾ç½®é»˜è®¤å€¼
        selIcon.selectedIndex = selIcon.options.length - 1;
        selEasing.selectedIndex = 15;
        selDuration.selectedIndex = 2;
        selRotation.selectedIndex = 0;
      }

      function setupEventHandlers(svgMorpheus, selIcon, selEasing, selDuration, selRotation, isDynamic = false) {
        function getSelValue(sel) {
          return sel.options[sel.selectedIndex].value;
        }

        let timeoutInstance, manualChange = false;

        function onIconChange() {
          clearTimeout(timeoutInstance);
          const valIcon = getSelValue(selIcon);
          const valEasing = getSelValue(selEasing);
          const valDuration = getSelValue(selDuration);
          const valRotation = getSelValue(selRotation);
          
          svgMorpheus.to(valIcon, {
            duration: valDuration, 
            easing: valEasing, 
            rotation: valRotation
          }, !manualChange ? launchTimer : null);
        }

        function timerTick() {
          let selIndex = selIcon.selectedIndex;
          while (selIndex === selIcon.selectedIndex) {
            selIndex = Math.round(Math.random() * (selIcon.options.length - 1));
          }
          selIcon.selectedIndex = selIndex;
          onIconChange();
        }

        function launchTimer() {
          timeoutInstance = setTimeout(timerTick, 1000);
        }

        selIcon.addEventListener('change', onIconChange);
        selIcon.addEventListener('click', function() {
          clearTimeout(timeoutInstance);
          manualChange = true;
        });

        // å¯åŠ¨è‡ªåŠ¨åˆ‡æ¢
        launchTimer();
      }
    };
    
    // å¤åˆ¶ä»£ç åŠŸèƒ½
    function copyCode(button) {
      const codeSection = button.closest('.code-section');
      const codeElement = codeSection.querySelector('pre code');
      
      // è·å–çº¯æ–‡æœ¬å†…å®¹ï¼Œå»æ‰HTMLæ ‡ç­¾
      let codeText = codeElement.textContent || codeElement.innerText;
      
      // æ¸…ç†å¤šä½™çš„ç©ºç™½
      codeText = codeText.replace(/\n\s*\n/g, '\n').trim();
      
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(codeText).then(() => {
          showCopySuccess(button);
        }).catch(() => {
          fallbackCopyTextToClipboard(codeText, button);
        });
      } else {
        fallbackCopyTextToClipboard(codeText, button);
      }
    }
    
    function fallbackCopyTextToClipboard(text, button) {
      const textArea = document.createElement("textarea");
      textArea.value = text;
      textArea.style.position = "fixed";
      textArea.style.left = "-9999px";
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      
      try {
        document.execCommand('copy');
        showCopySuccess(button);
      } catch (err) {
        console.error('å¤åˆ¶å¤±è´¥:', err);
        showCopyError(button);
      }
      
      document.body.removeChild(textArea);
    }
    
    function showCopySuccess(button) {
      button.textContent = t('button.copied');
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = t('button.copy');
        button.classList.remove('copied');
      }, 2000);
    }
    
    function showCopyError(button) {
      button.textContent = t('button.copyFailed');
      button.classList.add('copied');
      setTimeout(() => {
        button.textContent = t('button.copy');
        button.classList.remove('copied');
      }, 2000);
    }
  </script>
</body>
</html>