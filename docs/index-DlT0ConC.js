const t="\t\n\v\f\r   ᠎             　\u2028\u2029",e=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),r=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");function n(t){if(!t)return null;if(Array.isArray(t))return t;{const n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return String(t).replace(e,function(t,e,a){const s=[];let i=e.toLowerCase();if(a.replace(r,function(t,e){return e&&s.push(+e),""}),"m"===i&&s.length>2&&(o.push([e.charCodeAt(0)].concat(s.splice(0,2))),i="l",e="m"===e?"l":"L"),"o"===i&&1===s.length&&o.push([e.charCodeAt(0),s[0]]),"r"===i)o.push([e.charCodeAt(0)].concat(s));else for(;s.length>=n[i]&&(o.push([e.charCodeAt(0)].concat(s.splice(0,n[i]))),n[i]););return""}),o}}function o(t){const e=n(t);if(!e||!e.length)return[["M",0,0]];const r=[];let o=0,a=0,s=0,i=0,c=0;e[0][0]==="M".charCodeAt(0)&&(o=+e[0][1],a=+e[0][2],s=o,i=a,c++,r[0]=["M",o,a]);for(let n=c,l=e.length;n<l;n++){const t=[],c=e[n],l=c[0],h=String.fromCharCode(l);if(h!==h.toUpperCase())switch(t[0]=h.toUpperCase(),t[0]){case"A":t[1]=c[1],t[2]=c[2],t[3]=c[3],t[4]=c[4],t[5]=c[5],t[6]=+c[6]+o,t[7]=+c[7]+a;break;case"V":t[1]=+c[1]+a;break;case"H":t[1]=+c[1]+o;break;case"M":s=+c[1]+o,i=+c[2]+a;default:for(let e=1,r=c.length;e<r;e++)t[e]=+c[e]+(e%2?o:a)}else{t[0]=h;for(let e=1,r=c.length;e<r;e++)t[e]=c[e]}switch(t[0]){case"Z":o=s,a=i;break;case"H":o=t[1];break;case"V":a=t[1];break;case"M":s=t[1],i=t[2],o=t[1],a=t[2];break;default:o=t[t.length-2],a=t[t.length-1]}r.push(t)}return r}function a(t,e){const r=o(t),n=e&&o(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(t,e,r){let n,o;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(c.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==r||"S"==r?(n=2*e.x-e.bx,o=2*e.y-e.by):(n=e.x,o=e.y),t=["C",n,o].concat(t.slice(1));break;case"T":"Q"==r||"T"==r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(i(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(i(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(s(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(s(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(s(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(s(e.x,e.y,e.X,e.Y))}return t},u=function(t,e){if(t[e].length>7){t[e].shift();const r=t[e];for(;r.length;)m[e]="A",n&&(d[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1)}},f=function(t,e,r,n,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=t[o][1],r.y=t[o][2])},m=[],d=[];let p="",g="";for(let o=0,s=Math.max(r.length,n&&n.length||0);o<s;o++){r[o]&&(p=r[o][0]),"C"!=p&&(m[o]=p,o&&(g=m[o-1])),r[o]=h(r[o],a,g),"A"!=m[o]&&"C"==p&&(m[o]="C"),u(r,o),n&&(n[o]&&(p=n[o][0]),"C"!=p&&(d[o]=p,o&&(g=d[o-1])),n[o]=h(n[o],l,g),"A"!=d[o]&&"C"==p&&(d[o]="C"),u(n,o)),f(r,n,a,l,o),f(n,r,l,a,o);const t=r[o],e=n&&n[o],s=t.length,i=n&&e.length;a.x=t[s-2],a.y=t[s-1],a.bx=parseFloat(t[s-4])||a.x,a.by=parseFloat(t[s-3])||a.y,l.bx=n&&(parseFloat(e[i-4])||l.x),l.by=n&&(parseFloat(e[i-3])||l.y),l.x=n&&e[i-2],l.y=n&&e[i-1]}return n?[r,n]:r}function s(t,e,r,n){return[t,e,r,n,r,n]}function i(t,e,r,n,o,a){var s=1/3,i=2/3;return[s*t+i*r,s*e+i*n,s*o+i*r,s*a+i*n,o,a]}function c(t,e,r,n,o,a,s,i,l,h){var u,f=120*Math.PI/180,m=Math.PI/180*(+o||0),d=[],p=function(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}};if(h)x=h[0],C=h[1],v=h[2],I=h[3];else{t=(u=p(t,e,-m)).x,e=u.y;var g=(t-(i=(u=p(i,l,-m)).x))/2,b=(e-(l=u.y))/2,y=g*g/(r*r)+b*b/(n*n);y>1&&(r*=y=Math.sqrt(y),n*=y);var M=r*r,w=n*n,_=(a==s?-1:1)*Math.sqrt(Math.abs((M*w-M*b*b-w*g*g)/(M*b*b+w*g*g))),v=_*r*b/n+(t+i)/2,I=_*-n*g/r+(e+l)/2,x=Math.asin(+((e-I)/n).toFixed(9)),C=Math.asin(+((l-I)/n).toFixed(9));x=t<v?Math.PI-x:x,C=i<v?Math.PI-C:C,x<0&&(x=2*Math.PI+x),C<0&&(C=2*Math.PI+C),s&&x>C&&(x-=2*Math.PI),!s&&C>x&&(C-=2*Math.PI)}var k=C-x;if(Math.abs(k)>f){var N=C,$=i,E=l;C=x+f*(s&&C>x?1:-1),d=c(i=v+r*Math.cos(C),l=I+n*Math.sin(C),r,n,o,0,s,$,E,[C,N,v,I])}k=C-x;var A=Math.cos(x),R=Math.sin(x),S=Math.cos(C),B=Math.sin(C),j=Math.tan(k/4),F=4/3*r*j,P=4/3*n*j,q=[t,e],L=[t+F*R,e-P*A],O=[i+F*B,l-P*S],D=[i,l];if(L[0]=2*q[0]-L[0],L[1]=2*q[1]-L[1],h)return[L,O,D].concat(d);for(var z=[],G=0,T=(d=[L,O,D].concat(d).join().split(",")).length;G<T;G++)z[G]=G%2?p(d[G-1],d[G],m).y:p(d[G],d[G+1],m).x;return z}const l=/,?([a-z]),?/gi;function h(t){return t.join(",").replace(l,"$1")}function u(t){if(!t||!Array.isArray(t)||0===t.length)return f(0,0,0,0);let e=0,r=0;const n=[],o=[];let a;for(let h=0,u=t.length;h<u;h++)if(a=t[h],"M"==a[0])e=isFinite(a[1])?a[1]:0,r=isFinite(a[2])?a[2]:0,n.push(e),o.push(r);else{const t=e,s=r,i=isFinite(a[1])?a[1]:0,c=isFinite(a[2])?a[2]:0,l=isFinite(a[3])?a[3]:0,h=isFinite(a[4])?a[4]:0,u=isFinite(a[5])?a[5]:0,f=isFinite(a[6])?a[6]:0,d=m(t,s,i,c,l,h,u,f);isFinite(d.min.x)&&isFinite(d.max.x)&&isFinite(d.min.y)&&isFinite(d.max.y)&&(n.push(d.min.x,d.max.x),o.push(d.min.y,d.max.y)),e=u,r=f}if(0===n.length||0===o.length)return f(0,0,0,0);const s=Math.min(...n),i=Math.min(...o),c=Math.max(...n),l=Math.max(...o);return isFinite(s)&&isFinite(i)&&isFinite(c)&&isFinite(l)?f(s,i,c-s,l-i):f(0,0,0,0)}function f(t,e,r,n){return{x:t=isFinite(t)?t:0,y:e=isFinite(e)?e:0,w:r=isFinite(r)?r:0,h:n=isFinite(n)?n:0,cx:t+r/2,cy:e+n/2}}function m(t,e,r,n,o,a,s,i){for(var c,l,h,u,f,m,d,p,g=[],b=[[],[]],y=0;y<2;++y)if(0==y?(l=6*t-12*r+6*o,c=-3*t+9*r-9*o+3*s,h=3*r-3*t):(l=6*e-12*n+6*a,c=-3*e+9*n-9*a+3*i,h=3*n-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;0<(u=-h/l)&&u<1&&g.push(u)}else d=l*l-4*h*c,p=Math.sqrt(d),d<0||(0<(f=(-l+p)/(2*c))&&f<1&&g.push(f),0<(m=(-l-p)/(2*c))&&m<1&&g.push(m));for(var M,w=g.length,_=w;w--;)M=1-(u=g[w]),b[0][w]=M*M*M*t+3*M*M*u*r+3*M*u*u*o+u*u*u*s,b[1][w]=M*M*M*e+3*M*M*u*n+3*M*u*u*a+u*u*u*i;return b[0][_]=t,b[1][_]=e,b[0][_+1]=s,b[1][_+1]=i,b[0].length=b[1].length=_+2,{min:{x:Math.min.apply(0,b[0]),y:Math.min.apply(0,b[1])},max:{x:Math.max.apply(0,b[0]),y:Math.max.apply(0,b[1])}}}function d(t,e){const[r,n,o,a]=t.values,[s,i,c,l]=e.values,h=c/o,u=l/a;return{scaleX:h,scaleY:u,translateX:s-r*h,translateY:i-n*u}}function p(t,e,r){return[t*r.scaleX+r.translateX,e*r.scaleY+r.translateY]}function g(t,e="",r){const n={gradients:{},patterns:{},others:{}};for(const[o,a]of Object.entries(t.gradients)){const t=e+o;let s=a;s=s.replace(new RegExp(`id="${o}"`,"g"),`id="${t}"`),s=s.replace(new RegExp(`id='${o}'`,"g"),`id='${t}'`),r&&(s=b(s,r)),n.gradients[t]=s}for(const[o,a]of Object.entries(t.patterns)){const t=e+o;let s=a;s=s.replace(new RegExp(`id="${o}"`,"g"),`id="${t}"`),s=s.replace(new RegExp(`id='${o}'`,"g"),`id='${t}'`),r&&(s=y(s,r)),n.patterns[t]=s}for(const[o,a]of Object.entries(t.others)){const t=e+o;let r=a;r=r.replace(new RegExp(`id="${o}"`,"g"),`id="${t}"`),r=r.replace(new RegExp(`id='${o}'`,"g"),`id='${t}'`),n.others[t]=r}return n}function b(t,e){let r=t;return t.includes("linearGradient")&&(r=r.replace(/\b(x1|y1|x2|y2)=["']([^"']+)["']/g,(t,r,n)=>`${r}="${M(r,n,e)}"`)),t.includes("radialGradient")&&(r=r.replace(/\b(cx|cy|fx|fy|r)=["']([^"']+)["']/g,(t,r,n)=>`${r}="${M(r,n,e)}"`)),r}function y(t,e){let r=t;return r=r.replace(/\b(x|y|width|height)=["']([^"']+)["']/g,(t,r,n)=>`${r}="${M(r,n,e)}"`),r}function M(t,e,r){if(e.endsWith("%"))return e;const n=parseFloat(e);if(isNaN(n))return e;let o;switch(t){case"x1":case"x2":case"cx":case"fx":case"x":o=n*r.scaleX+r.translateX;break;case"y1":case"y2":case"cy":case"fy":case"y":o=n*r.scaleY+r.translateY;break;case"r":o=n*Math.sqrt(r.scaleX*r.scaleY);break;case"width":o=n*r.scaleX;break;case"height":o=n*r.scaleY;break;default:o=n}return o.toFixed(3)}function w(t,e,r){let n={...e};for(const[o,a]of Object.entries(n))if("string"==typeof a&&a.startsWith("url(#")){const t=a.match(/url\(#([^)]+)\)/);t&&r[t[1]]&&(n[o]=`url(#${r[t[1]]})`)}return{pathData:t,attrs:n}}const _=Math.asin(1),v=2*Math.PI,I={"circ-in":t=>-1*(Math.sqrt(1-t*t)-1),"circ-out":t=>Math.sqrt(1-(t-=1)*t),"circ-in-out":t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),"cubic-in":t=>t*t*t,"cubic-out":t=>--t*t*t+1,"cubic-in-out":t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,"elastic-in":t=>{if(0==t)return 0;if(1==t)return 1;const e=.3/v*_;return-Math.pow(2,10*(t-=1))*Math.sin((t-e)*v/.3)},"elastic-out":t=>{if(0==t)return 0;if(1==t)return 1;const e=.3/v*_;return Math.pow(2,-10*t)*Math.sin((t-e)*v/.3)+1},"elastic-in-out":t=>{if(0==t)return 0;if(2==(t/=.5))return 1;const e=.45,r=e/v*_;return t<1?Math.pow(2,10*(t-=1))*Math.sin((t-r)*v/e)*-.5:Math.pow(2,-10*(t-=1))*Math.sin((t-r)*v/e)*.5+1},"expo-in":t=>0==t?0:Math.pow(2,10*(t-1)),"expo-out":t=>1==t?1:1-Math.pow(2,-10*t),"expo-in-out":t=>0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t)),linear:t=>t,"quad-in":t=>t*t,"quad-out":t=>t*(2-t),"quad-in-out":t=>t<.5?2*t*t:(4-2*t)*t-1,"quart-in":t=>t*t*t*t,"quart-out":t=>1- --t*t*t*t,"quart-in-out":t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,"quint-in":t=>t*t*t*t*t,"quint-out":t=>1+--t*t*t*t*t,"quint-in-out":t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,"sine-in":t=>1-Math.cos(t*(Math.PI/2)),"sine-out":t=>Math.sin(t*(Math.PI/2)),"sine-in-out":t=>.5*(1-Math.cos(Math.PI*t))};function x(t,e){let r=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(t=>[t]));let n=e[0].length,o=e[0].map((t,r)=>e.map(t=>t[r])),a=t.map(t=>o.map(e=>{let r=0;if(!Array.isArray(t)){for(let n of e)r+=t*n;return r}for(let n=0;n<t.length;n++)r+=t[n]*(e[n]||0);return r}));return 1===r&&(a=a[0]),1===n?a.map(t=>t[0]):a}function C(t){return"string"===k(t)}function k(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function N(t,{precision:e,unit:r}){return $(t)?"none":A(t,e)+(r??"")}function $(t){return Number.isNaN(t)||t instanceof Number&&(null==t?void 0:t.none)}function E(t){return $(t)?0:t}function A(t,e){if(0===t)return 0;let r=~~t,n=0;r&&e&&(n=1+~~Math.log10(Math.abs(r)));const o=10**(e-n);return Math.floor(t*o+.5)/o}const R={deg:1,grad:.9,rad:180/Math.PI,turn:360};function S(t){if(!t)return;t=t.trim();const e=/^-?[\d.]+$/,r=/%|deg|g?rad|turn$/,n=/\/?\s*(none|[-\w.]+(?:%|deg|g?rad|turn)?)/g;let o=t.match(/^([a-z]+)\((.+?)\)$/i);if(o){let t=[];return o[2].replace(n,(n,o)=>{let a=o.match(r),s=o;if(a){let t=a[0],e=s.slice(0,-t.length);"%"===t?(s=new Number(e/100),s.type="<percentage>"):(s=new Number(e*R[t]),s.type="<angle>",s.unit=t)}else e.test(s)?(s=new Number(s),s.type="<number>"):"none"===s&&(s=new Number(NaN),s.none=!0);n.startsWith("/")&&(s=s instanceof Number?s:new Number(s),s.alpha=!0),"object"==typeof s&&s instanceof Number&&(s.raw=o),t.push(s)}),{name:o[1].toLowerCase(),rawName:o[1],rawArgs:o[2],args:t}}}function B(t){return t[t.length-1]}function j(t,e,r){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*r}function F(t,e,r){return(r-t)/(e-t)}function P(t,e,r){return j(e[0],e[1],F(t[0],t[1],r))}function q(t){return t.map(t=>t.split("|").map(t=>{let e=(t=t.trim()).match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(e){let t=new String(e[1]);return t.range=[+e[2],+e[3]],t}return t}))}function L(t,e,r){return Math.max(Math.min(r,e),t)}function O(t,e){return Math.sign(t)===Math.sign(e)?t:-t}function D(t,e){return O(Math.abs(t)**e,t)}function z(t,e){return 0===e?0:t/e}function G(t,e,r=0,n=t.length){for(;r<n;){const o=r+n>>1;t[o]<e?r=o+1:n=o}return r}var T=Object.freeze({__proto__:null,bisectLeft:G,clamp:L,copySign:O,interpolate:j,interpolateInv:F,isNone:$,isString:C,last:B,mapRange:P,multiplyMatrices:x,parseCoordGrammar:q,parseFunction:S,serializeNumber:N,skipNone:E,spow:D,toPrecision:A,type:k,zdiv:z});const H=new class{add(t,e,r){if("string"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach(function(t){this[t]=this[t]||[],e&&this[t][r?"unshift":"push"](e)},this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])}run(t,e){this[t]=this[t]||[],this[t].forEach(function(t){t.call(e&&e.context?e.context:e,e)})}};var W={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!=="production".toLowerCase(),warn:function(t){var e,r;this.verbose&&(null==(r=null==(e=null==globalThis?void 0:globalThis.console)?void 0:e.warn)||r.call(e,t))}};const Y={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function X(t){return Array.isArray(t)?t:Y[t]}function Z(t,e,r,n={}){if(t=X(t),e=X(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${t||e?"":"/"}${e?"":"to"}`);if(t===e)return r;let o={W1:t,W2:e,XYZ:r,options:n};if(H.run("chromatic-adaptation-start",o),o.M||(o.W1===Y.D65&&o.W2===Y.D50?o.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:o.W1===Y.D50&&o.W2===Y.D65&&(o.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),H.run("chromatic-adaptation-end",o),o.M)return x(o.M,o.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}const U=new Set(["<number>","<percentage>","<angle>"]);function V(t,e,r,n){return Object.entries(t.coords).map(([t,o],a)=>{let s,i=e.coordGrammar[a],c=n[a],l=null==c?void 0:c.type;if(s=c.none?i.find(t=>U.has(t)):i.find(t=>t==l),!s){let e=o.name||t;throw new TypeError(`${l??c.raw} not allowed for ${e} in ${r}()`)}let h=s.range;"<percentage>"===l&&(h||=[0,1]);let u=o.range||o.refRange;return h&&u&&(n[a]=P(h,u,n[a])),s})}function J(t,{meta:e}={}){var r,n,o,a;let s={str:null==(r=String(t))?void 0:r.trim()};if(H.run("parse-start",s),s.color)return s.color;if(s.parsed=S(s.str),s.parsed){let t=s.parsed.name;if("color"===t){let t=s.parsed.args.shift(),r=t.startsWith("--")?t.substring(2):`--${t}`,i=[t,r],c=s.parsed.rawArgs.indexOf("/")>0?s.parsed.args.pop():1;for(let o of K.all){let r=o.getFormat("color");if(r&&(i.includes(r.id)||(null==(n=r.ids)?void 0:n.filter(t=>i.includes(t)).length))){const n=Object.keys(o.coords).map((t,e)=>s.parsed.args[e]||0);let a;return r.coordGrammar&&(a=V(o,r,"color",n)),e&&Object.assign(e,{formatId:"color",types:a}),r.id.startsWith("--")&&!t.startsWith("--")&&W.warn(`${o.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${r.id}) instead of color(${t}).`),t.startsWith("--")&&!r.id.startsWith("--")&&W.warn(`${o.name} is a standard space and supported in the CSS spec. Use color(${r.id}) instead of prefixed color(${t}).`),{spaceId:o.id,coords:n,alpha:c}}}let l="",h=t in K.registry?t:r;if(h in K.registry){let t=null==(a=null==(o=K.registry[h].formats)?void 0:o.color)?void 0:a.id;t&&(l=`Did you mean color(${t})?`)}throw new TypeError(`Cannot parse color(${t}). `+(l||"Missing a plugin?"))}for(let r of K.all){let n=r.getFormat(t);if(n&&"function"===n.type){let o=1;(n.lastAlpha||B(s.parsed.args).alpha)&&(o=s.parsed.args.pop());let a,i=s.parsed.args;return n.coordGrammar&&(a=V(r,n,t,i)),e&&Object.assign(e,{formatId:n.name,types:a}),{spaceId:r.id,coords:i,alpha:o}}}}else for(let i of K.all)for(let t in i.formats){let r=i.formats[t];if("custom"!==r.type)continue;if(r.test&&!r.test(s.str))continue;let n=r.parse(s.str);if(n)return n.alpha??=1,e&&(e.formatId=t),n}throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`)}function Q(t){if(Array.isArray(t))return t.map(Q);if(!t)throw new TypeError("Empty color reference");C(t)&&(t=J(t));let e=t.space||t.spaceId;return e instanceof K||(t.space=K.get(e)),void 0===t.alpha&&(t.alpha=1),t}class K{constructor(t){var e;this.id=t.id,this.name=t.name,this.base=t.base?K.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let r=t.coords??this.base.coords;for(let o in r)"name"in r[o]||(r[o].name=o);this.coords=r;let n=t.white??this.base.white??"D65";this.white=X(n),this.formats=t.formats??{};for(let o in this.formats){let t=this.formats[o];t.type||="function",t.name||=o}(null==(e=this.formats.color)?void 0:e.id)||(this.formats.color={...this.formats.color??{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace="self"===t.gamutSpace?this:K.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(t,e)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:tt(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),H.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=75e-6}={}){if(!this.equals(this.gamutSpace))return t=this.to(this.gamutSpace,t),this.gamutSpace.inGamut(t,{epsilon:e});let r=Object.values(this.coords);return t.every((t,n)=>{let o=r[n];if("angle"!==o.type&&o.range){if(Number.isNaN(t))return!0;let[r,n]=o.range;return(void 0===r||t>=r-e)&&(void 0===n||t<=n+e)}return!0})}get isUnbounded(){return Object.values(this.coords).every(t=>!("range"in t))}get cssId(){var t,e;return(null==(e=null==(t=this.formats)?void 0:t.color)?void 0:e.id)||this.id}get isPolar(){for(let t in this.coords)if("angle"===this.coords[t].type)return!0;return!1}getFormat(t){if("object"==typeof t)return t=et(t,this);let e;return e="default"===t?Object.values(this.formats)[0]:this.formats[t],e?(e=et(e,this),e):null}equals(t){return!!t&&(this===t||this.id===t||this.id===t.id)}to(t,e){if(1===arguments.length){const r=Q(t);[t,e]=[r.space,r.coords]}if(t=K.get(t),this.equals(t))return e;e=e.map(t=>Number.isNaN(t)?0:t);let r,n,o=this.path,a=t.path;for(let s=0;s<o.length&&o[s].equals(a[s]);s++)r=o[s],n=s;if(!r)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let s=o.length-1;s>n;s--)e=o[s].toBase(e);for(let s=n+1;s<a.length;s++)e=a[s].fromBase(e);return e}from(t,e){if(1===arguments.length){const r=Q(t);[t,e]=[r.space,r.coords]}return(t=K.get(t)).to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let r=this.coords[e],n=r.range||r.refRange;t.push((null==n?void 0:n.min)??0)}return t}static registry={};static get all(){return[...new Set(Object.values(K.registry))]}static register(t,e){if(1===arguments.length&&(t=(e=arguments[0]).id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,1===arguments.length&&e.aliases)for(let r of e.aliases)this.register(r,e);return e}static get(t,...e){if(!t||t instanceof K)return t;if("string"===k(t)){let e=K.registry[t.toLowerCase()];if(!e)throw new TypeError(`No color space found with id = "${t}"`);return e}if(e.length)return K.get(...e);throw new TypeError(`${t} is not a valid color space`)}static resolveCoord(t,e){var r;let n,o,a=k(t);if("string"===a?t.includes(".")?[n,o]=t.split("."):[n,o]=[,t]:Array.isArray(t)?[n,o]=t:(n=t.space,o=t.coordId),n=K.get(n),n||(n=e),!n)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(a=k(o),"number"===a||"string"===a&&o>=0){let t=Object.entries(n.coords)[o];if(t)return{space:n,id:t[0],index:o,...t[1]}}n=K.get(n);let s=o.toLowerCase(),i=0;for(let c in n.coords){let t=n.coords[c];if(c.toLowerCase()===s||(null==(r=t.name)?void 0:r.toLowerCase())===s)return{space:n,id:c,index:i,...t};i++}throw new TypeError(`No "${o}" coordinate found in ${n.name}. Its coordinates are: ${Object.keys(n.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function tt(t){let e=[t];for(let r=t;r=r.base;)e.push(r);return e}function et(t,{coords:e}={}){if(t.coords&&!t.coordGrammar){t.type||="function",t.name||="color",t.coordGrammar=q(t.coords);let r=Object.entries(e).map(([e,r],n)=>{let o=t.coordGrammar[n][0],a=r.range||r.refRange,s=o.range,i="";return"<percentage>"==o?(s=[0,100],i="%"):"<angle>"==o&&(i="deg"),{fromRange:a,toRange:s,suffix:i}});t.serializeCoords=(t,e)=>t.map((t,n)=>{let{fromRange:o,toRange:a,suffix:s}=r[n];return o&&a&&(t=P(o,a,t)),t=N(t,{precision:e,unit:s})})}return t}var rt=new K({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class nt extends K{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=rt),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??=e=>{let r=x(t.toXYZ_M,e);return this.white!==this.base.white&&(r=Z(this.white,this.base.white,r)),r},t.fromBase??=e=>(e=Z(this.base.white,this.white,e),x(t.fromXYZ_M,e))),t.referred??="display",super(t)}}function ot(t,e){return t=Q(t),!e||t.space.equals(e)?t.coords.slice():(e=K.get(e)).from(t)}function at(t,e){t=Q(t);let{space:r,index:n}=K.resolveCoord(e,t.space);return ot(t,r)[n]}function st(t,e,r){return t=Q(t),e=K.get(e),t.coords=e.to(t.space,r),t}function it(t,e,r){if(t=Q(t),2===arguments.length&&"object"===k(arguments[1])){let e=arguments[1];for(let r in e)it(t,r,e[r])}else{"function"==typeof r&&(r=r(at(t,e)));let{space:n,index:o}=K.resolveCoord(e,t.space),a=ot(t,n);a[o]=r,st(t,n,a)}return t}st.returns="color",it.returns="color";var ct=new K({id:"xyz-d50",name:"XYZ D50",white:"D50",base:rt,fromBase:t=>Z(rt.white,"D50",t),toBase:t=>Z("D50",rt.white,t)});const lt=216/24389,ht=24/116,ut=24389/27;let ft=Y.D50;var mt=new K({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:ft,base:ct,fromBase(t){let e=t.map((t,e)=>t/ft[e]).map(t=>t>lt?Math.cbrt(t):(ut*t+16)/116);return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>ht?Math.pow(e[0],3):(116*e[0]-16)/ut,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/ut,e[2]>ht?Math.pow(e[2],3):(116*e[2]-16)/ut].map((t,e)=>t*ft[e])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function dt(t){return(t%360+360)%360}var pt=new K({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:mt,fromBase(t){let e,[r,n,o]=t;return e=Math.abs(n)<.02&&Math.abs(o)<.02?NaN:180*Math.atan2(o,n)/Math.PI,[r,Math.sqrt(n**2+o**2),dt(e)]},toBase(t){let[e,r,n]=t;return r<0&&(r=0),isNaN(n)&&(n=0),[e,r*Math.cos(n*Math.PI/180),r*Math.sin(n*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const gt=25**7,bt=Math.PI,yt=180/bt,Mt=bt/180;function wt(t){const e=t*t;return e*e*e*t}function _t(t,e,{kL:r=1,kC:n=1,kH:o=1}={}){[t,e]=Q([t,e]);let[a,s,i]=mt.from(t),c=pt.from(mt,[a,s,i])[1],[l,h,u]=mt.from(e),f=pt.from(mt,[l,h,u])[1];c<0&&(c=0),f<0&&(f=0);let m=wt((c+f)/2),d=.5*(1-Math.sqrt(m/(m+gt))),p=(1+d)*s,g=(1+d)*h,b=Math.sqrt(p**2+i**2),y=Math.sqrt(g**2+u**2),M=0===p&&0===i?0:Math.atan2(i,p),w=0===g&&0===u?0:Math.atan2(u,g);M<0&&(M+=2*bt),w<0&&(w+=2*bt),M*=yt,w*=yt;let _,v=l-a,I=y-b,x=w-M,C=M+w,k=Math.abs(x);b*y===0?_=0:k<=180?_=x:x>180?_=x-360:x<-180?_=x+360:W.warn("the unthinkable has happened");let N,$=2*Math.sqrt(y*b)*Math.sin(_*Mt/2),E=(a+l)/2,A=(b+y)/2,R=wt(A);N=b*y===0?C:k<=180?C/2:C<360?(C+360)/2:(C-360)/2;let S=(E-50)**2,B=1+.015*S/Math.sqrt(20+S),j=1+.045*A,F=1;F-=.17*Math.cos((N-30)*Mt),F+=.24*Math.cos(2*N*Mt),F+=.32*Math.cos((3*N+6)*Mt),F-=.2*Math.cos((4*N-63)*Mt);let P=1+.015*A*F,q=30*Math.exp(-1*((N-275)/25)**2),L=2*Math.sqrt(R/(R+gt)),O=(v/(r*B))**2;return O+=(I/(n*j))**2,O+=($/(o*P))**2,O+=-1*Math.sin(2*q*Mt)*L*(I/(n*j))*($/(o*P)),Math.sqrt(O)}const vt=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],It=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],xt=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],Ct=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var kt=new K({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:rt,fromBase(t){let e=x(vt,t).map(t=>Math.cbrt(t));return x(xt,e)},toBase(t){let e=x(Ct,t).map(t=>t**3);return x(It,e)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Nt(t,e){[t,e]=Q([t,e]);let[r,n,o]=kt.from(t),[a,s,i]=kt.from(e),c=r-a,l=n-s,h=o-i;return Math.sqrt(c**2+l**2+h**2)}function $t(t,e,{epsilon:r=75e-6}={}){t=Q(t),e||(e=t.space),e=K.get(e);let n=t.coords;return e!==t.space&&(n=e.from(t)),e.inGamut(n,{epsilon:r})}function Et(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}function At(t,e,r="lab"){let n=(r=K.get(r)).from(t),o=r.from(e);return Math.sqrt(n.reduce((t,e,r)=>{let n=o[r];return isNaN(e)||isNaN(n)?t:t+(n-e)**2},0))}const Rt=Math.PI/180;var St=new K({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:rt,fromBase:t=>t.map(t=>Math.max(203*t,0)),toBase:t=>t.map(t=>Math.max(t/203,0))});const Bt=1.15,jt=.66,Ft=2610/16384,Pt=16384/2610,qt=.8359375,Lt=2413/128,Ot=18.6875,Dt=1.7*2523/32,zt=32/(1.7*2523),Gt=-.56,Tt=16295499532821565e-27,Ht=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],Wt=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],Yt=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],Xt=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var Zt=new K({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:St,fromBase(t){let[e,r,n]=t,o=x(Ht,[Bt*e-(Bt-1)*n,jt*r-(jt-1)*e,n]).map(function(t){return((qt+Lt*(t/1e4)**Ft)/(1+Ot*(t/1e4)**Ft))**Dt}),[a,s,i]=x(Yt,o);return[(1+Gt)*a/(1+Gt*a)-Tt,s,i]},toBase(t){let[e,r,n]=t,o=x(Xt,[(e+Tt)/(1+Gt-Gt*(e+Tt)),r,n]).map(function(t){return 1e4*((qt-t**zt)/(Ot*t**zt-Lt))**Pt}),[a,s,i]=x(Wt,o),c=(a+(Bt-1)*i)/Bt;return[c,(s+(jt-1)*c)/jt,i]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Ut=new K({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:Zt,fromBase(t){let e,[r,n,o]=t;const a=2e-4;return e=Math.abs(n)<a&&Math.abs(o)<a?NaN:180*Math.atan2(o,n)/Math.PI,[r,Math.sqrt(n**2+o**2),dt(e)]},toBase:t=>[t[0],t[1]*Math.cos(t[2]*Math.PI/180),t[1]*Math.sin(t[2]*Math.PI/180)]});const Vt=.8359375,Jt=2413/128,Qt=18.6875,Kt=2610/16384,te=2523/32,ee=16384/2610,re=32/2523,ne=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],oe=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],ae=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],se=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var ie=new K({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:St,fromBase:t=>function(t){let e=t.map(function(t){return((Vt+Jt*(t/1e4)**Kt)/(1+Qt*(t/1e4)**Kt))**te});return x(oe,e)}(x(ne,t)),toBase(t){let e=function(t){let e=x(ae,t),r=e.map(function(t){return 1e4*(Math.max(t**re-Vt,0)/(Jt-Qt*t**re))**ee});return r}(t);return x(se,e)}});const ce=Y.D65,le=1/.42,he=2*Math.PI,ue=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fe=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],me=[[460,451,288],[460,-891,-261],[460,-220,-6300]],de={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},pe={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},ge=180/Math.PI,be=Math.PI/180;function ye(t,e){return t.map(t=>{const r=D(e*Math.abs(t)*.01,.42);return 400*O(r,t)/(r+27.13)})}function Me(t,e,r,n,o){const a={};a.discounting=o,a.refWhite=t,a.surround=n;const s=t.map(t=>100*t);a.la=e,a.yb=r;const i=s[1],c=x(ue,s),l=(n=de[a.surround])[0];a.c=n[1],a.nc=n[2];const h=(1/(5*a.la+1))**4;a.fl=h*a.la+.1*(1-h)*(1-h)*Math.cbrt(5*a.la),a.flRoot=a.fl**.25,a.n=a.yb/i,a.z=1.48+Math.sqrt(a.n),a.nbb=.725*a.n**-.2,a.ncb=a.nbb;const u=Math.max(Math.min(l*(1-1/3.6*Math.exp((-a.la-42)/92)),1),0);a.dRgb=c.map(t=>j(1,i/t,u)),a.dRgbInv=a.dRgb.map(t=>1/t);const f=ye(c.map((t,e)=>t*a.dRgb[e]),a.fl);return a.aW=a.nbb*(2*f[0]+f[1]+.05*f[2]),a}const we=Me(ce,64/Math.PI*.2,20,"average",!1);function _e(t,e){if(!(void 0!==t.J^void 0!==t.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==t.C^void 0!==t.M^void 0!==t.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==t.h^void 0!==t.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===t.J||0===t.Q)return[0,0,0];let r=0;r=void 0!==t.h?dt(t.h)*be:function(t){let e=(t%400+400)%400;const r=Math.floor(.01*e);e%=100;const[n,o]=pe.h.slice(r,r+2),[a,s]=pe.e.slice(r,r+2);return dt((e*(s*n-a*o)-100*n*s)/(e*(s-a)-100*s))}(t.H)*be;const n=Math.cos(r),o=Math.sin(r);let a=0;void 0!==t.J?a=.1*D(t.J,.5):void 0!==t.Q&&(a=.25*e.c*t.Q/((e.aW+4)*e.flRoot));let s=0;void 0!==t.C?s=t.C/a:void 0!==t.M?s=t.M/e.flRoot/a:void 0!==t.s&&(s=4e-4*t.s**2*(e.aW+4)/e.c);const i=D(s*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),c=.25*(Math.cos(r+2)+3.8),l=e.aW*D(a,2/e.c/e.z),h=5e4/13*e.nc*e.ncb*c,u=l/e.nbb,f=23*(u+.305)*z(i,23*h+i*(11*n+108*o)),m=function(t,e){const r=100/e*2588.068098016295;return t.map(t=>{const e=Math.abs(t);return O(r*D(e/(400-e),le),t)})}(x(me,[u,f*n,f*o]).map(t=>1*t/1403),e.fl);return x(fe,m.map((t,r)=>t*e.dRgbInv[r])).map(t=>t/100)}function ve(t,e){const r=t.map(t=>100*t),n=ye(x(ue,r).map((t,r)=>t*e.dRgb[r]),e.fl),o=n[0]+(-12*n[1]+n[2])/11,a=(n[0]+n[1]-2*n[2])/9,s=(Math.atan2(a,o)%he+he)%he,i=.25*(Math.cos(s+2)+3.8),c=D(5e4/13*e.nc*e.ncb*z(i*Math.sqrt(o**2+a**2),n[0]+n[1]+1.05*n[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),l=D(e.nbb*(2*n[0]+n[1]+.05*n[2])/e.aW,.5*e.c*e.z),h=100*D(l,2),u=4/e.c*l*(e.aW+4)*e.flRoot,f=c*l,m=f*e.flRoot,d=dt(s*ge),p=function(t){let e=dt(t);e<=pe.h[0]&&(e+=360);const r=G(pe.h,e)-1,[n,o]=pe.h.slice(r,r+2),[a,s]=pe.e.slice(r,r+2),i=(e-n)/a;return pe.H[r]+100*i/(i+(o-e)/s)}(d);return{J:h,C:f,h:d,s:50*D(e.c*c/(e.aW+4),.5),Q:u,M:m,H:p}}var Ie=new K({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:rt,fromBase(t){const e=ve(t,we);return[e.J,e.M,e.h]},toBase:t=>_e({J:t[0],M:t[1],h:t[2]},we)});const xe=Y.D65,Ce=216/24389,ke=24389/27;function Ne(t){return t>8?Math.pow((t+16)/116,3):t/ke}function $e(t,e){const r=116*((n=t[1])>Ce?Math.cbrt(n):(ke*n+16)/116)-16;var n;if(0===r)return[0,0,0];const o=ve(t,Ee);return[dt(o.h),o.C,r]}const Ee=Me(xe,200/Math.PI*Ne(50),100*Ne(50),"average",!1);var Ae=new K({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:rt,fromBase:t=>$e(t),toBase:t=>function(t,e){let[r,n,o]=t,a=[],s=0;if(0===o)return[0,0,0];let i=Ne(o);s=o>0?.00379058511492914*o**2+.608983189401032*o+.9155088574762233:9514440756550361e-21*o**2+.08693057439788597*o-21.928975842194614;let c=0,l=1/0;for(;c<=15;){a=_e({J:s,C:n,h:r},e);const t=Math.abs(a[1]-i);if(t<l){if(t<=2e-12)return a;l=t}s-=(a[1]-i)*s/(2*a[1]),c+=1}return _e({J:s,C:n,h:r},e)}(t,Ee),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const Re=Math.PI/180,Se=[1,.007,.0228];function Be(t){t[1]<0&&(t=Ae.fromBase(Ae.toBase(t)));const e=Math.log(Math.max(1+Se[2]*t[1]*Ee.flRoot,1))/Se[2],r=t[0]*Re,n=e*Math.cos(r),o=e*Math.sin(r);return[t[2],n,o]}var je={deltaE76:function(t,e){return At(t,e,"lab")},deltaECMC:function(t,e,{l:r=2,c:n=1}={}){[t,e]=Q([t,e]);let[o,a,s]=mt.from(t),[,i,c]=pt.from(mt,[o,a,s]),[l,h,u]=mt.from(e),f=pt.from(mt,[l,h,u])[1];i<0&&(i=0),f<0&&(f=0);let m=o-l,d=i-f,p=(a-h)**2+(s-u)**2-d**2,g=.511;o>=16&&(g=.040975*o/(1+.01765*o));let b,y=.0638*i/(1+.0131*i)+.638;Number.isNaN(c)&&(c=0),b=c>=164&&c<=345?.56+Math.abs(.2*Math.cos((c+168)*Rt)):.36+Math.abs(.4*Math.cos((c+35)*Rt));let M=Math.pow(i,4),w=Math.sqrt(M/(M+1900)),_=(m/(r*g))**2;return _+=(d/(n*y))**2,_+=p/(y*(w*b+1-w))**2,Math.sqrt(_)},deltaE2000:_t,deltaEJz:function(t,e){[t,e]=Q([t,e]);let[r,n,o]=Ut.from(t),[a,s,i]=Ut.from(e),c=r-a,l=n-s;Number.isNaN(o)&&Number.isNaN(i)?(o=0,i=0):Number.isNaN(o)?o=i:Number.isNaN(i)&&(i=o);let h=o-i,u=2*Math.sqrt(n*s)*Math.sin(h/2*(Math.PI/180));return Math.sqrt(c**2+l**2+u**2)},deltaEITP:function(t,e){[t,e]=Q([t,e]);let[r,n,o]=ie.from(t),[a,s,i]=ie.from(e);return 720*Math.sqrt((r-a)**2+.25*(n-s)**2+(o-i)**2)},deltaEOK:Nt,deltaEHCT:function(t,e){[t,e]=Q([t,e]);let[r,n,o]=Be(Ae.from(t)),[a,s,i]=Be(Ae.from(e));return Math.sqrt((r-a)**2+(n-s)**2+(o-i)**2)}};const Fe={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function Pe(t,{method:e=W.gamut_mapping,space:r,deltaEMethod:n="",jnd:o=2,blackWhiteClamp:a={}}={}){if(t=Q(t),C(arguments[1])?r=arguments[1]:r||(r=t.space),$t(t,r=K.get(r),{epsilon:0}))return t;let s;if("css"===e)s=function(t,{space:e}={}){const r=.02,n=1e-4;t=Q(t),e||(e=t.space);e=K.get(e);const o=K.get("oklch");if(e.isUnbounded)return Le(t,e);const a=Le(t,o);let s=a.coords[0];if(s>=1){const r=Le(qe.WHITE,e);return r.alpha=t.alpha,Le(r,e)}if(s<=0){const r=Le(qe.BLACK,e);return r.alpha=t.alpha,Le(r,e)}if($t(a,e,{epsilon:0}))return Le(a,e);function i(t){const r=Le(t,e),n=Object.values(e.coords);return r.coords=r.coords.map((t,e)=>{if("range"in n[e]){const[r,o]=n[e].range;return L(r,t,o)}return t}),r}let c=0,l=a.coords[1],h=!0,u=Et(a),f=i(u),m=Nt(f,u);if(m<r)return f;for(;l-c>n;){const t=(c+l)/2;if(u.coords[1]=t,h&&$t(u,e,{epsilon:0}))c=t;else if(f=i(u),m=Nt(f,u),m<r){if(r-m<n)break;h=!1,c=t}else l=t}return f}(t,{space:r});else{if("clip"===e||$t(t,r))s=Le(t,r);else{Object.prototype.hasOwnProperty.call(Fe,e)&&({method:e,jnd:o,deltaEMethod:n,blackWhiteClamp:a}=Fe[e]);let i=_t;if(""!==n)for(let t in je)if("deltae"+n.toLowerCase()===t.toLowerCase()){i=je[t];break}let c=Pe(Le(t,r),{method:"clip",space:r});if(i(t,c)>o){if(3===Object.keys(a).length){let e=K.resolveCoord(a.channel),r=at(Le(t,e.space),e.id);if($(r)&&(r=0),r>=a.max)return Le({space:"xyz-d65",coords:Y.D65},t.space);if(r<=a.min)return Le({space:"xyz-d65",coords:[0,0,0]},t.space)}let n=K.resolveCoord(e),c=n.space,l=n.id,h=Le(t,c);h.coords.forEach((t,e)=>{$(t)&&(h.coords[e]=0)});let u=(n.range||n.refRange)[0],f=function(t){const e=t?Math.floor(Math.log10(Math.abs(t))):0;return Math.max(parseFloat("1e"+(e-2)),1e-6)}(o),m=u,d=at(h,l);for(;d-m>f;){let t=Et(h);t=Pe(t,{space:r,method:"clip"}),i(h,t)-o<f?m=at(h,l):d=at(h,l),it(h,l,(m+d)/2)}s=Le(h,r)}else s=c}if("clip"===e||!$t(s,r,{epsilon:0})){let t=Object.values(r.coords).map(t=>t.range||[]);s.coords=s.coords.map((e,r)=>{let[n,o]=t[r];return void 0!==n&&(e=Math.max(n,e)),void 0!==o&&(e=Math.min(e,o)),e})}}return r!==t.space&&(s=Le(s,t.space)),t.coords=s.coords,t}Pe.returns="color";const qe={WHITE:{space:kt,coords:[1,0,0]},BLACK:{space:kt,coords:[0,0,0]}};function Le(t,e,{inGamut:r}={}){t=Q(t);let n=(e=K.get(e)).from(t),o={space:e,coords:n,alpha:t.alpha};return r&&(o=Pe(o,!0===r?void 0:r)),o}function Oe(t,{precision:e=W.precision,format:r="default",inGamut:n=!0,...o}={}){var a;let s,i=r;r=(t=Q(t)).space.getFormat(r)??t.space.getFormat("default")??K.DEFAULT_FORMAT;let c=t.coords.slice();if(n||=r.toGamut,n&&!$t(t)&&(c=Pe(Et(t),!0===n?void 0:n).coords),"custom"===r.type){if(o.precision=e,!r.serialize)throw new TypeError(`format ${i} can only be used to parse colors, not for serialization`);s=r.serialize(c,t.alpha,o)}else{let n=r.name||"color";r.serializeCoords?c=r.serializeCoords(c,e):null!==e&&(c=c.map(t=>N(t,{precision:e})));let o=[...c];if("color"===n){let e=r.id||(null==(a=r.ids)?void 0:a[0])||t.space.id;o.unshift(e)}let i=t.alpha;null!==e&&(i=N(i,{precision:e}));let l=t.alpha>=1||r.noAlpha?"":`${r.commas?",":" /"} ${i}`;s=`${n}(${o.join(r.commas?", ":" ")}${l})`}return s}Le.returns="color";var De=new nt({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]]});const ze=1.09929682680944,Ge=.018053968510807;var Te=new nt({id:"rec2020",name:"REC.2020",base:De,toBase:t=>t.map(function(t){return t<4.5*Ge?t/4.5:Math.pow((t+ze-1)/ze,1/.45)}),fromBase:t=>t.map(function(t){return t>=Ge?ze*Math.pow(t,.45)-(ze-1):4.5*t})});var He=new nt({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]});const We=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Ye=new nt({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:We}),Xe={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Ze=Array(3).fill("<percentage> | <number>[0, 255]"),Ue=Array(3).fill("<number>[0, 255]");var Ve=new nt({id:"srgb",name:"sRGB",base:Ye,fromBase:t=>t.map(t=>{let e=t<0?-1:1,r=t*e;return r>.0031308?e*(1.055*r**(1/2.4)-.055):12.92*t}),toBase:t=>t.map(t=>{let e=t<0?-1:1,r=t*e;return r<=.04045?t/12.92:e*((r+.055)/1.055)**2.4}),formats:{rgb:{coords:Ze},rgb_number:{name:"rgb",commas:!0,coords:Ue,noAlpha:!0},color:{},rgba:{coords:Ze,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Ue},hex:{type:"custom",toGamut:!0,test:t=>/^#([a-f0-9]{3,4}){1,2}$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,t=>{e.push(parseInt(t,16)/255)}),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:r=!0}={})=>{e<1&&t.push(e),t=t.map(t=>Math.round(255*t));let n=r&&t.every(t=>t%17==0);return"#"+t.map(t=>n?(t/17).toString(16):t.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){let e={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(t=t.toLowerCase())?(e.coords=Xe.black,e.alpha=0):e.coords=Xe[t],e.coords)return e}}}}),Je=new nt({id:"p3",cssId:"display-p3",name:"P3",base:He,fromBase:Ve.fromBase,toBase:Ve.toBase});let Qe;if(W.display_space=Ve,"undefined"!=typeof CSS&&CSS.supports)for(let Yn of[mt,Te,Je]){let t=Yn.getMinCoords(),e=Oe({space:Yn,coords:t,alpha:1});if(CSS.supports("color",e)){W.display_space=Yn;break}}function Ke(t){return at(t,[rt,"y"])}function tr(t,e){it(t,[rt,"y"],e)}var er=Object.freeze({__proto__:null,getLuminance:Ke,register:function(t){Object.defineProperty(t.prototype,"luminance",{get(){return Ke(this)},set(t){tr(this,t)}})},setLuminance:tr});function rr(t){return t>=.022?t:t+(.022-t)**1.414}function nr(t){let e=t<0?-1:1,r=Math.abs(t);return e*Math.pow(r,2.4)}const or=216/24389,ar=24/116,sr=24389/27;let ir=Y.D65;var cr=new K({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:ir,base:rt,fromBase(t){let e=t.map((t,e)=>t/ir[e]).map(t=>t>or?Math.cbrt(t):(sr*t+16)/116);return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>ar?Math.pow(e[0],3):(116*e[0]-16)/sr,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/sr,e[2]>ar?Math.pow(e[2],3):(116*e[2]-16)/sr].map((t,e)=>t*ir[e])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});const lr=.5*Math.pow(5,.5)+.5;var hr=Object.freeze({__proto__:null,contrastAPCA:function(t,e){let r,n,o,a,s,i;e=Q(e),t=Q(t),e=Le(e,"srgb"),[a,s,i]=e.coords;let c=.2126729*nr(a)+.7151522*nr(s)+.072175*nr(i);t=Le(t,"srgb"),[a,s,i]=t.coords;let l=.2126729*nr(a)+.7151522*nr(s)+.072175*nr(i),h=rr(c),u=rr(l),f=u>h;return Math.abs(u-h)<5e-4?n=0:f?(r=u**.56-h**.57,n=1.14*r):(r=u**.65-h**.62,n=1.14*r),o=Math.abs(n)<.1?0:n>0?n-.027:n+.027,100*o},contrastDeltaPhi:function(t,e){t=Q(t),e=Q(e);let r=at(t,[cr,"l"]),n=at(e,[cr,"l"]),o=Math.abs(Math.pow(r,lr)-Math.pow(n,lr)),a=Math.pow(o,1/lr)*Math.SQRT2-40;return a<7.5?0:a},contrastLstar:function(t,e){t=Q(t),e=Q(e);let r=at(t,[mt,"l"]),n=at(e,[mt,"l"]);return Math.abs(r-n)},contrastMichelson:function(t,e){t=Q(t),e=Q(e);let r=Math.max(Ke(t),0),n=Math.max(Ke(e),0);n>r&&([r,n]=[n,r]);let o=r+n;return 0===o?0:(r-n)/o},contrastWCAG21:function(t,e){t=Q(t),e=Q(e);let r=Math.max(Ke(t),0),n=Math.max(Ke(e),0);return n>r&&([r,n]=[n,r]),(r+.05)/(n+.05)},contrastWeber:function(t,e){t=Q(t),e=Q(e);let r=Math.max(Ke(t),0),n=Math.max(Ke(e),0);return n>r&&([r,n]=[n,r]),0===n?5e4:(r-n)/n}});function ur(t){let[e,r,n]=ot(t,rt),o=e+15*r+3*n;return[4*e/o,9*r/o]}function fr(t){let[e,r,n]=ot(t,rt),o=e+r+n;return[e/o,r/o]}var mr=Object.freeze({__proto__:null,register:function(t){Object.defineProperty(t.prototype,"uv",{get(){return ur(this)}}),Object.defineProperty(t.prototype,"xy",{get(){return fr(this)}})},uv:ur,xy:fr});function dr(t,e,r={}){C(r)&&(r={method:r});let{method:n=W.deltaE,...o}=r;for(let a in je)if("deltae"+n.toLowerCase()===a.toLowerCase())return je[a](t,e,o);throw new TypeError(`Unknown deltaE method: ${n}`)}var pr=Object.freeze({__proto__:null,darken:function(t,e=.25){return it(t,[K.get("oklch","lch"),"l"],t=>t*(1-e))},lighten:function(t,e=.25){return it(t,[K.get("oklch","lch"),"l"],t=>t*(1+e))}});function gr(t,e,r=.5,n={}){return[t,e]=[Q(t),Q(e)],"object"===k(r)&&([r,n]=[.5,r]),yr(t,e,n)(r)}function br(t,e,r={}){let n;Mr(t)&&([n,r]=[t,e],[t,e]=n.rangeArgs.colors);let{maxDeltaE:o,deltaEMethod:a,steps:s=2,maxSteps:i=1e3,...c}=r;n||([t,e]=[Q(t),Q(e)],n=yr(t,e,c));let l=dr(t,e),h=o>0?Math.max(s,Math.ceil(l/o)+1):s,u=[];if(void 0!==i&&(h=Math.min(h,i)),1===h)u=[{p:.5,color:n(.5)}];else{let t=1/(h-1);u=Array.from({length:h},(e,r)=>{let o=r*t;return{p:o,color:n(o)}})}if(o>0){let t=u.reduce((t,e,r)=>{if(0===r)return 0;let n=dr(e.color,u[r-1].color,a);return Math.max(t,n)},0);for(;t>o;){t=0;for(let e=1;e<u.length&&u.length<i;e++){let r=u[e-1],o=u[e],a=(o.p+r.p)/2,s=n(a);t=Math.max(t,dr(s,r.color),dr(s,o.color)),u.splice(e,0,{p:a,color:n(a)}),e++}}}return u=u.map(t=>t.color),u}function yr(t,e,r={}){if(Mr(t)){let[r,n]=[t,e];return yr(...r.rangeArgs.colors,{...r.rangeArgs.options,...n})}let{space:n,outputSpace:o,progression:a,premultiplied:s}=r;t=Q(t),e=Q(e),t=Et(t),e=Et(e);let i={colors:[t,e],options:r};if(n=n?K.get(n):K.registry[W.interpolationSpace]||t.space,o=o?K.get(o):n,t=Le(t,n),e=Le(e,n),t=Pe(t),e=Pe(e),n.coords.h&&"angle"===n.coords.h.type){let o=r.hue=r.hue||"shorter",a=[n,"h"],[s,i]=[at(t,a),at(e,a)];isNaN(s)&&!isNaN(i)?s=i:isNaN(i)&&!isNaN(s)&&(i=s),[s,i]=function(t,e){if("raw"===t)return e;let[r,n]=e.map(dt),o=n-r;return"increasing"===t?o<0&&(n+=360):"decreasing"===t?o>0&&(r+=360):"longer"===t?-180<o&&o<180&&(o>0?r+=360:n+=360):"shorter"===t&&(o>180?r+=360:o<-180&&(n+=360)),[r,n]}(o,[s,i]),it(t,a,s),it(e,a,i)}return s&&(t.coords=t.coords.map(e=>e*t.alpha),e.coords=e.coords.map(t=>t*e.alpha)),Object.assign(r=>{r=a?a(r):r;let i=t.coords.map((t,n)=>j(t,e.coords[n],r)),c=j(t.alpha,e.alpha,r),l={space:n,coords:i,alpha:c};return s&&(l.coords=l.coords.map(t=>t/c)),o!==n&&(l=Le(l,o)),l},{rangeArgs:i})}function Mr(t){return"function"===k(t)&&!!t.rangeArgs}W.interpolationSpace="lab";var wr=Object.freeze({__proto__:null,isRange:Mr,mix:gr,range:yr,register:function(t){t.defineFunction("mix",gr,{returns:"color"}),t.defineFunction("range",yr,{returns:"function<color>"}),t.defineFunction("steps",br,{returns:"array<color>"})},steps:br}),_r=new K({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Ve,fromBase:t=>{let e=Math.max(...t),r=Math.min(...t),[n,o,a]=t,[s,i,c]=[NaN,0,(r+e)/2],l=e-r;if(0!==l){switch(i=0===c||1===c?0:(e-c)/Math.min(c,1-c),e){case n:s=(o-a)/l+(o<a?6:0);break;case o:s=(a-n)/l+2;break;case a:s=(n-o)/l+4}s*=60}return i<0&&(s+=180,i=Math.abs(i)),s>=360&&(s-=360),[s,100*i,100*c]},toBase:t=>{let[e,r,n]=t;function o(t){let o=(t+e/30)%12,a=r*Math.min(n,1-n);return n-a*Math.max(-1,Math.min(o-3,9-o,1))}return e%=360,e<0&&(e+=360),r/=100,n/=100,[o(0),o(8),o(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),vr=new K({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:_r,fromBase(t){let[e,r,n]=t;r/=100,n/=100;let o=n+r*Math.min(n,1-n);return[e,0===o?0:200*(1-n/o),100*o]},toBase(t){let[e,r,n]=t;r/=100,n/=100;let o=n*(1-r/2);return[e,0===o||1===o?0:(n-o)/Math.min(o,1-o)*100,100*o]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),Ir=new K({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:vr,fromBase(t){let[e,r,n]=t;return[e,n*(100-r)/100,100-n]},toBase(t){let[e,r,n]=t;r/=100,n/=100;let o=r+n;if(o>=1){return[e,0,100*(r/o)]}let a=1-n;return[e,100*(0===a?0:1-r/a),100*a]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});var xr=new nt({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),Cr=new nt({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:xr,toBase:t=>t.map(t=>Math.pow(Math.abs(t),563/256)*Math.sign(t)),fromBase:t=>t.map(t=>Math.pow(Math.abs(t),256/563)*Math.sign(t))});var kr=new nt({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:ct,toXYZ_M:[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],fromXYZ_M:[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]]});const Nr=1/512;var $r=new nt({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:kr,toBase:t=>t.map(t=>t<.03125?t/16:t**1.8),fromBase:t=>t.map(t=>t>=Nr?t**(1/1.8):16*t)}),Er=new K({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:kt,fromBase(t){let e,[r,n,o]=t;const a=2e-4;return e=Math.abs(n)<a&&Math.abs(o)<a?NaN:180*Math.atan2(o,n)/Math.PI,[r,Math.sqrt(n**2+o**2),dt(e)]},toBase(t){let e,r,[n,o,a]=t;return isNaN(a)?(e=0,r=0):(e=o*Math.cos(a*Math.PI/180),r=o*Math.sin(a*Math.PI/180)),[n,e,r]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});let Ar=Y.D65;const Rr=216/24389,Sr=24389/27,[Br,jr]=ur({space:rt,coords:Ar});var Fr=new K({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Ar,base:rt,fromBase(t){let e=[E(t[0]),E(t[1]),E(t[2])],r=e[1],[n,o]=ur({space:rt,coords:e});if(!Number.isFinite(n)||!Number.isFinite(o))return[0,0,0];let a=r<=Rr?Sr*r:116*Math.cbrt(r)-16;return[a,13*a*(n-Br),13*a*(o-jr)]},toBase(t){let[e,r,n]=t;if(0===e||$(e))return[0,0,0];r=E(r),n=E(n);let o=r/(13*e)+Br,a=n/(13*e)+jr,s=e<=8?e/Sr:Math.pow((e+16)/116,3);return[s*(9*o/(4*a)),s,s*((12-3*o-20*a)/(4*a))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Pr=new K({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Fr,fromBase(t){let e,[r,n,o]=t;return e=Math.abs(n)<.02&&Math.abs(o)<.02?NaN:180*Math.atan2(o,n)/Math.PI,[r,Math.sqrt(n**2+o**2),dt(e)]},toBase(t){let[e,r,n]=t;return r<0&&(r=0),isNaN(n)&&(n=0),[e,r*Math.cos(n*Math.PI/180),r*Math.sin(n*Math.PI/180)]},formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const qr=216/24389,Lr=24389/27,Or=We[0][0],Dr=We[0][1],zr=We[0][2],Gr=We[1][0],Tr=We[1][1],Hr=We[1][2],Wr=We[2][0],Yr=We[2][1],Xr=We[2][2];function Zr(t,e,r){const n=e/(Math.sin(r)-t*Math.cos(r));return n<0?1/0:n}function Ur(t){const e=Math.pow(t+16,3)/1560896,r=e>qr?e:t/Lr,n=r*(284517*Or-94839*zr),o=r*(838422*zr+769860*Dr+731718*Or),a=r*(632260*zr-126452*Dr),s=r*(284517*Gr-94839*Hr),i=r*(838422*Hr+769860*Tr+731718*Gr),c=r*(632260*Hr-126452*Tr),l=r*(284517*Wr-94839*Xr),h=r*(838422*Xr+769860*Yr+731718*Wr),u=r*(632260*Xr-126452*Yr);return{r0s:n/a,r0i:o*t/a,r1s:n/(a+126452),r1i:(o-769860)*t/(a+126452),g0s:s/c,g0i:i*t/c,g1s:s/(c+126452),g1i:(i-769860)*t/(c+126452),b0s:l/u,b0i:h*t/u,b1s:l/(u+126452),b1i:(h-769860)*t/(u+126452)}}function Vr(t,e){const r=e/360*Math.PI*2,n=Zr(t.r0s,t.r0i,r),o=Zr(t.r1s,t.r1i,r),a=Zr(t.g0s,t.g0i,r),s=Zr(t.g1s,t.g1i,r),i=Zr(t.b0s,t.b0i,r),c=Zr(t.b1s,t.b1i,r);return Math.min(n,o,a,s,i,c)}var Jr=new K({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Pr,gamutSpace:Ve,fromBase(t){let e,[r,n,o]=[E(t[0]),E(t[1]),E(t[2])];if(r>99.9999999)e=0,r=100;else if(r<1e-8)e=0,r=0;else{e=n/Vr(Ur(r),o)*100}return[o,e,r]},toBase(t){let e,[r,n,o]=[E(t[0]),E(t[1]),E(t[2])];if(o>99.9999999)o=100,e=0;else if(o<1e-8)o=0,e=0;else{e=Vr(Ur(o),r)/100*n}return[o,e,r]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});function Qr(t,e){return Math.abs(e)/Math.sqrt(Math.pow(t,2)+1)}function Kr(t){let e=Qr(t.r0s,t.r0i),r=Qr(t.r1s,t.r1i),n=Qr(t.g0s,t.g0i),o=Qr(t.g1s,t.g1i),a=Qr(t.b0s,t.b0i),s=Qr(t.b1s,t.b1i);return Math.min(e,r,n,o,a,s)}We[0][0],We[0][1],We[0][2],We[1][0],We[1][1],We[1][2],We[2][0],We[2][1],We[2][2];var tn=new K({id:"hpluv",name:"HPLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Pr,gamutSpace:"self",fromBase(t){let e,[r,n,o]=[E(t[0]),E(t[1]),E(t[2])];if(r>99.9999999)e=0,r=100;else if(r<1e-8)e=0,r=0;else{e=n/Kr(Ur(r))*100}return[o,e,r]},toBase(t){let e,[r,n,o]=[E(t[0]),E(t[1]),E(t[2])];if(o>99.9999999)o=100,e=0;else if(o<1e-8)o=0,e=0;else{e=Kr(Ur(o))/100*n}return[o,e,r]},formats:{color:{id:"--hpluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const en=2610/16384,rn=16384/2610,nn=32/2523,on=.8359375,an=2413/128,sn=18.6875;var cn=new nt({id:"rec2100pq",cssId:"rec2100-pq",name:"REC.2100-PQ",base:De,toBase:t=>t.map(function(t){return 1e4*(Math.max(t**nn-on,0)/(an-sn*t**nn))**rn/203}),fromBase:t=>t.map(function(t){let e=Math.max(203*t/1e4,0);return((on+an*e**en)/(1+sn*e**en))**78.84375})});const ln=.17883277,hn=.28466892,un=.55991073,fn=3.7743;var mn=new nt({id:"rec2100hlg",cssId:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:De,toBase:t=>t.map(function(t){return t<=.5?t**2/3*fn:(Math.exp((t-un)/ln)+hn)/12*fn}),fromBase:t=>t.map(function(t){return(t/=fn)<=1/12?Math.sqrt(3*t):ln*Math.log(12*t-hn)+un})});const dn={};function pn({id:t,toCone_M:e,fromCone_M:r}){dn[t]=arguments[0]}function gn(t,e,r="Bradford"){let n=dn[r],[o,a,s]=x(n.toCone_M,t),[i,c,l]=x(n.toCone_M,e),h=x([[i/o,0,0],[0,c/a,0],[0,0,l/s]],n.toCone_M);return x(n.fromCone_M,h)}H.add("chromatic-adaptation-start",t=>{t.options.method&&(t.M=gn(t.W1,t.W2,t.options.method))}),H.add("chromatic-adaptation-end",t=>{t.M||(t.M=gn(t.W1,t.W2,t.options.method))}),pn({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599363874558397,-1.1293816185800916,.21989740959619328],[.3611914362417676,.6388124632850422,-6370596838649899e-21],[0,0,1.0890636230968613]]}),pn({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929054667121,-.14705425642099013,.15996265166373122],[.4323052697233945,.5183602715367774,.049291228212855594],[-.00852866457517732,.04004282165408486,.96848669578755]]}),pn({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238208355142,-.27886900021828726,.18274517938277307],[.4543690419753592,.4735331543074117,.07209780371722911],[-.009627608738429355,-.00569803121611342,1.0153256399545427]]}),pn({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.0112546305316845,.14918677544445172],[.3875265432361372,.6214474419314753,-.008973985167612521],[-.01584149884933386,-.03412293802851557,1.0499644368778496]]}),Object.assign(Y,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]}),Y.ACES=[.32168/.33767,1,.34065/.33767];var bn=new nt({id:"acescg",cssId:"--acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:Y.ACES,toXYZ_M:[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],fromXYZ_M:[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]]});const yn=2**-16,Mn=-.35828683,wn=(Math.log2(65504)+9.72)/17.52;var _n=new nt({id:"acescc",cssId:"--acescc",name:"ACEScc",coords:{r:{range:[Mn,wn],name:"Red"},g:{range:[Mn,wn],name:"Green"},b:{range:[Mn,wn],name:"Blue"}},referred:"scene",base:bn,toBase:t=>t.map(function(t){return t<=-.3013698630136986?2*(2**(17.52*t-9.72)-yn):t<wn?2**(17.52*t-9.72):65504}),fromBase:t=>t.map(function(t){return t<=0?(Math.log2(yn)+9.72)/17.52:t<yn?(Math.log2(yn+.5*t)+9.72)/17.52:(Math.log2(t)+9.72)/17.52})}),vn=Object.freeze({__proto__:null,A98RGB:Cr,A98RGB_Linear:xr,ACEScc:_n,ACEScg:bn,CAM16_JMh:Ie,HCT:Ae,HPLuv:tn,HSL:_r,HSLuv:Jr,HSV:vr,HWB:Ir,ICTCP:ie,JzCzHz:Ut,Jzazbz:Zt,LCH:pt,LCHuv:Pr,Lab:mt,Lab_D65:cr,Luv:Fr,OKLCH:Er,OKLab:kt,P3:Je,P3_Linear:He,ProPhoto:$r,ProPhoto_Linear:kr,REC_2020:Te,REC_2020_Linear:De,REC_2100_HLG:mn,REC_2100_PQ:cn,XYZ_ABS_D65:St,XYZ_D50:ct,XYZ_D65:rt,sRGB:Ve,sRGB_Linear:Ye});class In{constructor(...t){let e,r,n,o;1===t.length&&(e=Q(t[0])),e?(r=e.space||e.spaceId,n=e.coords,o=e.alpha):[r,n,o]=t,Object.defineProperty(this,"space",{value:K.get(r),writable:!1,enumerable:!0,configurable:!0}),this.coords=n?n.slice():[0,0,0],this.alpha=o>1||void 0===o?1:o<0?0:o;for(let a=0;a<this.coords.length;a++)"NaN"===this.coords[a]&&(this.coords[a]=NaN);for(let a in this.space.coords)Object.defineProperty(this,a,{get:()=>this.get(a),set:t=>this.set(a,t)})}get spaceId(){return this.space.id}clone(){return new In(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...t){let e=function(t,{space:e=W.display_space,...r}={}){let n=Oe(t,r);if("undefined"==typeof CSS||CSS.supports("color",n)||!W.display_space)n=new String(n),n.color=t;else{let o=t;if((t.coords.some($)||$(t.alpha))&&!(Qe??=CSS.supports("color","hsl(none 50% 50%)"))&&(o=Et(t),o.coords=o.coords.map(E),o.alpha=E(o.alpha),n=Oe(o,r),CSS.supports("color",n)))return n=new String(n),n.color=o,n;o=Le(o,e),n=new String(Oe(o,r)),n.color=o}return n}(this,...t);return e.color=new In(e.color),e}static get(t,...e){return t instanceof In?t:new In(t,...e)}static defineFunction(t,e,r=e){let{instance:n=!0,returns:o}=r,a=function(...t){let r=e(...t);if("color"===o)r=In.get(r);else if("function<color>"===o){let t=r;r=function(...e){let r=t(...e);return In.get(r)},Object.assign(r,t)}else"array<color>"===o&&(r=r.map(t=>In.get(t)));return r};t in In||(In[t]=a),n&&(In.prototype[t]=function(...t){return a(this,...t)})}static defineFunctions(t){for(let e in t)In.defineFunction(e,t[e],t[e])}static extend(t){if(t.register)t.register(In);else for(let e in t)In.defineFunction(e,t[e])}}In.defineFunctions({get:at,getAll:ot,set:it,setAll:st,to:Le,equals:function(t,e){return t=Q(t),e=Q(e),t.space===e.space&&t.alpha===e.alpha&&t.coords.every((t,r)=>t===e.coords[r])},inGamut:$t,toGamut:Pe,distance:At,toString:Oe}),Object.assign(In,{util:T,hooks:H,WHITES:Y,Space:K,spaces:K.registry,parse:J,defaults:W});for(let Yn of Object.keys(vn))K.register(vn[Yn]);for(let Yn in K.registry)xn(Yn,K.registry[Yn]);function xn(t,e){let r=t.replace(/-/g,"_");Object.defineProperty(In.prototype,r,{get(){let r=this.getAll(t);return"undefined"==typeof Proxy?r:new Proxy(r,{has:(t,r)=>{try{return K.resolveCoord([e,r]),!0}catch(n){}return Reflect.has(t,r)},get:(t,r,n)=>{if(r&&"symbol"!=typeof r&&!(r in t)){let{index:n}=K.resolveCoord([e,r]);if(n>=0)return t[n]}return Reflect.get(t,r,n)},set:(r,n,o,a)=>{if(n&&"symbol"!=typeof n&&!(n in r)||n>=0){let{index:a}=K.resolveCoord([e,n]);if(a>=0)return r[a]=o,this.setAll(t,r),!0}return Reflect.set(r,n,o,a)}})},set(e){this.setAll(t,e)},configurable:!0,enumerable:!0})}function Cn(t,e,r,n){const o={};for(const a in t){const s=a;switch(s){case"fill":case"stroke":if(t[s]&&e[s]){const a=t[s],i=e[s];n||"string"==typeof a||"string"==typeof i?o[s]=r<.5?a:i:(o[s]=a.clone(),o[s].r=a.r+(i.r-a.r)*r,o[s].g=a.g+(i.g-a.g)*r,o[s].b=a.b+(i.b-a.b)*r,o[s].alpha=a.alpha+(i.alpha-a.alpha)*r)}break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":"number"==typeof t[s]&&"number"==typeof e[s]&&(o[s]=t[s]+(e[s]-t[s])*r)}}return o}function kn(t){const e={};for(const r in t){const n=r;switch(n){case"fill":case"stroke":if(t[n]){const r=t[n];e[n]="string"==typeof r?r:r.toString()}break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":"number"==typeof t[n]&&(e[n]=t[n].toFixed())}}return e}function Nn(t,e,r,n){const o=[{},{}],a=t=>"string"==typeof t&&t.trim().startsWith("url(#");for(const s in t){const i=s;switch(i){case"fill":case"stroke":t[i]&&(r||a(t[i])?(o[0][i]=t[i],void 0===e[i]&&(o[1][i]=t[i])):(o[0][i]=Sn(n,t[i]),void 0===e[i]&&(o[1][i]=Sn(n,t[i]),o[1][i].alpha=0)));break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":t[i]&&(o[0][i]=t[i],void 0===e[i]&&(o[1][i]=1))}}for(const s in e){const i=s;switch(i){case"fill":case"stroke":e[i]&&(r||a(e[i])?(o[1][i]=e[i],void 0===t[i]&&(o[0][i]=e[i])):(o[1][i]=Sn(n,e[i]),void 0===t[i]&&(o[0][i]=Sn(n,e[i]),o[0][i].alpha=0)));break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":e[i]&&(o[1][i]=e[i],void 0===t[i]&&(o[0][i]=1))}}return o}function $n(t,e,r){const n={};for(const o in t){const a=o;if("rotate"===a)if(t[a]&&e[a]){n[a]=[0,0,0];for(let o=0;o<3;o++){const s=t[a][o],i=e[a][o];isFinite(s)&&isFinite(i)&&isFinite(r)?n[a][o]=s+(i-s)*r:n[a][o]=isFinite(s)?s:0}}}return n}function En(t){let e="";if(t.rotate&&3===t.rotate.length){const[r,n,o]=t.rotate;isFinite(r)&&isFinite(n)&&isFinite(o)?e+="rotate("+t.rotate.join(" ")+")":e+="rotate(0 0 0)"}return e}function An(t,e,r){const n=[];for(let o=0,a=t.length;o<a;o++)if(n.push([t[o][0]]),e[o])for(let s=1,i=t[o].length;s<i;s++){const a=t[o][s],i=e[o]&&void 0!==e[o][s]?e[o][s]:a;n[o].push(a+(i-a)*r)}else for(let e=1,r=t[o].length;e<r;e++)n[o].push(t[o][e]);return n}function Rn(t){if(t instanceof Array){const e=[];for(let r=0,n=t.length;r<n;r++)e[r]=Rn(t[r]);return e}if(t instanceof In)return t.clone();if(t instanceof Object){const e={};for(const r in t)t.hasOwnProperty(r)&&(e[r]=Rn(t[r]));return e}return t}function Sn(t,e){if("CURRENTCOLOR"===e.toUpperCase()){const r=t||window.document.getElementsByTagName("head")[0]||window.document.getElementsByTagName("svg")[0];r.style.color?e="CURRENTCOLOR"===r.style.color.toUpperCase()?window.getComputedStyle(r).getPropertyValue("color"):r.style.color:(r.style.color=e,e=window.getComputedStyle(r).getPropertyValue("color"))}return new In(e).to("srgb")}async function Bn(t,e){for(const[n,o]of Object.entries(t))if(!On(o))try{const e=await fetch(o);if(!e.ok){console.warn(`Failed to load SVG from ${o}`);continue}t[n]=await e.text()}catch(r){console.warn(`Error loading SVG from ${o}:`,r);continue}return jn(t,e)}function jn(t,e){const r=[];for(const[o,a]of Object.entries(t)){if(!On(a)){console.warn(`${a} is not a valid SVG source`);continue}const t=zn(a),e=Gn(a),n=Tn(a).fill;let s=Dn(a);if(n){["path","polygon","rect","circle","ellipse","line","polyline"].forEach(t=>{const e=new RegExp(`<${t}(\\s[^>]*)?>`,"gi");s=s.replace(e,e=>/fill\s*=\s*['"][^'"]*['"]/i.test(e)?e:(e.endsWith("/>"),e.replace(new RegExp(`<${t}(\\s*)`),`<${t}$1 fill="${n}" `)))})}let i=`id="${o}"`;t&&(i+=` data-original-viewbox="${t.original}"`),(Object.keys(e.gradients).length>0||Object.keys(e.patterns).length>0)&&(i+=' data-has-defs="true"');const c=`<g ${i}>${s}</g>`;r.push(c)}const n={xmlns:"http://www.w3.org/2000/svg",style:"display:none;",...e};return`<svg ${Object.entries(n).map(([t,e])=>`${t}="${e}"`).join(" ")}>\n${r.join("\n")}\n</svg>`}function Fn(t,e){const r=jn(t,e),n=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(n)}async function Pn(t,e){const r=await Bn(t,e),n=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(n)}async function qn(t,e){return Bn(t,e)}function Ln(t,e){return jn(t,e)}function On(t){const e=t.trim();return e.startsWith("<?xml")?e.includes("<svg"):!!e.startsWith("<svg")||!!e.startsWith("<!DOCTYPE svg")}function Dn(t){let e=t.trim();e=e.replace(/<\?xml[^?]*\?>\s*/gi,""),e=e.replace(/<!DOCTYPE[^>]*>\s*/gi,""),e=e.replace(/<\?[^?]*\?>\s*/gi,""),e=e.trim();const r=e.match(/<svg[^>]*>([\s\S]*?)<\/svg>/i);if(r&&r[1])return r[1].trim();if(e.startsWith("<svg")){const t=e.indexOf(">");if(-1!==t){const r=e.substring(t+1),n=r.lastIndexOf("</svg>");if(-1!==n)return r.substring(0,n).trim()}}return e}function zn(t){const e=t.match(/<svg[^>]*>/i);if(!e)return null;const r=e[0].match(/viewBox\s*=\s*["']([^"']+)["']/i);if(!r)return null;const n=r[1],o=n.trim().split(/\s+/).map(Number);return 4!==o.length?null:{values:[o[0],o[1],o[2],o[3]],original:n}}function Gn(t){const e={gradients:{},patterns:{},others:{},raw:void 0},r=t.match(/<defs[^>]*>([\s\S]*?)<\/defs>/i);if(!r)return e;e.raw=r[0];const n=r[1],o=n.match(/<linearGradient[^>]*>[\s\S]*?<\/linearGradient>/gi);o&&o.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.gradients[r[1]]=t)});const a=n.match(/<radialGradient[^>]*>[\s\S]*?<\/radialGradient>/gi);a&&a.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.gradients[r[1]]=t)});const s=n.match(/<pattern[^>]*>[\s\S]*?<\/pattern>/gi);s&&s.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.patterns[r[1]]=t)});const i=n.match(/<(?!linearGradient|radialGradient|pattern)[^>]+>[\s\S]*?<\/[^>]+>/gi);return i&&i.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.others[r[1]]=t)}),e}function Tn(t){const e=t.match(/<svg([^>]*)>/i);if(!e)return{};const r={},n=e[1].match(/(\w+)\s*=\s*["']([^"']*)["']/g);return n&&n.forEach(t=>{const[,e,n]=t.match(/(\w+)\s*=\s*["']([^"']*)["']/)||[];e&&n&&(r[e]=n)}),r}H.add("colorspace-init-end",t=>{var e;xn(t.id,t),null==(e=t.aliases)||e.forEach(e=>{xn(e,t)})}),In.extend(je),In.extend({deltaE:dr}),Object.assign(In,{deltaEMethods:je}),In.extend(pr),In.extend({contrast:function(t,e,r={}){C(r)&&(r={algorithm:r});let{algorithm:n,...o}=r;if(!n){let t=Object.keys(hr).map(t=>t.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${t}`)}t=Q(t),e=Q(e);for(let a in hr)if("contrast"+n.toLowerCase()===a.toLowerCase())return hr[a](t,e,o);throw new TypeError(`Unknown contrast algorithm: ${n}`)}}),In.extend(mr),In.extend(er),In.extend(wr),In.extend(hr);class Hn{constructor(t,e,r){if(this._icons={},this._curIconId="",this._toIconId="",this._curIconItems=[],this._fromIconItems=[],this._toIconItems=[],this._morphNodes=[],this._morphG=null,this._svgDoc=null,!t)throw new Error('SVGMorpheus > "element" is required');let n;if("string"==typeof t){const e=document.querySelector(t);if(!e)throw new Error('SVGMorpheus > "element" query is not related to an existing DOM node');n=e}else n=t;if(e&&"object"!=typeof e)throw new Error('SVGMorpheus > "options" parameter must be an object');if(e=e||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus > "callback" parameter must be a function');const o=this;this._icons={},this._defDuration=e.duration||750,this._defEasing=e.easing||"quad-in-out",this._defRotation=e.rotation||"clock",this._defCallback=r||function(){},this._lite=e.lite||!1,this._curIconId=e.iconId||"",this._toIconId="",this._curIconItems=[],this._fromIconItems=[],this._toIconItems=[],this._morphNodes=[],this._morphG=null,this._startTime=void 0,this._duration=this._defDuration,this._easing=this._defEasing,this._rotation=this._defRotation,this._callback=this._defCallback,this._rafid=void 0,this._fnTick=function(t){if(o._startTime||(o._startTime=t),0===o._duration)return;const e=Math.min((t-o._startTime)/o._duration,1);o._updateAnimationProgress(e),e<1?o._rafid=window.requestAnimationFrame(o._fnTick):""!==o._toIconId&&o._animationEnd()},"SVG"===n.nodeName.toUpperCase()?this._svgDoc=n:this._svgDoc=n.getSVGDocument(),this._svgDoc?o._init():n.addEventListener("load",function(){o._svgDoc=n.getSVGDocument(),o._init()},!1)}_init(){if(this._svgDoc){if("SVG"!==this._svgDoc.nodeName.toUpperCase()){const t=this._svgDoc.getElementsByTagName("svg");this._svgDoc=t[0]}if(this._svgDoc){let t="";const e=this._svgDoc.outerHTML,r=zn(e),n=Gn(e),o=Tn(e);for(let s=this._svgDoc.childNodes.length-1;s>=0;s--){const e=this._svgDoc.childNodes[s];if("G"===e.nodeName.toUpperCase()){const a=e,s=a.getAttribute("id");if(s){const i=[];let c=r||void 0,l=n,h=o;const u=a.getAttribute("data-original-viewbox");if(u){const t=u.trim().split(/\s+/).map(Number);4===t.length&&(c={values:[t[0],t[1],t[2],t[3]],original:u})}const f=a.outerHTML,m=Gn(f);l={gradients:{...n.gradients,...m.gradients},patterns:{...n.patterns,...m.patterns},others:{...n.others,...m.others},raw:m.raw||n.raw},h={...o,...Tn(f)};for(let t=0,e=a.childNodes.length;t<e;t++){const e=a.childNodes[t],r={path:"",attrs:{},style:{}};switch(e.nodeName.toUpperCase()){case"PATH":r.path=e.getAttribute("d")||"";break;case"CIRCLE":const t=e,n=parseFloat(t.getAttribute("cx")||"0"),o=parseFloat(t.getAttribute("cy")||"0"),a=parseFloat(t.getAttribute("r")||"0");r.path=`M${n-a},${o}a${a},${a} 0 1,0 ${2*a},0a${a},${a} 0 1,0 -${2*a},0z`;break;case"ELLIPSE":const s=e,i=parseFloat(s.getAttribute("cx")||"0"),c=parseFloat(s.getAttribute("cy")||"0"),l=parseFloat(s.getAttribute("rx")||"0"),h=parseFloat(s.getAttribute("ry")||"0");r.path=`M${i-l},${c}a${l},${h} 0 1,0 ${2*l},0a${l},${h} 0 1,0 -${2*l},0z`;break;case"RECT":const u=e,f=parseFloat(u.getAttribute("x")||"0"),m=parseFloat(u.getAttribute("y")||"0"),d=parseFloat(u.getAttribute("width")||"0"),p=parseFloat(u.getAttribute("height")||"0"),g=parseFloat(u.getAttribute("rx")||"0"),b=parseFloat(u.getAttribute("ry")||"0");r.path=g||b?`M${f+g},${m}l${d-2*g},0a${g},${b} 0 0,1 ${g},${b}l0,${p-2*b}a${g},${b} 0 0,1 -${g},${b}l${2*g-d},0a${g},${b} 0 0,1 -${g},-${b}l0,${2*b-p}a${g},${b} 0 0,1 ${g},-${b}z`:`M${f},${m}l${d},0l0,${p}l-${d},0z`;break;case"POLYGON":const y=(e.getAttribute("points")||"").split(/\s+/);let M="";for(let e=0,r=y.length;e<r;e++)M+=(e?"L":"M")+y[e];r.path=M+"z";break;case"LINE":const w=e,_=parseFloat(w.getAttribute("x1")||"0"),v=parseFloat(w.getAttribute("y1")||"0"),I=parseFloat(w.getAttribute("x2")||"0"),x=parseFloat(w.getAttribute("y2")||"0");r.path=`M${_},${v}L${I},${x}z`}if(""!==r.path){for(let n=0,o=e.attributes.length;n<o;n++){const t=e.attributes[n],o=t.name.toLowerCase();switch(o){case"fill":case"stroke":case"fill-opacity":case"opacity":case"stroke-opacity":case"stroke-width":r.attrs[o]=t.value}}const t=e.style;for(let e=0,n=t.length;e<n;e++){const n=t[e];switch(n){case"fill":case"stroke":case"fill-opacity":case"opacity":case"stroke-opacity":case"stroke-width":r.style[n]=t[e]}}i.push(r)}}if(i.length>0){const t={id:s,items:i,viewBox:c,defs:l,rootAttrs:h};this._icons[s]=t}this._morphG?this._svgDoc.removeChild(e):(t=s,this._morphG=document.createElementNS("http://www.w3.org/2000/svg","g"),this._svgDoc.replaceChild(this._morphG,e))}}}const a=this._curIconId||t;""!==a&&(this._setupAnimation(a),this._updateAnimationProgress(1),this._animationEnd())}}}_setupAnimation(t){var e,r,s,i,c,l,f,m;if(t&&this._icons[t]){let g,b;this._toIconId=t,this._startTime=void 0,this._fromIconItems=Rn(this._curIconItems),this._toIconItems=Rn(this._icons[t].items);const y=this._icons[this._curIconId],M=this._icons[t],_=M.viewBox||(null==y?void 0:y.viewBox)||{values:[0,0,24,24],original:"0 0 24 24"};if(this._svgDoc&&this._svgDoc.setAttribute("viewBox",_.original),y&&y.viewBox&&M.viewBox){const t=d(y.viewBox,_),e=`from_${this._curIconId}_`,r={};y.defs&&(Object.keys(y.defs.gradients).forEach(t=>{r[t]=e+t}),Object.keys(y.defs.patterns).forEach(t=>{r[t]=e+t}),Object.keys(y.defs.others).forEach(t=>{r[t]=e+t})),this._fromIconItems=this._fromIconItems.map(e=>{const a=function(t,e){if(!t||!t.trim())return t;try{return h(o(n(t)).map(t=>{const r=t[0],n=t.slice(1),o=[r];switch(r){case"M":case"L":if(n.length>=2){const[t,r]=p(n[0],n[1],e);o.push(t,r);for(let a=2;a<n.length;a+=2)if(a+1<n.length){const[t,r]=p(n[a],n[a+1],e);o.push(t,r)}}break;case"C":if(n.length>=6)for(let t=0;t<n.length;t+=2)if(t+1<n.length){const[r,a]=p(n[t],n[t+1],e);o.push(r,a)}break;case"Q":if(n.length>=4)for(let t=0;t<n.length;t+=2)if(t+1<n.length){const[r,a]=p(n[t],n[t+1],e);o.push(r,a)}break;case"A":if(n.length>=7){const t=n[0]*e.scaleX,r=n[1]*e.scaleY,[a,s]=p(n[5],n[6],e);o.push(t,r,n[2],n[3],n[4],a,s)}break;case"H":if(n.length>=1){const[t]=p(n[0],0,e);o.push(t)}break;case"V":if(n.length>=1){const[,t]=p(0,n[0],e);o.push(t)}break;case"Z":case"z":break;default:for(let t=0;t<n.length;t+=2)if(t+1<n.length){const[r,a]=p(n[t],n[t+1],e);o.push(r,a)}else o.push(n[t])}return o}))}catch(r){return console.warn("Path transformation failed:",r),t}}(e.path,t),s=w(a,e.attrs,r),i=w(a,e.style,r);return{...e,path:a,attrs:s.attrs,style:i.attrs}})}if(M.defs){const e=`to_${t}_`,r={};Object.keys(M.defs.gradients).forEach(t=>{r[t]=e+t}),Object.keys(M.defs.patterns).forEach(t=>{r[t]=e+t}),Object.keys(M.defs.others).forEach(t=>{r[t]=e+t}),this._toIconItems=this._toIconItems.map(t=>{const e=w(t.path,t.attrs,r),n=w(t.path,t.style,r);return{...t,attrs:e.attrs,style:n.attrs}}),this._injectTransformedDefs(y,M)}for(g=0,b=this._morphNodes.length;g<b;g++){const t=this._morphNodes[g];t.fromIconItemIdx=g,t.toIconItemIdx=g}const v=Math.max(this._fromIconItems.length,this._toIconItems.length);let I;for(g=0;g<v;g++)if(this._fromIconItems[g]||(this._toIconItems[g]?(I=u(a(this._toIconItems[g].path)),this._fromIconItems.push({path:"M"+I.cx+","+I.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,I.cx,I.cy]}})):this._fromIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),this._toIconItems[g]||(this._fromIconItems[g]?(I=u(a(this._fromIconItems[g].path)),this._toIconItems.push({path:"M"+I.cx+","+I.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,I.cx,I.cy]}})):this._toIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),!this._morphNodes[g]&&this._morphG){const t=document.createElementNS("http://www.w3.org/2000/svg","path");this._morphG.appendChild(t),this._morphNodes.push({node:t,fromIconItemIdx:g,toIconItemIdx:g})}for(g=0;g<v;g++){const t=this._fromIconItems[g],n=this._toIconItems[g],o=a(this._fromIconItems[g].path,this._toIconItems[g].path);t.curve=o[0],n.curve=o[1];const h=Nn(this._fromIconItems[g].attrs,this._toIconItems[g].attrs,this._lite,this._svgDoc);t.attrsNorm=h[0],n.attrsNorm=h[1],t.attrs=kn(t.attrsNorm),n.attrs=kn(n.attrsNorm);const d=Nn(this._fromIconItems[g].style,this._toIconItems[g].style,this._lite,this._svgDoc);t.styleNorm=d[0],n.styleNorm=d[1],t.style=kn(t.styleNorm),n.style=kn(n.styleNorm),I=u(n.curve);let p=0,b=0,y=0;for(let e=0;e<this._toIconItems.length;e++)if(this._toIconItems[e].curve){const t=u(this._toIconItems[e].curve);!t||isNaN(t.cx)||isNaN(t.cy)||(p+=t.cx,b+=t.cy,y++)}const M=y>0?{x:p/y,y:b/y}:{x:12,y:12};n.trans={rotate:[0,M.x,M.y]},t.trans?t.trans.rotate&&(t.trans.rotate[0]=0,t.trans.rotate[1]=M.x,t.trans.rotate[2]=M.y):t.trans={rotate:[0,M.x,M.y]};let w,_=this._rotation;switch("random"===_&&(_=Math.random()<.5?"counterclock":"clock"),_){case"none":(null==(e=t.trans)?void 0:e.rotate)&&(null==(r=n.trans)?void 0:r.rotate)&&(n.trans.rotate[0]=t.trans.rotate[0]);break;case"counterclock":(null==(s=t.trans)?void 0:s.rotate)&&(null==(i=n.trans)?void 0:i.rotate)?(n.trans.rotate[0]=t.trans.rotate[0]-360,w=-t.trans.rotate[0]%360,n.trans.rotate[0]+=w<180?w:w-360):(null==(c=n.trans)?void 0:c.rotate)&&(n.trans.rotate[0]=-360);break;default:(null==(l=t.trans)?void 0:l.rotate)&&(null==(f=n.trans)?void 0:f.rotate)?(n.trans.rotate[0]=t.trans.rotate[0]+360,w=t.trans.rotate[0]%360,n.trans.rotate[0]+=w<180?-w:360-w):(null==(m=n.trans)?void 0:m.rotate)&&(n.trans.rotate[0]=360)}}this._curIconItems=Rn(this._fromIconItems)}}_updateAnimationProgress(t){let e,r,n,o;for(t=I[this._easing](t),e=0,o=this._curIconItems.length;e<o;e++)this._fromIconItems[e].curve&&this._toIconItems[e].curve&&(this._curIconItems[e].curve=An(this._fromIconItems[e].curve,this._toIconItems[e].curve,t),this._curIconItems[e].path=h(this._curIconItems[e].curve)),this._fromIconItems[e].attrsNorm&&this._toIconItems[e].attrsNorm&&(this._curIconItems[e].attrsNorm=Cn(this._fromIconItems[e].attrsNorm,this._toIconItems[e].attrsNorm,t,this._lite),this._curIconItems[e].attrs=kn(this._curIconItems[e].attrsNorm)),this._fromIconItems[e].styleNorm&&this._toIconItems[e].styleNorm&&(this._curIconItems[e].styleNorm=Cn(this._fromIconItems[e].styleNorm,this._toIconItems[e].styleNorm,t,this._lite),this._curIconItems[e].style=kn(this._curIconItems[e].styleNorm)),this._fromIconItems[e].trans&&this._toIconItems[e].trans&&(this._curIconItems[e].trans=$n(this._fromIconItems[e].trans,this._toIconItems[e].trans,t),this._curIconItems[e].transStr=En(this._curIconItems[e].trans));for(e=0,o=this._morphNodes.length;e<o;e++){const t=this._morphNodes[e];t.node.setAttribute("d",this._curIconItems[e].path);const o=this._curIconItems[e].attrs;for(r in o)t.node.setAttribute(r,o[r]);const a=this._curIconItems[e].style;for(n in a)t.node.style[n]=a[n];t.node.setAttribute("transform",this._curIconItems[e].transStr||"")}}_animationEnd(){for(let t=this._morphNodes.length-1;t>=0;t--){const e=this._morphNodes[t];if(this._toIconItems[t]){e.node.setAttribute("d",this._toIconItems[t].path);const r=this._toIconItems[t].attrs;for(const t in r)e.node.setAttribute(t,r[t]);const n=this._toIconItems[t].style;for(const t in n)e.node.style[t]=n[t];const o=this._toIconItems[t].transStr||"";e.node.setAttribute("transform",o)}else e.node.parentNode&&e.node.parentNode.removeChild(e.node),this._morphNodes.splice(t,1)}this._curIconId=this._toIconId,this._toIconId="",this._callback()}to(t,e,r){if(t!==this._toIconId){if(e&&"object"!=typeof e)throw new Error('SVGMorpheus.to() > "options" parameter must be an object');if(e=e||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus.to() > "callback" parameter must be a function');this._rafid&&window.cancelAnimationFrame(this._rafid),this._duration=e.duration??this._defDuration,this._easing=e.easing||this._defEasing,this._rotation=e.rotation||this._defRotation,this._callback=r||this._defCallback,this._setupAnimation(t),0===this._duration?(this._updateAnimationProgress(1),this._animationEnd()):this._rafid=window.requestAnimationFrame(this._fnTick)}}currIconId(){return this._curIconId}registerEasing(t,e){if(t in I)throw new Error(`Easing function with name '${t}' already exists.`);I[t]=e}_injectTransformedDefs(t,e){if(!this._svgDoc)return;let r=this._svgDoc.querySelector("defs");if(r||(r=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._svgDoc.insertBefore(r,this._svgDoc.firstChild)),t&&t.defs&&t.viewBox){const n=`from_${this._curIconId}_`,o=e.viewBox||{values:[0,0,24,24]},a=d(t.viewBox,o),s=g(t.defs,n,a);this._insertDefsContent(r,s)}if(e.defs){const t=`to_${e.id}_`,n=g(e.defs,t);this._insertDefsContent(r,n)}}_insertDefsContent(t,e){const r=new DOMParser;Object.values(e.gradients).forEach(e=>{try{const n=`<svg xmlns="http://www.w3.org/2000/svg">${e}</svg>`,o=r.parseFromString(n,"image/svg+xml").documentElement.firstElementChild;if(o){const e=document.importNode(o,!0);t.appendChild(e)}}catch(n){console.warn("Failed to parse gradient:",e,n)}}),Object.values(e.patterns).forEach(e=>{try{const n=`<svg xmlns="http://www.w3.org/2000/svg">${e}</svg>`,o=r.parseFromString(n,"image/svg+xml").documentElement.firstElementChild;if(o){const e=document.importNode(o,!0);t.appendChild(e)}}catch(n){console.warn("Failed to parse pattern:",e,n)}}),Object.values(e.others).forEach(e=>{try{const n=`<svg xmlns="http://www.w3.org/2000/svg">${e}</svg>`,o=r.parseFromString(n,"image/svg+xml").documentElement.firstElementChild;if(o){const e=document.importNode(o,!0);t.appendChild(e)}}catch(n){console.warn("Failed to parse other def:",e,n)}})}}const Wn=["clock","counterclock","none","random"];export{Hn as SVGMorpheus,Pn as bundleSvgs,qn as bundleSvgsString,Ln as bundleSvgsStringSync,Fn as bundleSvgsSync,Rn as clone,An as curveCalc,u as curvePathBBox,Hn as default,I as easings,n as parsePathString,a as path2curve,h as path2string,o as pathToAbsolute,Wn as rotations,Cn as styleNormCalc,kn as styleNormToString,Nn as styleToNorm,En as trans2string,$n as transCalc};
