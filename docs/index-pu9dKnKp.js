const e="\t\n\v\f\r   ᠎             　\u2028\u2029",t=new RegExp("([a-z])["+e+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+e+"]*,?["+e+"]*)+)","ig"),r=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+e+"]*,?["+e+"]*","ig");function n(e){if(!e)return null;if(Array.isArray(e))return e;{const n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];return String(e).replace(t,function(e,t,o){const s=[];let i=t.toLowerCase();if(o.replace(r,function(e,t){return t&&s.push(+t),""}),"m"===i&&s.length>2&&(a.push([t.charCodeAt(0)].concat(s.splice(0,2))),i="l",t="m"===t?"l":"L"),"o"===i&&1===s.length&&a.push([t.charCodeAt(0),s[0]]),"r"===i)a.push([t.charCodeAt(0)].concat(s));else for(;s.length>=n[i]&&(a.push([t.charCodeAt(0)].concat(s.splice(0,n[i]))),n[i]););return""}),a}}function a(e){const t=n(e);if(!t||!t.length)return[["M",0,0]];const r=[];let a=0,o=0,s=0,i=0,c=0;77===t[0][0]&&(a=+t[0][1],o=+t[0][2],s=a,i=o,c++,r[0]=["M",a,o]);for(let n=c,l=t.length;n<l;n++){const e=[],c=t[n],l=c[0],h=String.fromCharCode(l);if(h!==h.toUpperCase())switch(e[0]=h.toUpperCase(),e[0]){case"A":e[1]=c[1],e[2]=c[2],e[3]=c[3],e[4]=c[4],e[5]=c[5],e[6]=+c[6]+a,e[7]=+c[7]+o;break;case"V":e[1]=+c[1]+o;break;case"H":e[1]=+c[1]+a;break;case"M":s=+c[1]+a,i=+c[2]+o;default:for(let t=1,r=c.length;t<r;t++)e[t]=+c[t]+(t%2?a:o)}else{e[0]=h;for(let t=1,r=c.length;t<r;t++)e[t]=c[t]}switch(e[0]){case"Z":a=s,o=i;break;case"H":a=e[1];break;case"V":o=e[1];break;case"M":s=e[1],i=e[2],a=e[1],o=e[2];break;default:a=e[e.length-2],o=e[e.length-1]}r.push(e)}return r}function o(e,t){const r=a(e),n=t&&a(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(e,t,r){let n,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(c.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==r||"S"==r?(n=2*t.x-t.bx,a=2*t.y-t.by):(n=t.x,a=t.y),e=["C",n,a].concat(e.slice(1));break;case"T":"Q"==r||"T"==r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(i(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(i(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(s(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(s(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(s(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(s(t.x,t.y,t.X,t.Y))}return e},u=function(e,t){if(e[t].length>7){e[t].shift();const r=e[t];for(;r.length;)m[t]="A",n&&(p[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1)}},f=function(e,t,r,n,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[a][1],r.y=e[a][2])},m=[],p=[];let d="",g="";for(let a=0,s=Math.max(r.length,n&&n.length||0);a<s;a++){r[a]&&(d=r[a][0]),"C"!=d&&(m[a]=d,a&&(g=m[a-1])),r[a]=h(r[a],o,g),"A"!=m[a]&&"C"==d&&(m[a]="C"),u(r,a),n&&(n[a]&&(d=n[a][0]),"C"!=d&&(p[a]=d,a&&(g=p[a-1])),n[a]=h(n[a],l,g),"A"!=p[a]&&"C"==d&&(p[a]="C"),u(n,a)),f(r,n,o,l,a),f(n,r,l,o,a);const e=r[a],t=n&&n[a],s=e.length,i=n&&t.length;o.x=e[s-2],o.y=e[s-1],o.bx=parseFloat(e[s-4])||o.x,o.by=parseFloat(e[s-3])||o.y,l.bx=n&&(parseFloat(t[i-4])||l.x),l.by=n&&(parseFloat(t[i-3])||l.y),l.x=n&&t[i-2],l.y=n&&t[i-1]}return n?[r,n]:r}function s(e,t,r,n){return[e,t,r,n,r,n]}function i(e,t,r,n,a,o){var s=.3333333333333333,i=2/3;return[s*e+i*r,s*t+i*n,s*a+i*r,s*o+i*n,a,o]}function c(e,t,r,n,a,o,s,i,l,h){var u,f=120*Math.PI/180,m=Math.PI/180*(+a||0),p=[],d=function(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}};if(h)x=h[0],C=h[1],_=h[2],I=h[3];else{e=(u=d(e,t,-m)).x,t=u.y;var g=(e-(i=(u=d(i,l,-m)).x))/2,b=(t-(l=u.y))/2,y=g*g/(r*r)+b*b/(n*n);y>1&&(r*=y=Math.sqrt(y),n*=y);var M=r*r,w=n*n,v=(o==s?-1:1)*Math.sqrt(Math.abs((M*w-M*b*b-w*g*g)/(M*b*b+w*g*g))),_=v*r*b/n+(e+i)/2,I=v*-n*g/r+(t+l)/2,x=Math.asin(+((t-I)/n).toFixed(9)),C=Math.asin(+((l-I)/n).toFixed(9));x=e<_?Math.PI-x:x,C=i<_?Math.PI-C:C,x<0&&(x=2*Math.PI+x),C<0&&(C=2*Math.PI+C),s&&x>C&&(x-=2*Math.PI),!s&&C>x&&(C-=2*Math.PI)}var k=C-x;if(Math.abs(k)>f){var R=C,$=i,E=l;C=x+f*(s&&C>x?1:-1),p=c(i=_+r*Math.cos(C),l=I+n*Math.sin(C),r,n,a,0,s,$,E,[C,R,_,I])}k=C-x;var S=Math.cos(x),B=Math.sin(x),A=Math.cos(C),j=Math.sin(C),O=Math.tan(k/4),N=4/3*r*O,L=4/3*n*O,F=[e,t],q=[e+N*B,t-L*S],D=[i+N*j,l-L*A],P=[i,l];if(q[0]=2*F[0]-q[0],q[1]=2*F[1]-q[1],h)return[q,D,P].concat(p);for(var z=[],T=0,G=(p=[q,D,P].concat(p).join().split(",")).length;T<G;T++)z[T]=T%2?d(p[T-1],p[T],m).y:d(p[T],p[T+1],m).x;return z}const l=/,?([a-z]),?/gi;function h(e){return e.join(",").replace(l,"$1")}function u(e){if(!e||!Array.isArray(e)||0===e.length)return f(0,0,0,0);let t=0,r=0;const n=[],a=[];let o;for(let h=0,u=e.length;h<u;h++)if(o=e[h],"M"==o[0])t=isFinite(o[1])?o[1]:0,r=isFinite(o[2])?o[2]:0,n.push(t),a.push(r);else{const e=t,s=r,i=isFinite(o[1])?o[1]:0,c=isFinite(o[2])?o[2]:0,l=isFinite(o[3])?o[3]:0,h=isFinite(o[4])?o[4]:0,u=isFinite(o[5])?o[5]:0,f=isFinite(o[6])?o[6]:0,p=m(e,s,i,c,l,h,u,f);isFinite(p.min.x)&&isFinite(p.max.x)&&isFinite(p.min.y)&&isFinite(p.max.y)&&(n.push(p.min.x,p.max.x),a.push(p.min.y,p.max.y)),t=u,r=f}if(0===n.length||0===a.length)return f(0,0,0,0);const s=Math.min(...n),i=Math.min(...a),c=Math.max(...n),l=Math.max(...a);return isFinite(s)&&isFinite(i)&&isFinite(c)&&isFinite(l)?f(s,i,c-s,l-i):f(0,0,0,0)}function f(e,t,r,n){return{x:e=isFinite(e)?e:0,y:t=isFinite(t)?t:0,w:r=isFinite(r)?r:0,h:n=isFinite(n)?n:0,cx:e+r/2,cy:t+n/2}}function m(e,t,r,n,a,o,s,i){for(var c,l,h,u,f,m,p,d,g=[],b=[[],[]],y=0;y<2;++y)if(0==y?(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,h=3*r-3*e):(l=6*t-12*n+6*o,c=-3*t+9*n-9*o+3*i,h=3*n-3*t),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;0<(u=-h/l)&&u<1&&g.push(u)}else p=l*l-4*h*c,d=Math.sqrt(p),!(p<0)&&(0<(f=(-l+d)/(2*c))&&f<1&&g.push(f),0<(m=(-l-d)/(2*c))&&m<1&&g.push(m));for(var M,w=g.length,v=w;w--;)M=1-(u=g[w]),b[0][w]=M*M*M*e+3*M*M*u*r+3*M*u*u*a+u*u*u*s,b[1][w]=M*M*M*t+3*M*M*u*n+3*M*u*u*o+u*u*u*i;return b[0][v]=e,b[1][v]=t,b[0][v+1]=s,b[1][v+1]=i,b[0].length=b[1].length=v+2,{min:{x:Math.min.apply(0,b[0]),y:Math.min.apply(0,b[1])},max:{x:Math.max.apply(0,b[0]),y:Math.max.apply(0,b[1])}}}function p(e,t){const[r,n,a,o]=e.values,[s,i,c,l]=t.values,h=c/a,u=l/o;return{scaleX:h,scaleY:u,translateX:s-r*h,translateY:i-n*u}}function d(e,t,r){return[e*r.scaleX+r.translateX,t*r.scaleY+r.translateY]}function g(e,t="",r){const n={gradients:{},patterns:{},others:{}};for(const[a,o]of Object.entries(e.gradients)){const e=t+a;let s=o;s=s.replace(new RegExp(`id="${a}"`,"g"),`id="${e}"`),s=s.replace(new RegExp(`id='${a}'`,"g"),`id='${e}'`),r&&(s=b(s,r)),n.gradients[e]=s}for(const[a,o]of Object.entries(e.patterns)){const e=t+a;let s=o;s=s.replace(new RegExp(`id="${a}"`,"g"),`id="${e}"`),s=s.replace(new RegExp(`id='${a}'`,"g"),`id='${e}'`),r&&(s=y(s,r)),n.patterns[e]=s}for(const[a,o]of Object.entries(e.others)){const e=t+a;let r=o;r=r.replace(new RegExp(`id="${a}"`,"g"),`id="${e}"`),r=r.replace(new RegExp(`id='${a}'`,"g"),`id='${e}'`),n.others[e]=r}return n}function b(e,t){let r=e;return e.includes("linearGradient")&&(r=r.replace(/\b(x1|y1|x2|y2)=["']([^"']+)["']/g,(e,r,n)=>`${r}="${M(r,n,t)}"`)),e.includes("radialGradient")&&(r=r.replace(/\b(cx|cy|fx|fy|r)=["']([^"']+)["']/g,(e,r,n)=>`${r}="${M(r,n,t)}"`)),r}function y(e,t){let r=e;return r=r.replace(/\b(x|y|width|height)=["']([^"']+)["']/g,(e,r,n)=>`${r}="${M(r,n,t)}"`),r}function M(e,t,r){if(t.endsWith("%"))return t;const n=parseFloat(t);if(isNaN(n))return t;let a;switch(e){case"x1":case"x2":case"cx":case"fx":case"x":a=n*r.scaleX+r.translateX;break;case"y1":case"y2":case"cy":case"fy":case"y":a=n*r.scaleY+r.translateY;break;case"r":a=n*Math.sqrt(r.scaleX*r.scaleY);break;case"width":a=n*r.scaleX;break;case"height":a=n*r.scaleY;break;default:a=n}return a.toFixed(3)}function w(e,t,r){let n={...t};for(const[a,o]of Object.entries(n))if("string"==typeof o&&o.startsWith("url(#")){const e=o.match(/url\(#([^)]+)\)/);e&&r[e[1]]&&(n[a]=`url(#${r[e[1]]})`)}return{pathData:e,attrs:n}}const v=Math.asin(1),_=2*Math.PI,I={"circ-in":e=>-1*(Math.sqrt(1-e*e)-1),"circ-out":e=>Math.sqrt(1-(e-=1)*e),"circ-in-out":e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),"cubic-in":e=>e*e*e,"cubic-out":e=>--e*e*e+1,"cubic-in-out":e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,"elastic-in":e=>{if(0==e)return 0;if(1==e)return 1;const t=.3/_*v;return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*_/.3)},"elastic-out":e=>{if(0==e)return 0;if(1==e)return 1;const t=.3/_*v;return Math.pow(2,-10*e)*Math.sin((e-t)*_/.3)+1},"elastic-in-out":e=>{if(0==e)return 0;if(2==(e/=.5))return 1;const t=.45,r=t/_*v;return e<1?Math.pow(2,10*(e-=1))*Math.sin((e-r)*_/t)*-.5:Math.pow(2,-10*(e-=1))*Math.sin((e-r)*_/t)*.5+1},"expo-in":e=>0==e?0:Math.pow(2,10*(e-1)),"expo-out":e=>1==e?1:1-Math.pow(2,-10*e),"expo-in-out":e=>0==e?0:1==e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e)),linear:e=>e,"quad-in":e=>e*e,"quad-out":e=>e*(2-e),"quad-in-out":e=>e<.5?2*e*e:(4-2*e)*e-1,"quart-in":e=>e*e*e*e,"quart-out":e=>1- --e*e*e*e,"quart-in-out":e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,"quint-in":e=>e*e*e*e*e,"quint-out":e=>1+--e*e*e*e*e,"quint-in-out":e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,"sine-in":e=>1-Math.cos(e*(Math.PI/2)),"sine-out":e=>Math.sin(e*(Math.PI/2)),"sine-in-out":e=>.5*(1-Math.cos(Math.PI*e))};function x(e,t){let r,n,a=e.length,o=!1,s=!1;Array.isArray(e[0])?r=e:(r=[e],a=r.length,o=!0),Array.isArray(t[0])?n=t:(n=t.length>0?t.map(e=>[e]):[[]],s=!0);let i=n[0].length,c=n[0].map((e,t)=>n.map(e=>e[t])),l=r.map(e=>c.map(t=>{let r=0;if(!Array.isArray(e)){for(let n of t)r+=e*n;return r}for(let n=0;n<e.length;n++)r+=e[n]*(t[n]||0);return r}));return 1===a&&o&&(l=l[0]),1===i&&s?1===a&&o?l[0]:l.map(e=>e[0]):l}function C(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function k(e,t,r=[0,0,0]){const n=C(e,t[0]),a=C(e,t[1]),o=C(e,t[2]);return r[0]=n,r[1]=a,r[2]=o,r}function R(e){return"string"===$(e)}function $(e){return(Object.prototype.toString.call(e).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function E(e,{precision:t=16,unit:r}){return S(e)?"none":(e=+A(e,t))+(r??"")}function S(e){return null===e}function B(e){return S(e)?0:e}function A(e,t){if(0===e)return 0;let r=~~e,n=0;r&&t&&(n=1+~~Math.log10(Math.abs(r)));const a=10**(t-n);return Math.floor(e*a+.5)/a}function j(e,t,r){return isNaN(e)?t:isNaN(t)?e:e+(t-e)*r}function O(e,t,r){return(r-e)/(t-e)}function N(e,t,r){return!e||!t||e===t||e[0]===t[0]&&e[1]===t[1]||isNaN(r)||null===r?r:j(t[0],t[1],O(e[0],e[1],r))}function L(e,t,r){return Math.max(Math.min(r,t),e)}function F(e,t){return Math.sign(e)===Math.sign(t)?e:-e}function q(e,t){return F(Math.abs(e)**t,e)}function D(e,t){return 0===t?0:e/t}function P(e,t,r=0,n=e.length){for(;r<n;){const a=r+n>>1;e[a]<t?r=a+1:n=a}return r}function z(e,t){var r;if(e instanceof t)return!0;const n=t.name;for(;e;){const t=Object.getPrototypeOf(e),a=null==(r=null==t?void 0:t.constructor)?void 0:r.name;if(a===n)return!0;if(!a||"Object"===a)return!1;e=t}return!1}var T=Object.freeze({__proto__:null,bisectLeft:P,clamp:L,copySign:F,interpolate:j,interpolateInv:O,isInstance:z,isNone:S,isString:R,mapRange:N,multiplyMatrices:x,multiply_v3_m3x3:k,serializeNumber:E,skipNone:B,spow:q,toPrecision:A,type:$,zdiv:D});const G=new class{add(e,t,r){if("string"==typeof arguments[0])(Array.isArray(e)?e:[e]).forEach(function(e){this[e]=this[e]||[],t&&this[e][r?"unshift":"push"](t)},this);else for(var e in arguments[0])this.add(e,arguments[0][e],arguments[1])}run(e,t){this[e]=this[e]||[],this[e].forEach(function(e){e.call(t&&t.context?t.context:t,t)})}};var H={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!=="production".toLowerCase(),warn:function(e){var t,r;this.verbose&&(null==(r=null==(t=null==globalThis?void 0:globalThis.console)?void 0:t.warn)||r.call(t,e))}};class W{type;coordMeta;coordRange;range;constructor(e,t){if("object"==typeof e&&(this.coordMeta=e),t&&(this.coordMeta=t,this.coordRange=t.range??t.refRange),"string"==typeof e){let t=e.trim().match(/^(?<type><[a-z]+>)(\[(?<min>-?[.\d]+),\s*(?<max>-?[.\d]+)\])?$/);if(!t)throw new TypeError(`Cannot parse ${e} as a type definition.`);this.type=t.groups.type;let{min:r,max:n}=t.groups;(r||n)&&(this.range=[+r,+n])}}get computedRange(){return this.range?this.range:"<percentage>"===this.type?this.percentageRange():"<angle>"===this.type?[0,360]:null}get unit(){return"<percentage>"===this.type?"%":"<angle>"===this.type?"deg":""}resolve(e){if("<angle>"===this.type)return e;let t=this.computedRange,r=this.coordRange;return"<percentage>"===this.type&&(r??=this.percentageRange()),N(t,r,e)}serialize(e,t){let r="<percentage>"===this.type?this.percentageRange(100):this.computedRange,n=this.unit;return E(e=N(this.coordRange,r,e),{unit:n,precision:t})}toString(){let e=this.type;if(this.range){let[t="",r=""]=this.range;e+=`[${t},${r}]`}return e}percentageRange(e=1){let t;return t=this.coordMeta&&this.coordMeta.range||this.coordRange&&this.coordRange[0]>=0?[0,1]:[-1,1],[t[0]*e,t[1]*e]}static get(e,t){return z(e,this)?e:new this(e,t)}}const Y=Symbol("instance");class X{type;name;spaceCoords;coords;id;alpha;constructor(e,t=e.space){e[Y]=this,this.type="function",this.name="color",Object.assign(this,e),this.space=t,"custom"!==this.type&&(this.spaceCoords=Object.values(t.coords),this.coords||(this.coords=this.spaceCoords.map(e=>{let t=["<number>","<percentage>"];return"angle"===e.type&&t.push("<angle>"),t})),this.coords=this.coords.map((e,t)=>{let r=this.spaceCoords[t];return"string"==typeof e&&(e=e.trim().split(/\s*\|\s*/)),e.map(e=>W.get(e,r))}))}serializeCoords(e,t,r){return r=e.map((e,t)=>W.get((null==r?void 0:r[t])??this.coords[t][0],this.spaceCoords[t])),e.map((e,n)=>r[n].serialize(e,t))}coerceCoords(e,t){return Object.entries(this.space.coords).map(([r,n],a)=>{let o=e[a];if(S(o)||isNaN(o))return o;let s=t[a],i=this.coords[a].find(e=>e.type==s);if(!i){let e=n.name||r;throw new TypeError(`${s??(null==o?void 0:o.raw)??o} not allowed for ${e} in ${this.name}()`)}return o=i.resolve(o),i.range&&(t[a]=i.toString()),o})}canSerialize(){return"function"===this.type||this.serialize}parse(e){return null}static get(e,...t){return!e||z(e,this)?e:e[Y]?e[Y]:new X(e,...t)}}const V={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function Z(e){return Array.isArray(e)?e:V[e]}function U(e,t,r,n={}){if(e=Z(e),t=Z(t),!e||!t)throw new TypeError(`Missing white point to convert ${e?"":"from"}${e||t?"":"/"}${t?"":"to"}`);if(e===t)return r;let a={W1:e,W2:t,XYZ:r,options:n};if(G.run("chromatic-adaptation-start",a),a.M||(a.W1===V.D65&&a.W2===V.D50?a.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:a.W1===V.D50&&a.W2===V.D65&&(a.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),G.run("chromatic-adaptation-end",a),a.M)return k(a.XYZ,a.M);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}function J(e,t){var r,n,a;let o={str:null==(r=String(e))?void 0:r.trim(),options:t};if(G.run("parse-start",o),o.color)return o.color;o.parsed=function(e){if(!e)return;e=e.trim();let t=e.match(K.function);if(t){let e=[],r=[],n=!1,a=t[1].toLowerCase(),o=t[2].replace(K.singleArgument,(t,o)=>{let{value:s,meta:i}=function(e){var t;let r={},n=null==(t=e.match(K.unitValue))?void 0:t[0],a=r.raw=e;return n?(r.type="%"===n?"<percentage>":"<angle>",r.unit=n,r.unitless=Number(a.slice(0,-n.length)),a=r.unitless*Q[n]):K.number.test(a)?(a=Number(a),r.type="<number>"):"none"===a?a=null:"NaN"===a||"calc(NaN)"===a?(a=NaN,r.type="<number>"):r.type="<ident>",{value:a,meta:r}}(o);return(t.startsWith("/")||"color"!==a&&3===e.length)&&(n=!0),e.push(s),r.push(i),""});return{name:a,args:e,argMeta:r,lastAlpha:n,commas:o.includes(","),rawName:t[1],rawArgs:t[2]}}}(o.str);let s,i=o.options?o.options.parseMeta??o.options.meta:null;if(o.parsed){let t,r,c=o.parsed.name,l=o.parsed.args,h=l.map((e,t)=>{var r;return null==(r=o.parsed.argMeta[t])?void 0:r.type});if("color"===c){let s=l.shift();h.shift();let i=s.startsWith("--")?s.substring(2):`--${s}`,u=[s,i];if(t=te.findFormat({name:c,id:u,type:"function"}),!t){let t,r=s in te.registry?s:i;if(r in te.registry){let o=null==(a=null==(n=te.registry[r].formats)?void 0:n.color)?void 0:a.id;o&&(t=`Did you mean ${e.replace("color("+s,"color("+o)}?`)}throw new TypeError(`Cannot parse ${o.str}. `+(t??"Missing a plugin?"))}r=t.space,t.id.startsWith("--")&&!s.startsWith("--")&&H.warn(`${r.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${t.id}) instead of color(${s}).`),s.startsWith("--")&&!t.id.startsWith("--")&&H.warn(`${r.name} is a standard space and supported in the CSS spec. Use color(${t.id}) instead of prefixed color(${s}).`)}else t=te.findFormat({name:c,type:"function"}),r=t.space;i&&Object.assign(i,{format:t,formatId:t.name,types:h,commas:o.parsed.commas});let u=1;o.parsed.lastAlpha&&(u=o.parsed.args.pop(),i&&(i.alphaType=h.pop()));let f=t.coords.length;if(l.length!==f)throw new TypeError(`Expected ${f} coordinates for ${r.id} in ${o.str}), got ${l.length}`);l=t.coerceCoords(l,h),s={spaceId:r.id,coords:l,alpha:u}}else e:for(let c of te.all)for(let e in c.formats){let t=c.formats[e];if("custom"!==t.type||t.test&&!t.test(o.str))continue;let r=c.getFormat(t),n=r.parse(o.str);if(n){i&&Object.assign(i,{format:r,formatId:e}),s=n;break e}}if(!s)throw new TypeError(`Could not parse ${e} as a color. Missing a plugin?`);return s.alpha=S(s.alpha)?s.alpha:void 0===s.alpha?1:L(0,s.alpha,1),s}const Q={"%":.01,deg:1,grad:.9,rad:180/Math.PI,turn:360},K={function:/^([a-z]+)\(((?:calc\(NaN\)|.)+?)\)$/i,number:/^([-+]?(?:[0-9]*\.)?[0-9]+(e[-+]?[0-9]+)?)$/i,unitValue:RegExp(`(${Object.keys(Q).join("|")})$`),singleArgument:/\/?\s*(none|NaN|calc\(NaN\)|[-+\w.]+(?:%|deg|g?rad|turn)?)/g};function ee(e,t){if(Array.isArray(e))return e.map(e=>ee(e,t));if(!e)throw new TypeError("Empty color reference");R(e)&&(e=J(e,t));let r=e.space||e.spaceId;return"string"==typeof r&&(e.space=te.get(r)),void 0===e.alpha&&(e.alpha=1),e}class te{constructor(e){var t;this.id=e.id,this.name=e.name,this.base=e.base?te.get(e.base):null,this.aliases=e.aliases,this.base&&(this.fromBase=e.fromBase,this.toBase=e.toBase);let r=e.coords??this.base.coords;for(let a in r)"name"in r[a]||(r[a].name=a);this.coords=r;let n=e.white??this.base.white??"D65";this.white=Z(n),this.formats=e.formats??{};for(let a in this.formats){let e=this.formats[a];e.type||="function",e.name||=a}(null==(t=this.formats.color)?void 0:t.id)||(this.formats.color={...this.formats.color??{},id:e.cssId||this.id}),e.gamutSpace?this.gamutSpace="self"===e.gamutSpace?this:te.get(e.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(e,t)=>!0),this.referred=e.referred,Object.defineProperty(this,"path",{value:re(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),G.run("colorspace-init-end",this)}inGamut(e,{epsilon:t=75e-6}={}){if(!this.equals(this.gamutSpace))return e=this.to(this.gamutSpace,e),this.gamutSpace.inGamut(e,{epsilon:t});let r=Object.values(this.coords);return e.every((e,n)=>{let a=r[n];if("angle"!==a.type&&a.range){if(S(e))return!0;let[r,n]=a.range;return(void 0===r||e>=r-t)&&(void 0===n||e<=n+t)}return!0})}get isUnbounded(){return Object.values(this.coords).every(e=>!("range"in e))}get cssId(){var e,t;return(null==(t=null==(e=this.formats)?void 0:e.color)?void 0:t.id)||this.id}get isPolar(){for(let e in this.coords)if("angle"===this.coords[e].type)return!0;return!1}getFormat(e){if(!e)return null;"default"===e?e=Object.values(this.formats)[0]:"string"==typeof e&&(e=this.formats[e]);let t=X.get(e,this);return t!==e&&e.name in this.formats&&(this.formats[e.name]=t),t}equals(e){return!!e&&(this===e||this.id===e||this.id===e.id)}to(e,t){if(1===arguments.length){const r=ee(e);[e,t]=[r.space,r.coords]}if(e=te.get(e),this.equals(e))return t;t=t.map(e=>S(e)?0:e);let r,n,a=this.path,o=e.path;for(let s=0;s<a.length&&a[s].equals(o[s]);s++)r=a[s],n=s;if(!r)throw new Error(`Cannot convert between color spaces ${this} and ${e}: no connection space was found`);for(let s=a.length-1;s>n;s--)t=a[s].toBase(t);for(let s=n+1;s<o.length;s++)t=o[s].fromBase(t);return t}from(e,t){if(1===arguments.length){const r=ee(e);[e,t]=[r.space,r.coords]}return(e=te.get(e)).to(this,t)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let e=[];for(let t in this.coords){let r=this.coords[t],n=r.range||r.refRange;e.push((null==n?void 0:n.min)??0)}return e}static registry={};static get all(){return[...new Set(Object.values(te.registry))]}static register(e,t){if(1===arguments.length&&(e=(t=arguments[0]).id),t=this.get(t),this.registry[e]&&this.registry[e]!==t)throw new Error(`Duplicate color space registration: '${e}'`);if(this.registry[e]=t,1===arguments.length&&t.aliases)for(let r of t.aliases)this.register(r,t);return t}static get(e,...t){if(!e||z(e,this))return e;if("string"===$(e)){let t=te.registry[e.toLowerCase()];if(!t)throw new TypeError(`No color space found with id = "${e}"`);return t}if(t.length)return te.get(...t);throw new TypeError(`${e} is not a valid color space`)}static findFormat(e,t=te.all){if(!e)return null;"string"==typeof e&&(e={name:e});for(let r of t)for(let[t,n]of Object.entries(r.formats)){n.name??=t,n.type??="function";let a=!(e.name&&n.name!==e.name||e.type&&n.type!==e.type);if(e.id){let t=n.ids||[n.id],r=Array.isArray(e.id)?e.id:[e.id];a&&=r.some(e=>t.includes(e))}if(a){let e=X.get(n,r);return e!==n&&(r.formats[n.name]=e),e}}return null}static resolveCoord(e,t){var r;let n,a,o=$(e);if("string"===o?e.includes(".")?[n,a]=e.split("."):[n,a]=[,e]:Array.isArray(e)?[n,a]=e:(n=e.space,a=e.coordId),n=te.get(n),n||(n=t),!n)throw new TypeError(`Cannot resolve coordinate reference ${e}: No color space specified and relative references are not allowed here`);if(o=$(a),"number"===o||"string"===o&&a>=0){let e=Object.entries(n.coords)[a];if(e)return{space:n,id:e[0],index:a,...e[1]}}n=te.get(n);let s=a.toLowerCase(),i=0;for(let c in n.coords){let e=n.coords[c];if(c.toLowerCase()===s||(null==(r=e.name)?void 0:r.toLowerCase())===s)return{space:n,id:c,index:i,...e};i++}throw new TypeError(`No "${a}" coordinate found in ${n.name}. Its coordinates are: ${Object.keys(n.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function re(e){let t=[e];for(let r=e;r=r.base;)t.push(r);return t}var ne=new te({id:"xyz-d65",name:"XYZ D65",coords:{x:{refRange:[0,1],name:"X"},y:{refRange:[0,1],name:"Y"},z:{refRange:[0,1],name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class ae extends te{constructor(e){e.coords||(e.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),e.base||(e.base=ne),e.toXYZ_M&&e.fromXYZ_M&&(e.toBase??=t=>{let r=k(t,e.toXYZ_M);return this.white!==this.base.white&&(r=U(this.white,this.base.white,r)),r},e.fromBase??=t=>k(t=U(this.base.white,this.white,t),e.fromXYZ_M)),e.referred??="display",super(e)}}function oe(e,t={}){if(Array.isArray(e))return e.map(e=>oe(e,t));let{cssProperty:r="background-color",element:n,...a}=t,o=null;try{return ee(e,a)}catch(c){o=c}let{CSS:s,getComputedStyle:i}=globalThis;if(R(e)&&n&&s&&i&&s.supports(r,e)){let t=n.style[r];e!==t&&(n.style[r]=e);let s=i(n).getPropertyValue(r);if(e!==t&&(n.style[r]=t),s!==e)try{return ee(s,a)}catch(l){o=l}else o={message:"Color value is a valid CSS color, but it could not be resolved :("}}return t.errorMeta&&(t.errorMeta.error=o),null}function se(e,t){e=ee(e);let r,n=te.get(t,null==t?void 0:t.space),a=null==t?void 0:t.precision;return r=!n||e.space.equals(n)?e.coords.slice():n.from(e),void 0===a?r:r.map(e=>A(e,a))}function ie(e,t){if(e=ee(e),"alpha"===t)return e.alpha??1;let{space:r,index:n}=te.resolveCoord(t,e.space);return se(e,r)[n]}function ce(e,t,r,n){return e=ee(e),Array.isArray(t)&&([t,r,n]=[e.space,t,r]),t=te.get(t),e.coords=t===e.space?r.slice():t.to(e.space,r),void 0!==n&&(e.alpha=n),e}function le(e,t,r){if(e=ee(e),2===arguments.length&&"object"===$(arguments[1])){let t=arguments[1];for(let r in t)le(e,r,t[r])}else if("function"==typeof r&&(r=r(ie(e,t))),"alpha"===t)e.alpha=r;else{let{space:n,index:a}=te.resolveCoord(t,e.space),o=se(e,n);o[a]=r,ce(e,n,o)}return e}ce.returns="color",le.returns="color";var he=new te({id:"xyz-d50",name:"XYZ D50",white:"D50",base:ne,fromBase:e=>U(ne.white,"D50",e),toBase:e=>U("D50",ne.white,e)});const ue=216/24389,fe=24/116,me=24389/27;let pe=V.D50;var de=new te({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:pe,base:he,fromBase(e){let t=e.map((e,t)=>e/pe[t]).map(e=>e>ue?Math.cbrt(e):(me*e+16)/116);return[116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])]},toBase(e){let[t,r,n]=e,a=[];return a[1]=(t+16)/116,a[0]=r/500+a[1],a[2]=a[1]-n/200,[a[0]>fe?Math.pow(a[0],3):(116*a[0]-16)/me,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/me,a[2]>fe?Math.pow(a[2],3):(116*a[2]-16)/me].map((e,t)=>e*pe[t])},formats:{lab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function ge(e){return"number"!=typeof e?e:(e%360+360)%360}function be(e,t){let[r,n]=t,a=S(r),o=S(n);if(a&&o)return[r,n];if(a?r=n:o&&(n=r),"raw"===e)return t;r=ge(r),n=ge(n);let s=n-r;return"increasing"===e?s<0&&(n+=360):"decreasing"===e?s>0&&(r+=360):"longer"===e?-180<s&&s<180&&(s>0?r+=360:n+=360):"shorter"===e&&(s>180?r+=360:s<-180&&(n+=360)),[r,n]}var ye=new te({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:de,fromBase(e){if(void 0===this.ε){let e=Object.values(this.base.coords)[1].refRange,t=e[1]-e[0];this.ε=t/1e5}let[t,r,n]=e,a=Math.abs(r)<this.ε&&Math.abs(n)<this.ε,o=a?null:ge(180*Math.atan2(n,r)/Math.PI);return[t,a?0:Math.sqrt(r**2+n**2),o]},toBase(e){let[t,r,n]=e,a=null,o=null;return S(n)||(r=r<0?0:r,a=r*Math.cos(n*Math.PI/180),o=r*Math.sin(n*Math.PI/180)),[t,a,o]},formats:{lch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});const Me=25**7,we=Math.PI,ve=180/we,_e=we/180;function Ie(e){const t=e*e;return t*t*t*e}function xe(e,t,{kL:r=1,kC:n=1,kH:a=1}={}){[e,t]=ee([e,t]);let[o,s,i]=de.from(e),c=ye.from(de,[o,s,i])[1],[l,h,u]=de.from(t),f=ye.from(de,[l,h,u])[1];c<0&&(c=0),f<0&&(f=0);let m=Ie((c+f)/2),p=.5*(1-Math.sqrt(m/(m+Me))),d=(1+p)*s,g=(1+p)*h,b=Math.sqrt(d**2+i**2),y=Math.sqrt(g**2+u**2),M=0===d&&0===i?0:Math.atan2(i,d),w=0===g&&0===u?0:Math.atan2(u,g);M<0&&(M+=2*we),w<0&&(w+=2*we),M*=ve,w*=ve;let v,_=l-o,I=y-b,x=w-M,C=M+w,k=Math.abs(x);b*y===0?v=0:k<=180?v=x:x>180?v=x-360:x<-180?v=x+360:H.warn("the unthinkable has happened");let R,$=2*Math.sqrt(y*b)*Math.sin(v*_e/2),E=(o+l)/2,S=(b+y)/2,B=Ie(S);R=b*y===0?C:k<=180?C/2:C<360?(C+360)/2:(C-360)/2;let A=(E-50)**2,j=1+.015*A/Math.sqrt(20+A),O=1+.045*S,N=1;N-=.17*Math.cos((R-30)*_e),N+=.24*Math.cos(2*R*_e),N+=.32*Math.cos((3*R+6)*_e),N-=.2*Math.cos((4*R-63)*_e);let L=1+.015*S*N,F=30*Math.exp(-1*((R-275)/25)**2),q=2*Math.sqrt(B/(B+Me)),D=(_/(r*j))**2;return D+=(I/(n*O))**2,D+=($/(a*L))**2,D+=-1*Math.sin(2*F*_e)*q*(I/(n*O))*($/(a*L)),Math.sqrt(D)}const Ce=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],ke=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],Re=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],$e=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var Ee=new te({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:ne,fromBase(e){let t=k(e,Ce);return t[0]=Math.cbrt(t[0]),t[1]=Math.cbrt(t[1]),t[2]=Math.cbrt(t[2]),k(t,Re,t)},toBase(e){let t=k(e,$e);return t[0]=t[0]**3,t[1]=t[1]**3,t[2]=t[2]**3,k(t,ke,t)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function Se(e,t){[e,t]=ee([e,t]);let[r,n,a]=Ee.from(e),[o,s,i]=Ee.from(t),c=r-o,l=n-s,h=a-i;return Math.sqrt(c**2+l**2+h**2)}function Be(e,t,{epsilon:r=75e-6}={}){e=ee(e),t||(t=e.space),t=te.get(t);let n=e.coords;return t!==e.space&&(n=t.from(e)),t.inGamut(n,{epsilon:r})}function Ae(e){return{space:e.space,coords:e.coords.slice(),alpha:e.alpha}}function je(e,t,r="lab"){let n=(r=te.get(r)).from(e),a=r.from(t);return Math.sqrt(n.reduce((e,t,r)=>{let n=a[r];return S(t)||S(n)?e:e+(n-t)**2},0))}const Oe=Math.PI/180;var Ne=new te({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:ne,fromBase:e=>e.map(e=>203*e),toBase:e=>e.map(e=>e/203)});const Le=1.15,Fe=.66,qe=2610/16384,De=16384/2610,Pe=.8359375,ze=2413/128,Te=18.6875,Ge=1.7*2523/32,He=32/(1.7*2523),We=-.56,Ye=16295499532821565e-27,Xe=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],Ve=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],Ze=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],Ue=[[1,.13860504327153927,.05804731615611883],[1,-.1386050432715393,-.058047316156118904],[1,-.09601924202631895,-.811891896056039]];var Je=new te({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.21,.21]},bz:{refRange:[-.21,.21]}},base:Ne,fromBase(e){let[t,r,n]=e,a=k([Le*t-(Le-1)*n,Fe*r-(Fe-1)*t,n],Xe).map(function(e){let t=Pe+ze*q(e/1e4,qe),r=1+Te*q(e/1e4,qe);return q(t/r,Ge)}),[o,s,i]=k(a,Ze);return[(1+We)*o/(1+We*o)-Ye,s,i]},toBase(e){let[t,r,n]=e,a=k([(t+Ye)/(1+We-We*(t+Ye)),r,n],Ue).map(function(e){let t=Pe-q(e,He),r=Te*q(e,He)-ze;return 1e4*q(t/r,De)}),[o,s,i]=k(a,Ve),c=(o+(Le-1)*i)/Le;return[c,(s+(Fe-1)*c)/Fe,i]},formats:{jzazbz:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}}),Qe=new te({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,.26],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:Je,fromBase:ye.fromBase,toBase:ye.toBase,formats:{jzczhz:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});const Ke=.8359375,et=2413/128,tt=18.6875,rt=2610/16384,nt=2523/32,at=16384/2610,ot=32/2523,st=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],it=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],ct=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],lt=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var ht=new te({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:Ne,fromBase:e=>function(e){let t=e.map(function(e){return((Ke+et*(e/1e4)**rt)/(1+tt*(e/1e4)**rt))**nt});return k(t,it)}(k(e,st)),toBase(e){let t=function(e){return k(e,ct).map(function(e){return 1e4*(Math.max(e**ot-Ke,0)/(et-tt*e**ot))**at})}(e);return k(t,lt)},formats:{ictcp:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});const ut=V.D65,ft=1/.42,mt=2*Math.PI,pt=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],dt=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],gt=[[460,451,288],[460,-891,-261],[460,-220,-6300]],bt={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},yt={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},Mt=180/Math.PI,wt=Math.PI/180;function vt(e,t){return e.map(e=>{const r=q(t*Math.abs(e)*.01,.42);return 400*F(r,e)/(r+27.13)})}function _t(e,t,r,n,a){const o={};o.discounting=a,o.refWhite=e,o.surround=n;const s=e.map(e=>100*e);o.la=t,o.yb=r;const i=s[1],c=k(s,pt);let l=bt[o.surround];const h=l[0];o.c=l[1],o.nc=l[2];const u=(1/(5*o.la+1))**4;o.fl=u*o.la+.1*(1-u)*(1-u)*Math.cbrt(5*o.la),o.flRoot=o.fl**.25,o.n=o.yb/i,o.z=1.48+Math.sqrt(o.n),o.nbb=.725*o.n**-.2,o.ncb=o.nbb;const f=Math.max(Math.min(h*(1-1/3.6*Math.exp((-o.la-42)/92)),1),0);o.dRgb=c.map(e=>j(1,i/e,f)),o.dRgbInv=o.dRgb.map(e=>1/e);const m=vt(c.map((e,t)=>e*o.dRgb[t]),o.fl);return o.aW=o.nbb*(2*m[0]+m[1]+.05*m[2]),o}const It=_t(ut,64/Math.PI*.2,20,"average",!1);function xt(e,t){if(!(void 0!==e.J^void 0!==e.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==e.C^void 0!==e.M^void 0!==e.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==e.h^void 0!==e.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===e.J||0===e.Q)return[0,0,0];let r=0;r=void 0!==e.h?ge(e.h)*wt:function(e){let t=(e%400+400)%400;const r=Math.floor(.01*t);t%=100;const[n,a]=yt.h.slice(r,r+2),[o,s]=yt.e.slice(r,r+2);return ge((t*(s*n-o*a)-100*n*s)/(t*(s-o)-100*s))}(e.H)*wt;const n=Math.cos(r),a=Math.sin(r);let o=0;void 0!==e.J?o=.1*q(e.J,.5):void 0!==e.Q&&(o=.25*t.c*e.Q/((t.aW+4)*t.flRoot));let s=0;void 0!==e.C?s=e.C/o:void 0!==e.M?s=e.M/t.flRoot/o:void 0!==e.s&&(s=4e-4*e.s**2*(t.aW+4)/t.c);const i=q(s*Math.pow(1.64-Math.pow(.29,t.n),-.73),10/9),c=.25*(Math.cos(r+2)+3.8),l=t.aW*q(o,2/t.c/t.z),h=5e4/13*t.nc*t.ncb*c,u=l/t.nbb,f=23*(u+.305)*D(i,23*h+i*(11*n+108*a)),m=function(e,t){const r=100/t*27.13**ft;return e.map(e=>{const t=Math.abs(e);return F(r*q(t/(400-t),ft),e)})}(k([u,f*n,f*a],gt).map(e=>1*e/1403),t.fl);return k(m.map((e,r)=>e*t.dRgbInv[r]),dt).map(e=>e/100)}function Ct(e,t){const r=vt(k(e.map(e=>100*e),pt).map((e,r)=>e*t.dRgb[r]),t.fl),n=r[0]+(-12*r[1]+r[2])/11,a=(r[0]+r[1]-2*r[2])/9,o=(Math.atan2(a,n)%mt+mt)%mt,s=.25*(Math.cos(o+2)+3.8),i=q(5e4/13*t.nc*t.ncb*D(s*Math.sqrt(n**2+a**2),r[0]+r[1]+1.05*r[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,t.n),.73),c=q(t.nbb*(2*r[0]+r[1]+.05*r[2])/t.aW,.5*t.c*t.z),l=100*q(c,2),h=4/t.c*c*(t.aW+4)*t.flRoot,u=i*c,f=u*t.flRoot,m=ge(o*Mt),p=function(e){let t=ge(e);t<=yt.h[0]&&(t+=360);const r=P(yt.h,t)-1,[n,a]=yt.h.slice(r,r+2),[o,s]=yt.e.slice(r,r+2),i=(t-n)/o;return yt.H[r]+100*i/(i+(a-t)/s)}(m);return{J:l,C:u,h:m,s:50*q(t.c*i/(t.aW+4),.5),Q:h,M:f,H:p}}var kt=new te({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:ne,fromBase(e){void 0===this.ε&&(this.ε=Object.values(this.coords)[1].refRange[1]/1e5);const t=Ct(e,It),r=Math.abs(t.M)<this.ε;return[t.J,r?0:t.M,r?null:t.h]},toBase:e=>xt({J:e[0],M:e[1],h:e[2]},It)});const Rt=V.D65,$t=216/24389,Et=24389/27;function St(e){return e>8?Math.pow((e+16)/116,3):e/Et}function Bt(e,t){const r=function(e){return 116*(e>$t?Math.cbrt(e):(Et*e+16)/116)-16}(e[1]);if(0===r)return[0,0,0];const n=Ct(e,At);return[ge(n.h),n.C,r]}const At=_t(Rt,200/Math.PI*St(50),100*St(50),"average",!1);var jt=new te({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:ne,fromBase(e){void 0===this.ε&&(this.ε=Object.values(this.coords)[1].refRange[1]/1e5);let t=Bt(e);return t[1]<this.ε&&(t[1]=0,t[0]=null),t},toBase:e=>function(e,t){let[r,n,a]=e,o=[],s=0;if(0===a)return[0,0,0];let i=St(a);s=a>0?.00379058511492914*a**2+.608983189401032*a+.9155088574762233:9514440756550361e-21*a**2+.08693057439788597*a-21.928975842194614;let c=0,l=1/0;for(;c<=15;){o=xt({J:s,C:n,h:r},t);const e=Math.abs(o[1]-i);if(e<l){if(e<=2e-12)return o;l=e}s-=(o[1]-i)*s/(2*o[1]),c+=1}return xt({J:s,C:n,h:r},t)}(e,At),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const Ot=Math.PI/180,Nt=[1,.007,.0228];function Lt(e){e[1]<0&&(e=jt.fromBase(jt.toBase(e)));const t=Math.log(Math.max(1+Nt[2]*e[1]*At.flRoot,1))/Nt[2],r=e[0]*Ot,n=t*Math.cos(r),a=t*Math.sin(r);return[e[2],n,a]}var Ft={deltaE76:function(e,t){return je(e,t,"lab")},deltaECMC:function(e,t,{l:r=2,c:n=1}={}){[e,t]=ee([e,t]);let[a,o,s]=de.from(e),[,i,c]=ye.from(de,[a,o,s]),[l,h,u]=de.from(t),f=ye.from(de,[l,h,u])[1];i<0&&(i=0),f<0&&(f=0);let m=a-l,p=i-f,d=(o-h)**2+(s-u)**2-p**2,g=.511;a>=16&&(g=.040975*a/(1+.01765*a));let b,y=.0638*i/(1+.0131*i)+.638;S(c)&&(c=0),b=c>=164&&c<=345?.56+Math.abs(.2*Math.cos((c+168)*Oe)):.36+Math.abs(.4*Math.cos((c+35)*Oe));let M=Math.pow(i,4),w=Math.sqrt(M/(M+1900)),v=(m/(r*g))**2;return v+=(p/(n*y))**2,v+=d/(y*(w*b+1-w))**2,Math.sqrt(v)},deltaE2000:xe,deltaEJz:function(e,t){[e,t]=ee([e,t]);let[r,n,a]=Qe.from(e),[o,s,i]=Qe.from(t),c=r-o,l=n-s;S(a)&&S(i)?(a=0,i=0):S(a)?a=i:S(i)&&(i=a);let h=a-i,u=2*Math.sqrt(n*s)*Math.sin(h/2*(Math.PI/180));return Math.sqrt(c**2+l**2+u**2)},deltaEITP:function(e,t){[e,t]=ee([e,t]);let[r,n,a]=ht.from(e),[o,s,i]=ht.from(t);return 720*Math.sqrt((r-o)**2+.25*(n-s)**2+(a-i)**2)},deltaEOK:Se,deltaEOK2:function(e,t){[e,t]=ee([e,t]);let[r,n,a]=Ee.from(e),[o,s,i]=Ee.from(t),c=r-o,l=2*(n-s),h=2*(a-i);return Math.sqrt(c**2+l**2+h**2)},deltaEHCT:function(e,t){[e,t]=ee([e,t]);let[r,n,a]=Lt(jt.from(e)),[o,s,i]=Lt(jt.from(t));return Math.sqrt((r-o)**2+(n-s)**2+(a-i)**2)}};const qt={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function Dt(e,{method:t=H.gamut_mapping,space:r,deltaEMethod:n="",jnd:a=2,blackWhiteClamp:o}={}){if(e=ee(e),R(arguments[1])?r=arguments[1]:r||(r=e.space),Be(e,r=te.get(r),{epsilon:0}))return e;let s;if("css"===t)s=function(e,{space:t}={}){e=ee(e),t||(t=e.space),t=te.get(t);const r=te.get("oklch");if(t.isUnbounded)return zt(e,t);const n=zt(e,r);let a=n.coords[0];if(a>=1){const r=zt(Pt.WHITE,t);return r.alpha=e.alpha,zt(r,t)}if(a<=0){const r=zt(Pt.BLACK,t);return r.alpha=e.alpha,zt(r,t)}if(Be(n,t,{epsilon:0}))return zt(n,t);function o(e){const r=zt(e,t),n=Object.values(t.coords);return r.coords=r.coords.map((e,t)=>{if("range"in n[t]){const[r,a]=n[t].range;return L(r,e,a)}return e}),r}let s=0,i=n.coords[1],c=!0,l=Ae(n),h=o(l),u=Se(h,l);if(u<.02)return h;for(;i-s>1e-4;){const e=(s+i)/2;if(l.coords[1]=e,c&&Be(l,t,{epsilon:0}))s=e;else if(h=o(l),u=Se(h,l),u<.02){if(.02-u<1e-4)break;c=!1,s=e}else i=e}return h}(e,{space:r});else{if("clip"===t||Be(e,r))s=zt(e,r);else{Object.prototype.hasOwnProperty.call(qt,t)&&({method:t,jnd:a,deltaEMethod:n,blackWhiteClamp:o}=qt[t]);let i=xe;if(""!==n)for(let e in Ft)if("deltae"+n.toLowerCase()===e.toLowerCase()){i=Ft[e];break}0===a&&(a=1e-16);let c=Dt(zt(e,r),{method:"clip",space:r});if(i(e,c)>a){if(o&&3===Object.keys(o).length){let t=te.resolveCoord(o.channel),r=ie(zt(e,t.space),t.id);if(S(r)&&(r=0),r>=o.max)return zt({space:"xyz-d65",coords:V.D65},e.space);if(r<=o.min)return zt({space:"xyz-d65",coords:[0,0,0]},e.space)}let n=te.resolveCoord(t),c=n.space,l=n.id,h=zt(e,c);h.coords.forEach((e,t)=>{S(e)&&(h.coords[t]=0)});let u=(n.range||n.refRange)[0],f=function(e){const t=e?Math.floor(Math.log10(Math.abs(e))):0;return Math.max(parseFloat("1e"+(t-2)),1e-6)}(a),m=u,p=ie(h,l);for(;p-m>f;){let e=Ae(h);e=Dt(e,{space:r,method:"clip"}),i(h,e)-a<f?m=ie(h,l):p=ie(h,l),le(h,l,(m+p)/2)}s=zt(h,r)}else s=c}if("clip"===t||!Be(s,r,{epsilon:0})){let e=Object.values(r.coords).map(e=>e.range||[]);s.coords=s.coords.map((t,r)=>{let[n,a]=e[r];return void 0!==n&&(t=Math.max(n,t)),void 0!==a&&(t=Math.min(t,a)),t})}}return r!==e.space&&(s=zt(s,e.space)),e.coords=s.coords,e}Dt.returns="color";const Pt={WHITE:{space:Ee,coords:[1,0,0],alpha:1},BLACK:{space:Ee,coords:[0,0,0],alpha:1}};function zt(e,t,{inGamut:r}={}){e=ee(e);let n=(t=te.get(t)).from(e),a={space:t,coords:n,alpha:e.alpha};return r&&(a=Dt(a,!0===r?void 0:r)),a}function Tt(e,t={}){var r;let n,{precision:a=H.precision,format:o,inGamut:s=!0,coords:i,alpha:c,commas:l}=t,h=ee(e),u=o,f=h.parseMeta;f&&!o&&(f.format.canSerialize()&&(o=f.format,u=f.formatId),i??=f.types,c??=f.alphaType,l??=f.commas),u&&(o=h.space.getFormat(o)??te.findFormat(u)),o||(o=h.space.getFormat("default")??te.DEFAULT_FORMAT,u=o.name),o&&o.space&&o.space!==h.space&&(h=zt(h,o.space));let m=h.coords.slice();if(s||=o.toGamut,s&&!Be(h)&&(m=Dt(Ae(h),!0===s?void 0:s).coords),"custom"===o.type){if(!o.serialize)throw new TypeError(`format ${u} can only be used to parse colors, not for serialization`);n=o.serialize(m,h.alpha,t)}else{let e=o.name||"color",t=o.serializeCoords(m,a,i);if("color"===e){let e=o.id||(null==(r=o.ids)?void 0:r[0])||h.space.cssId||h.space.id;t.unshift(e)}let s=h.alpha;void 0!==c&&"object"!=typeof c&&(c="string"==typeof c?{type:c}:{include:c});let u=(null==c?void 0:c.type)??"<number>",f=!0===(null==c?void 0:c.include)||!0===o.alpha||!1!==(null==c?void 0:c.include)&&!1!==o.alpha&&s<1,p="";if(l??=o.commas,f){if(null!==a){let e;"<percentage>"===u&&(e="%",s*=100),s=E(s,{precision:a,unit:e})}p=`${l?",":" /"} ${s}`}n=`${e}(${t.join(l?", ":" ")}${p})`}return n}zt.returns="color";var Gt=new ae({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]]}),Ht=new ae({id:"rec2020",name:"REC.2020",base:Gt,toBase:e=>e.map(function(e){let t=e<0?-1:1,r=e*t;return t*Math.pow(r,2.4)}),fromBase:e=>e.map(function(e){let t=e<0?-1:1,r=e*t;return t*Math.pow(r,1/2.4)})});var Wt=new ae({id:"p3-linear",cssId:"display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]});const Yt=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Xt=new ae({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:Yt}),Vt={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Zt=Array(3).fill("<percentage> | <number>[0, 255]"),Ut=Array(3).fill("<number>[0, 255]");var Jt=new ae({id:"srgb",name:"sRGB",base:Xt,fromBase:e=>e.map(e=>{let t=e<0?-1:1,r=e*t;return r>.0031308?t*(1.055*r**(1/2.4)-.055):12.92*e}),toBase:e=>e.map(e=>{let t=e<0?-1:1,r=e*t;return r<=.04045?e/12.92:t*((r+.055)/1.055)**2.4}),formats:{rgb:{coords:Zt},rgb_number:{name:"rgb",commas:!0,coords:Ut,alpha:!1},color:{},rgba:{coords:Zt,commas:!0,alpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Ut},hex:{type:"custom",toGamut:!0,test:e=>/^#(([a-f0-9]{2}){3,4}|[a-f0-9]{3,4})$/i.test(e),parse(e){e.length<=5&&(e=e.replace(/[a-f0-9]/gi,"$&$&"));let t=[];return e.replace(/[a-f0-9]{2}/gi,e=>{t.push(parseInt(e,16)/255)}),{spaceId:"srgb",coords:t.slice(0,3),alpha:t.slice(3)[0]}},serialize:(e,t,{collapse:r=!0,alpha:n}={})=>{(!1!==n&&t<1||!0===n)&&e.push(t),e=e.map(e=>Math.round(255*e));let a=r&&e.every(e=>e%17==0);return"#"+e.map(e=>a?(e/17).toString(16):e.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:e=>/^[a-z]+$/i.test(e),parse(e){let t={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(e=e.toLowerCase())?(t.coords=Vt.black,t.alpha=0):t.coords=Vt[e],t.coords)return t}}}}),Qt=new ae({id:"p3",cssId:"display-p3",name:"P3",base:Wt,fromBase:Jt.fromBase,toBase:Jt.toBase});let Kt;if(H.display_space=Jt,typeof CSS<"u"&&CSS.supports)for(let ya of[de,Ht,Qt]){let e=ya.getMinCoords(),t=Tt({space:ya,coords:e,alpha:1});if(CSS.supports("color",t)){H.display_space=ya;break}}function er(e,t){return S(e)||S(t)?e===t?null:0:e-t}function tr(e){return ie(e,[ne,"y"])}function rr(e,t){le(e,[ne,"y"],t)}var nr=Object.freeze({__proto__:null,getLuminance:tr,register:function(e){Object.defineProperty(e.prototype,"luminance",{get(){return tr(this)},set(e){rr(this,e)}})},setLuminance:rr});function ar(e){return e>=.022?e:e+(.022-e)**1.414}function or(e){let t=e<0?-1:1,r=Math.abs(e);return t*Math.pow(r,2.4)}const sr=216/24389,ir=24/116,cr=24389/27;let lr=V.D65;var hr=new te({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:lr,base:ne,fromBase(e){let t=e.map((e,t)=>e/lr[t]).map(e=>e>sr?Math.cbrt(e):(cr*e+16)/116);return[116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])]},toBase(e){let t=[];return t[1]=(e[0]+16)/116,t[0]=e[1]/500+t[1],t[2]=t[1]-e[2]/200,[t[0]>ir?Math.pow(t[0],3):(116*t[0]-16)/cr,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/cr,t[2]>ir?Math.pow(t[2],3):(116*t[2]-16)/cr].map((e,t)=>e*lr[t])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}});const ur=.5*Math.pow(5,.5)+.5;var fr=Object.freeze({__proto__:null,contrastAPCA:function(e,t){let r,n,a,o,s,i;t=ee(t),e=ee(e),t=zt(t,"srgb"),[o,s,i]=t.coords.map(e=>S(e)?0:e);let c=.2126729*or(o)+.7151522*or(s)+.072175*or(i);e=zt(e,"srgb"),[o,s,i]=e.coords.map(e=>S(e)?0:e);let l=.2126729*or(o)+.7151522*or(s)+.072175*or(i),h=ar(c),u=ar(l),f=u>h;return Math.abs(u-h)<5e-4?n=0:f?(r=u**.56-h**.57,n=1.14*r):(r=u**.65-h**.62,n=1.14*r),a=Math.abs(n)<.1?0:n>0?n-.027:n+.027,100*a},contrastDeltaPhi:function(e,t){e=ee(e),t=ee(t);let r=ie(e,[hr,"l"]),n=ie(t,[hr,"l"]),a=Math.abs(Math.pow(r,ur)-Math.pow(n,ur)),o=Math.pow(a,1/ur)*Math.SQRT2-40;return o<7.5?0:o},contrastLstar:function(e,t){e=ee(e),t=ee(t);let r=ie(e,[de,"l"]),n=ie(t,[de,"l"]);return Math.abs(r-n)},contrastMichelson:function(e,t){e=ee(e),t=ee(t);let r=Math.max(tr(e),0),n=Math.max(tr(t),0);n>r&&([r,n]=[n,r]);let a=r+n;return 0===a?0:(r-n)/a},contrastWCAG21:function(e,t){e=ee(e),t=ee(t);let r=Math.max(tr(e),0),n=Math.max(tr(t),0);return n>r&&([r,n]=[n,r]),(r+.05)/(n+.05)},contrastWeber:function(e,t){e=ee(e),t=ee(t);let r=Math.max(tr(e),0),n=Math.max(tr(t),0);return n>r&&([r,n]=[n,r]),0===n?5e4:(r-n)/n}});function mr(e){let[t,r,n]=se(e,ne),a=t+15*r+3*n;return[4*t/a,9*r/a]}function pr(e){let[t,r,n]=se(e,ne),a=t+r+n;return[t/a,r/a]}var dr=Object.freeze({__proto__:null,register:function(e){Object.defineProperty(e.prototype,"uv",{get(){return mr(this)}}),Object.defineProperty(e.prototype,"xy",{get(){return pr(this)}})},uv:mr,xy:pr});function gr(e,t,r={}){R(r)&&(r={method:r});let{method:n=H.deltaE,...a}=r;for(let o in Ft)if("deltae"+n.toLowerCase()===o.toLowerCase())return Ft[o](e,t,a);throw new TypeError(`Unknown deltaE method: ${n}`)}function br(e,t=.25){return le(e,[te.get("oklch","lch"),"l"],e=>e*(1+t))}function yr(e,t=.25){return le(e,[te.get("oklch","lch"),"l"],e=>e*(1-t))}br.returns="color",yr.returns="color";var Mr=Object.freeze({__proto__:null,darken:yr,lighten:br});function wr(e,t,r,n={}){return[e,t]=[ee(e),ee(t)],"object"===$(r)&&([r,n]=[.5,r]),_r(e,t,n)(r??.5)}function vr(e,t,r={}){let n;Ir(e)&&([n,r]=[e,t],[e,t]=n.rangeArgs.colors);let{maxDeltaE:a,deltaEMethod:o,steps:s=2,maxSteps:i=1e3,...c}=r;n||([e,t]=[ee(e),ee(t)],n=_r(e,t,c));let l=gr(e,t),h=a>0?Math.max(s,Math.ceil(l/a)+1):s,u=[];if(void 0!==i&&(h=Math.min(h,i)),1===h)u=[{p:.5,color:n(.5)}];else{let e=1/(h-1);u=Array.from({length:h},(t,r)=>{let a=r*e;return{p:a,color:n(a)}})}if(a>0){let e=u.reduce((e,t,r)=>{if(0===r)return 0;let n=gr(t.color,u[r-1].color,o);return Math.max(e,n)},0);for(;e>a;){e=0;for(let t=1;t<u.length&&u.length<i;t++){let r=u[t-1],a=u[t],o=(a.p+r.p)/2,s=n(o);e=Math.max(e,gr(s,r.color),gr(s,a.color)),u.splice(t,0,{p:o,color:n(o)}),t++}}}return u=u.map(e=>e.color),u}function _r(e,t,r={}){if(Ir(e)){let[r,n]=[e,t];return _r(...r.rangeArgs.colors,{...r.rangeArgs.options,...n})}let{space:n,outputSpace:a,progression:o,premultiplied:s}=r;e=ee(e),t=ee(t),e=Ae(e),t=Ae(t);let i={colors:[e,t],options:r};if(n=n?te.get(n):te.registry[H.interpolationSpace]||e.space,a=a?te.get(a):n,e=zt(e,n),t=zt(t,n),e=Dt(e),t=Dt(t),n.coords.h&&"angle"===n.coords.h.type){let a=r.hue=r.hue||"shorter",o=[n,"h"],[s,i]=[ie(e,o),ie(t,o)];S(s)&&!S(i)?s=i:S(i)&&!S(s)&&(i=s),[s,i]=be(a,[s,i]),le(e,o,s),le(t,o,i)}return s&&(e.coords=e.coords.map(t=>t*e.alpha),t.coords=t.coords.map(e=>e*t.alpha)),Object.assign(r=>{r=o?o(r):r;let i=e.coords.map((e,n)=>j(e,t.coords[n],r)),c=j(e.alpha,t.alpha,r),l={space:n,coords:i,alpha:c};return s&&(l.coords=l.coords.map(e=>e/c)),a!==n&&(l=zt(l,a)),l},{rangeArgs:i})}function Ir(e){return"function"===$(e)&&!!e.rangeArgs}H.interpolationSpace="lab";var xr=Object.freeze({__proto__:null,isRange:Ir,mix:wr,range:_r,register:function(e){e.defineFunction("mix",wr,{returns:"color"}),e.defineFunction("range",_r,{returns:"function<color>"}),e.defineFunction("steps",vr,{returns:"array<color>"})},steps:vr}),Cr=new te({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Jt,fromBase:e=>{let t=Math.max(...e),r=Math.min(...e),[n,a,o]=e,[s,i,c]=[null,0,(r+t)/2],l=t-r;if(0!==l){switch(i=0===c||1===c?0:(t-c)/Math.min(c,1-c),t){case n:s=(a-o)/l+(a<o?6:0);break;case a:s=(o-n)/l+2;break;case o:s=(n-a)/l+4}s*=60}return i<0&&(s+=180,i=Math.abs(i)),s>=360&&(s-=360),[s,100*i,100*c]},toBase:e=>{let[t,r,n]=e;function a(e){let a=(e+t/30)%12,o=r*Math.min(n,1-n);return n-o*Math.max(-1,Math.min(a-3,9-a,1))}return t%=360,t<0&&(t+=360),r/=100,n/=100,[a(0),a(8),a(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]},hsla:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"],commas:!0,alpha:!0}}}),kr=new te({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Jt,fromBase(e){let t=Math.max(...e),r=Math.min(...e),[n,a,o]=e,[s,i,c]=[null,0,t],l=t-r;if(0!==l){switch(t){case n:s=(a-o)/l+(a<o?6:0);break;case a:s=(o-n)/l+2;break;case o:s=(n-a)/l+4}s*=60}return c&&(i=l/c),s>=360&&(s-=360),[s,100*i,100*c]},toBase(e){let[t,r,n]=e;function a(e){let a=(e+t/60)%6;return n-n*r*Math.max(0,Math.min(a,4-a,1))}return t%=360,t<0&&(t+=360),r/=100,n/=100,[a(5),a(3),a(1)]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),Rr=new te({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:kr,fromBase(e){let[t,r,n]=e;return[t,n*(100-r)/100,100-n]},toBase(e){let[t,r,n]=e;r/=100,n/=100;let a=r+n;if(a>=1){return[t,0,100*(r/a)]}let o=1-n;return[t,100*(0===o?0:1-r/o),100*o]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});var $r=new ae({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),Er=new ae({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:$r,toBase:e=>e.map(e=>Math.pow(Math.abs(e),563/256)*Math.sign(e)),fromBase:e=>e.map(e=>Math.pow(Math.abs(e),256/563)*Math.sign(e))});var Sr=new ae({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:he,toXYZ_M:[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],fromXYZ_M:[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]]});const Br=1/512;var Ar=new ae({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:Sr,toBase:e=>e.map(e=>{let t=e<0?-1:1,r=e*t;return r<.03125?e/16:t*r**1.8}),fromBase:e=>e.map(e=>{let t=e<0?-1:1,r=e*t;return r>=Br?t*r**(1/1.8):16*e})});const jr=1.09929682680944,Or=.018053968510807;var Nr=new ae({id:"--rec2020-oetf",name:"REC.2020_Scene_Referred",base:Gt,referred:"scene",toBase:e=>e.map(function(e){let t=e<0?-1:1,r=e*t;return r<4.5*Or?e/4.5:t*Math.pow((r+jr-1)/jr,1/.45)}),fromBase:e=>e.map(function(e){let t=e<0?-1:1,r=e*t;return r>=Or?t*(jr*Math.pow(r,.45)-(jr-1)):4.5*e})}),Lr=new te({id:"oklch",name:"OkLCh",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:Ee,fromBase:ye.fromBase,toBase:ye.toBase,formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});const Fr=2*Math.PI,qr=[[4.076741636075958,-3.307711539258063,.2309699031821043],[-1.2684379732850315,2.609757349287688,-.341319376002657],[-.0041960761386756,-.7034186179359362,1.7076146940746117]],Dr=[[[-1.8817031,-.80936501],[1.19086277,1.76576728,.59662641,.75515197,.56771245]],[[1.8144408,-1.19445267],[.73956515,-.45954404,.08285427,.12541073,-.14503204]],[[.13110758,1.81333971],[1.35733652,-.00915799,-1.1513021,-.50559606,.00692167]]],Pr=Number.MAX_VALUE,zr=.206,Tr=.03,Gr=(1+zr)/1.03;function Hr(e,t){let r=e.length;if(r!==t.length)throw new Error(`Vectors of size ${r} and ${t.length} are not aligned`);let n=0;return e.forEach((e,r)=>{n+=e*t[r]}),n}function Wr(e){return.5*(Gr*e-zr+Math.sqrt((Gr*e-zr)*(Gr*e-zr)+.12*Gr*e))}function Yr(e){return(e**2+zr*e)/(Gr*(e+Tr))}function Xr(e){let[t,r]=e;return[r/t,r/(1-t)]}function Vr(e,t){let r=k(e,$e);return r[0]=r[0]**3,r[1]=r[1]**3,r[2]=r[2]**3,k(r,t,r)}function Zr(e,t,r,n){let a=function(e,t,r,n){let a,o,s,i,c,l,h,u;Hr(n[0][0],[e,t])>1?([a,o,s,i,c]=n[0][1],[l,h,u]=r[0]):Hr(n[1][0],[e,t])>1?([a,o,s,i,c]=n[1][1],[l,h,u]=r[1]):([a,o,s,i,c]=n[2][1],[l,h,u]=r[2]);let f=a+o*e+s*t+i*e**2+c*e*t,m=Hr($e[0].slice(1),[e,t]),p=Hr($e[1].slice(1),[e,t]),d=Hr($e[2].slice(1),[e,t]),g=1+f*m,b=1+f*p,y=1+f*d,M=l*g**3+h*b**3+u*y**3,w=l*(3*m*g**2)+h*(3*p*b**2)+u*(3*d*y**2);return f-=M*w/(w**2-.5*M*(l*(6*m**2*g)+h*(6*p**2*b)+u*(6*d**2*y))),f}(e,t,r,n),o=Vr([1,a*e,a*t],r),s=q(1/Math.max(...o),1/3);return[s,s*a]}function Ur(e,t,r){let[n,a,o]=e,s=Zr(a,o,t,r),i=function(e,t,r,n,a,o,s,i){let c;if(void 0===i&&(i=Zr(e,t,o,s)),(r-a)*i[1]-(i[0]-a)*n<=0)c=i[1]*a/(n*i[0]+i[1]*(a-r));else{c=i[1]*(a-1)/(n*(i[0]-1)+i[1]*(a-r));let s=r-a,l=n,h=Hr($e[0].slice(1),[e,t]),u=Hr($e[1].slice(1),[e,t]),f=Hr($e[2].slice(1),[e,t]),m=s+l*h,p=s+l*u,d=s+l*f,g=a*(1-c)+c*r,b=c*n,y=g+b*h,M=g+b*u,w=g+b*f,v=y**3,_=M**3,I=w**3,x=3*m*y**2,C=3*p*M**2,k=3*d*w**2,R=6*m**2*y,$=6*p**2*M,E=6*d**2*w,S=Hr(o[0],[v,_,I])-1,B=Hr(o[0],[x,C,k]),A=B/(B*B-.5*S*Hr(o[0],[R,$,E])),j=-S*A,O=Hr(o[1],[v,_,I])-1,N=Hr(o[1],[x,C,k]),L=N/(N*N-.5*O*Hr(o[1],[R,$,E])),F=-O*L,q=Hr(o[2],[v,_,I])-1,D=Hr(o[2],[x,C,k]),P=D/(D*D-.5*q*Hr(o[2],[R,$,E])),z=-q*P;j=A>=0?j:Pr,F=L>=0?F:Pr,z=P>=0?z:Pr,c+=Math.min(j,Math.min(F,z))}return c}(a,o,n,1,n,t,r,s),c=Xr(s),l=i/Math.min(n*c[0],(1-n)*c[1]),h=function(e,t){return[.11516993+1/(7.4477897+4.1590124*t+e*(1.75198401*t-2.19557347+e*(-2.13704948-10.02301043*t+e*(5.38770819*t-4.24894561+4.69891013*e)))),.11239642+1/(1.6132032-.68124379*t+e*(.40370612+.90148123*t+e*(.6122399*t-.27087943+e*(.00299215-.45399568*t-.14661872*e))))]}(a,o),u=n*h[0],f=(1-n)*h[1],m=.9*l*Math.sqrt(Math.sqrt(1/(1/u**4+1/f**4)));return u=.4*n,f=.8*(1-n),[Math.sqrt(1/(1/u**2+1/f**2)),m,i]}var Jr=new te({id:"okhsl",name:"Okhsl",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},l:{range:[0,1],name:"Lightness"}},base:Ee,gamutSpace:"self",fromBase:e=>function(e,t,r){let n=e[0],a=0,o=Wr(n),s=Math.sqrt(e[1]**2+e[2]**2),i=.5+Math.atan2(-e[2],-e[1])/Fr;if(0!==o&&1!==o&&0!==s){let o,i,c,l,h=e[1]/s,u=e[2]/s,[f,m,p]=Ur([n,h,u],t,r),d=.8;s<m?(i=d*f,c=1-i/m,l=s/(i+c*s),a=l*d):(o=m,i=.2*m**2*1.5625/f,c=1-i/(p-m),l=(s-o)/(i+c*(s-o)),a=d+.2*l)}const c=Math.abs(a)<1e-4;return c||0===o||Math.abs(1-o)<1e-7?(i=null,c||(a=0)):i=ge(360*i),[i,a,o]}(e,qr,Dr),toBase:e=>function(e,t,r){let[n,a,o]=e,s=Yr(o),i=null,c=null;if(n=ge(n)/360,0!==s&&1!==s&&0!==a){let e,o,l,h,u=Math.cos(Fr*n),f=Math.sin(Fr*n),[m,p,d]=Ur([s,u,f],t,r),g=.8;a<g?(e=1.25*a,o=0,l=g*m,h=1-l/p):(e=5*(a-.8),o=p,l=.2*p**2*1.5625/m,h=1-l/(d-p));let b=o+e*l/(1-h*e);i=b*u,c=b*f}return[s,i,c]}(e,qr,Dr),formats:{color:{id:"--okhsl",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),Qr=new te({id:"oklrab",name:"Oklrab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:Ee,fromBase:e=>[Wr(e[0]),e[1],e[2]],toBase:e=>[Yr(e[0]),e[1],e[2]],formats:{color:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Kr=new te({id:"oklrch",name:"Oklrch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:Qr,fromBase:ye.fromBase,toBase:ye.toBase,formats:{color:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});var en=new te({id:"okhsv",name:"Okhsv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},v:{range:[0,1],name:"Value"}},base:Ee,gamutSpace:"self",fromBase:e=>function(e,t,r){let n=e[0],a=0,o=Wr(n),s=Math.sqrt(e[1]**2+e[2]**2),i=.5+Math.atan2(-e[2],-e[1])/Fr;if(0!==n&&1!==n&&0!==s){let i=e[1]/s,c=e[2]/s,l=Zr(i,c,t,r),[h,u]=Xr(l),f=.5,m=1-f/h,p=u/(s+n*u),d=p*n,g=p*s,b=Yr(d),y=g*b/d,[M,w,v]=Vr([b,i*y,c*y],t),_=q(1/Math.max(Math.max(M,w),Math.max(v,0)),1/3);n/=_,s/=_,s=s*Wr(n)/n,n=Wr(n),o=n/d,a=(f+u)*g/(u*f+u*m*g)}return i=Math.abs(a)<1e-4||0===o?null:ge(360*i),[i,a,o]}(e,qr,Dr),toBase:e=>function(e,t,r){let[n,a,o]=e;n=ge(n)/360;let s=Yr(o),i=null,c=null;if(0!==s&&0!==a){let e=Math.cos(Fr*n),l=Math.sin(Fr*n),h=Zr(e,l,t,r),[u,f]=Xr(h),m=.5,p=1-m/u,d=1-a*m/(m+f-f*p*a),g=a*f*m/(m+f-f*p*a);s=o*d;let b=o*g,y=Yr(d),M=g*y/d,w=Yr(s);b=b*w/s,s=w;let[v,_,I]=Vr([y,e*M,l*M],t),x=q(1/Math.max(Math.max(v,_),Math.max(I,0)),1/3);s*=x,b*=x,i=b*e,c=b*l}return[s,i,c]}(e,qr,Dr),formats:{color:{id:"--okhsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});let tn=V.D65;const rn=216/24389,nn=24389/27,[an,on]=mr({space:ne,coords:tn});var sn=new te({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:tn,base:ne,fromBase(e){let t=[B(e[0]),B(e[1]),B(e[2])],r=t[1],[n,a]=mr({space:ne,coords:t});if(!Number.isFinite(n)||!Number.isFinite(a))return[0,0,0];let o=r<=rn?nn*r:116*Math.cbrt(r)-16;return[o,13*o*(n-an),13*o*(a-on)]},toBase(e){let[t,r,n]=e;if(0===t||S(t))return[0,0,0];r=B(r),n=B(n);let a=r/(13*t)+an,o=n/(13*t)+on,s=t<=8?t/nn:Math.pow((t+16)/116,3);return[s*(9*a/(4*o)),s,s*((12-3*a-20*o)/(4*o))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}}),cn=new te({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:sn,fromBase:ye.fromBase,toBase:ye.toBase,formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const ln=216/24389,hn=24389/27,un=Yt[0][0],fn=Yt[0][1],mn=Yt[0][2],pn=Yt[1][0],dn=Yt[1][1],gn=Yt[1][2],bn=Yt[2][0],yn=Yt[2][1],Mn=Yt[2][2];function wn(e,t,r){const n=t/(Math.sin(r)-e*Math.cos(r));return n<0?1/0:n}function vn(e){const t=Math.pow(e+16,3)/1560896,r=t>ln?t:e/hn,n=r*(284517*un-94839*mn),a=r*(838422*mn+769860*fn+731718*un),o=r*(632260*mn-126452*fn),s=r*(284517*pn-94839*gn),i=r*(838422*gn+769860*dn+731718*pn),c=r*(632260*gn-126452*dn),l=r*(284517*bn-94839*Mn),h=r*(838422*Mn+769860*yn+731718*bn),u=r*(632260*Mn-126452*yn);return{r0s:n/o,r0i:a*e/o,r1s:n/(o+126452),r1i:(a-769860)*e/(o+126452),g0s:s/c,g0i:i*e/c,g1s:s/(c+126452),g1i:(i-769860)*e/(c+126452),b0s:l/u,b0i:h*e/u,b1s:l/(u+126452),b1i:(h-769860)*e/(u+126452)}}function _n(e,t){const r=t/360*Math.PI*2,n=wn(e.r0s,e.r0i,r),a=wn(e.r1s,e.r1i,r),o=wn(e.g0s,e.g0i,r),s=wn(e.g1s,e.g1i,r),i=wn(e.b0s,e.b0i,r),c=wn(e.b1s,e.b1i,r);return Math.min(n,a,o,s,i,c)}var In=new te({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:cn,gamutSpace:Jt,fromBase(e){let t,[r,n,a]=[B(e[0]),B(e[1]),B(e[2])];if(r>99.9999999)t=0,r=100;else if(r<1e-8)t=0,r=0;else{t=n/_n(vn(r),a)*100}return[a,t,r]},toBase(e){let t,[r,n,a]=[B(e[0]),B(e[1]),B(e[2])];if(a>99.9999999)a=100,t=0;else if(a<1e-8)a=0,t=0;else{t=_n(vn(a),r)/100*n}return[a,t,r]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});function xn(e,t){return Math.abs(t)/Math.sqrt(Math.pow(e,2)+1)}function Cn(e){let t=xn(e.r0s,e.r0i),r=xn(e.r1s,e.r1i),n=xn(e.g0s,e.g0i),a=xn(e.g1s,e.g1i),o=xn(e.b0s,e.b0i),s=xn(e.b1s,e.b1i);return Math.min(t,r,n,a,o,s)}Yt[0][0],Yt[0][1],Yt[0][2],Yt[1][0],Yt[1][1],Yt[1][2],Yt[2][0],Yt[2][1],Yt[2][2];var kn=new te({id:"hpluv",name:"HPLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:cn,gamutSpace:"self",fromBase(e){let t,[r,n,a]=[B(e[0]),B(e[1]),B(e[2])];if(r>99.9999999)t=0,r=100;else if(r<1e-8)t=0,r=0;else{t=n/Cn(vn(r))*100}return[a,t,r]},toBase(e){let t,[r,n,a]=[B(e[0]),B(e[1]),B(e[2])];if(a>99.9999999)a=100,t=0;else if(a<1e-8)a=0,t=0;else{t=Cn(vn(a))/100*n}return[a,t,r]},formats:{color:{id:"--hpluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),Rn=new ae({id:"rec2100-linear",name:"Linear REC.2100",white:"D65",toBase:Gt.toBase,fromBase:Gt.fromBase});const $n=2610/16384,En=16384/2610,Sn=32/2523,Bn=.8359375,An=2413/128,jn=18.6875;var On=new ae({id:"rec2100pq",cssId:"rec2100-pq",name:"REC.2100-PQ",base:Rn,toBase:e=>e.map(function(e){return(Math.max(e**Sn-Bn,0)/(An-jn*e**Sn))**En*1e4/203}),fromBase:e=>e.map(function(e){let t=Math.max(203*e/1e4,0);return((Bn+An*t**$n)/(1+jn*t**$n))**78.84375})});const Nn=.17883277,Ln=.28466892,Fn=.55991073,qn=3.7743;var Dn=new ae({id:"rec2100hlg",cssId:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:Rn,toBase:e=>e.map(function(e){return e<=.5?e**2/3*qn:(Math.exp((e-Fn)/Nn)+Ln)/12*qn}),fromBase:e=>e.map(function(e){return(e/=qn)<=1/12?q(3*e,.5):Nn*Math.log(12*e-Ln)+Fn})});const Pn={};function zn({id:e,toCone_M:t,fromCone_M:r}){Pn[e]=arguments[0]}function Tn(e,t,r="Bradford"){let n=Pn[r],[a,o,s]=x(n.toCone_M,e),[i,c,l]=x(n.toCone_M,t),h=x([[i/a,0,0],[0,c/o,0],[0,0,l/s]],n.toCone_M);return x(n.fromCone_M,h)}G.add("chromatic-adaptation-start",e=>{e.options.method&&(e.M=Tn(e.W1,e.W2,e.options.method))}),G.add("chromatic-adaptation-end",e=>{e.M||(e.M=Tn(e.W1,e.W2,e.options.method))}),zn({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599363874558397,-1.1293816185800916,.21989740959619328],[.3611914362417676,.6388124632850422,-6370596838649899e-21],[0,0,1.0890636230968613]]}),zn({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929054667121,-.14705425642099013,.15996265166373122],[.4323052697233945,.5183602715367774,.049291228212855594],[-.00852866457517732,.04004282165408486,.96848669578755]]}),zn({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238208355142,-.27886900021828726,.18274517938277307],[.4543690419753592,.4735331543074117,.07209780371722911],[-.009627608738429355,-.00569803121611342,1.0153256399545427]]}),zn({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.0112546305316845,.14918677544445172],[.3875265432361372,.6214474419314753,-.008973985167612521],[-.01584149884933386,-.03412293802851557,1.0499644368778496]]}),Object.assign(V,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]}),V.ACES=[.32168/.33767,1,.34065/.33767];var Gn=new ae({id:"acescg",cssId:"--acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:V.ACES,toXYZ_M:[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],fromXYZ_M:[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]]});const Hn=2**-16,Wn=-.35828683,Yn=(Math.log2(65504)+9.72)/17.52;var Xn=new ae({id:"acescc",cssId:"--acescc",name:"ACEScc",coords:{r:{range:[Wn,Yn],name:"Red"},g:{range:[Wn,Yn],name:"Green"},b:{range:[Wn,Yn],name:"Blue"}},referred:"scene",base:Gn,toBase:e=>e.map(function(e){return e<=-.3013698630136986?2*(2**(17.52*e-9.72)-Hn):e<Yn?2**(17.52*e-9.72):65504}),fromBase:e=>e.map(function(e){return e<=0?(Math.log2(Hn)+9.72)/17.52:e<Hn?(Math.log2(Hn+.5*e)+9.72)/17.52:(Math.log2(e)+9.72)/17.52})}),Vn=Object.freeze({__proto__:null,A98RGB:Er,A98RGB_Linear:$r,ACEScc:Xn,ACEScg:Gn,CAM16_JMh:kt,HCT:jt,HPLuv:kn,HSL:Cr,HSLuv:In,HSV:kr,HWB:Rr,ICTCP:ht,JzCzHz:Qe,Jzazbz:Je,LCH:ye,LCHuv:cn,Lab:de,Lab_D65:hr,Luv:sn,OKLCH:Lr,OKLab:Ee,OKLrCH:Kr,OKLrab:Qr,Okhsl:Jr,Okhsv:en,P3:Qt,P3_Linear:Wt,ProPhoto:Ar,ProPhoto_Linear:Sr,REC_2020:Ht,REC_2020_Linear:Gt,REC_2020_Scene_Referred:Nr,REC_2100_HLG:Dn,REC_2100_Linear:Rn,REC_2100_PQ:On,XYZ_ABS_D65:Ne,XYZ_D50:he,XYZ_D65:ne,sRGB:Jt,sRGB_Linear:Xt});class Zn{constructor(...e){let t,r,n,a;if(1===e.length){let r={};"object"==typeof e[0]&&Object.getPrototypeOf(e[0]).constructor===Object&&(e[0]={...e[0]}),t=ee(e[0],{parseMeta:r}),r.format&&(this.parseMeta=r)}t?(r=t.space||t.spaceId,n=t.coords,a=t.alpha):[r,n,a]=e,Object.defineProperty(this,"space",{value:te.get(r),writable:!1,enumerable:!0,configurable:!0}),this.coords=n?n.slice():[0,0,0],this.alpha=S(a)?a:void 0===a?1:L(0,a,1);for(let o in this.space.coords)Object.defineProperty(this,o,{get:()=>this.get(o),set:e=>this.set(o,e)})}get spaceId(){return this.space.id}clone(){return new Zn(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...e){let t=function(e,{space:t=H.display_space,...r}={}){let n=Tt(e=ee(e),r);if(typeof CSS>"u"||CSS.supports("color",n)||!H.display_space)n=new String(n),n.color=e;else{let a=e;if((e.coords.some(S)||S(e.alpha))&&!(Kt??=CSS.supports("color","hsl(none 50% 50%)"))&&(a=Ae(e),a.coords=a.coords.map(B),a.alpha=B(a.alpha),n=Tt(a,r),CSS.supports("color",n)))return n=new String(n),n.color=a,n;a=zt(a,t),n=new String(Tt(a,r)),n.color=a}return n}(this,...e);return t.color=new Zn(t.color),t}static get(e,...t){return z(e,this)?e:new Zn(e,...t)}static try(e,t){if(z(e,this))return e;let r=oe(e,t);return r?new Zn(r):null}static defineFunction(e,t,r=t){let{instance:n=!0,returns:a}=r,o=function(...e){let r=t(...e);if("color"===a)r=Zn.get(r);else if("function<color>"===a){let e=r;r=function(...t){let r=e(...t);return Zn.get(r)},Object.assign(r,e)}else"array<color>"===a&&(r=r.map(e=>Zn.get(e)));return r};e in Zn||(Zn[e]=o),n&&(Zn.prototype[e]=function(...e){return o(this,...e)})}static defineFunctions(e){for(let t in e)Zn.defineFunction(t,e[t],e[t])}static extend(e){if(e.register)e.register(Zn);else for(let t in e)Zn.defineFunction(t,e[t])}}Zn.defineFunctions({get:ie,getAll:se,set:le,setAll:ce,to:zt,equals:function(e,t){return e=ee(e),t=ee(t),e.space===t.space&&e.alpha===t.alpha&&e.coords.every((e,r)=>e===t.coords[r])},inGamut:Be,toGamut:Dt,distance:je,deltas:function(e,t,{space:r,hue:n="shorter"}={}){e=ee(e),r||=e.space,r=te.get(r);let a=Object.values(r.coords);[e,t]=[e,t].map(e=>zt(e,r));let[o,s]=[e,t].map(e=>e.coords),i=o.map((e,t)=>{let r=a[t],o=s[t];return"angle"===r.type&&([e,o]=be(n,[e,o])),er(e,o)}),c=er(e.alpha,t.alpha);return{space:r,coords:i,alpha:c}},toString:Tt}),Object.assign(Zn,{util:T,hooks:G,WHITES:V,Space:te,spaces:te.registry,parse:J,defaults:H});for(let ya of Object.keys(Vn))te.register(Vn[ya]);for(let ya in te.registry)Un(ya,te.registry[ya]);function Un(e,t){let r=e.replace(/-/g,"_");Object.defineProperty(Zn.prototype,r,{get(){let r=this.getAll(e);if(typeof Proxy>"u")return r;let n=new Proxy(r,{has:(e,r)=>{try{return te.resolveCoord([t,r]),!0}catch{}return Reflect.has(e,r)},get:(e,r,a)=>{if(r&&"symbol"!=typeof r&&!(r in e)&&r in n){let{index:n}=te.resolveCoord([t,r]);if(n>=0)return e[n]}return Reflect.get(e,r,a)},set:(r,n,a,o)=>{if(n&&"symbol"!=typeof n&&!(n in r)||Number(n)>=0){let{index:o}=te.resolveCoord([t,n]);if(o>=0)return r[o]=a,this.setAll(e,r),!0}return Reflect.set(r,n,a,o)}});return n},set(t){this.setAll(e,t)},configurable:!0,enumerable:!0})}function Jn(e,t,r,n){const a={};for(const o in e){const s=o;switch(s){case"fill":case"stroke":if(e[s]&&t[s]){const o=e[s],i=t[s];n||"string"==typeof o||"string"==typeof i?a[s]=r<.5?o:i:(a[s]=o.clone(),a[s].r=o.r+(i.r-o.r)*r,a[s].g=o.g+(i.g-o.g)*r,a[s].b=o.b+(i.b-o.b)*r,a[s].alpha=o.alpha+(i.alpha-o.alpha)*r)}break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":"number"==typeof e[s]&&"number"==typeof t[s]&&(a[s]=e[s]+(t[s]-e[s])*r)}}return a}function Qn(e){const t={};for(const r in e){const n=r;switch(n){case"fill":case"stroke":if(e[n]){const r=e[n];t[n]="string"==typeof r?r:r.toString()}break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":"number"==typeof e[n]&&(t[n]=e[n].toFixed())}}return t}function Kn(e,t,r,n){const a=[{},{}],o=e=>"string"==typeof e&&e.trim().startsWith("url(#");for(const s in e){const i=s;switch(i){case"fill":case"stroke":e[i]&&(r||o(e[i])?(a[0][i]=e[i],void 0===t[i]&&(a[1][i]=e[i])):(a[0][i]=aa(n,e[i]),void 0===t[i]&&(a[1][i]=aa(n,e[i]),a[1][i].alpha=0)));break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":e[i]&&(a[0][i]=e[i],void 0===t[i]&&(a[1][i]=1))}}for(const s in t){const i=s;switch(i){case"fill":case"stroke":t[i]&&(r||o(t[i])?(a[1][i]=t[i],void 0===e[i]&&(a[0][i]=t[i])):(a[1][i]=aa(n,t[i]),void 0===e[i]&&(a[0][i]=aa(n,t[i]),a[0][i].alpha=0)));break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":t[i]&&(a[1][i]=t[i],void 0===e[i]&&(a[0][i]=1))}}return a}function ea(e,t,r){const n={};for(const a in e){const o=a;if("rotate"===o)if(e[o]&&t[o]){n[o]=[0,0,0];for(let a=0;a<3;a++){const s=e[o][a],i=t[o][a];isFinite(s)&&isFinite(i)&&isFinite(r)?n[o][a]=s+(i-s)*r:n[o][a]=isFinite(s)?s:0}}}return n}function ta(e){let t="";if(e.rotate&&3===e.rotate.length){const[r,n,a]=e.rotate;isFinite(r)&&isFinite(n)&&isFinite(a)?t+="rotate("+e.rotate.join(" ")+")":t+="rotate(0 0 0)"}return t}function ra(e,t,r){const n=[];for(let a=0,o=e.length;a<o;a++)if(n.push([e[a][0]]),t[a])for(let s=1,i=e[a].length;s<i;s++){const o=e[a][s],i=t[a]&&void 0!==t[a][s]?t[a][s]:o;n[a].push(o+(i-o)*r)}else for(let t=1,r=e[a].length;t<r;t++)n[a].push(e[a][t]);return n}function na(e){if(e instanceof Array){const t=[];for(let r=0,n=e.length;r<n;r++)t[r]=na(e[r]);return t}if(e instanceof Zn)return e.clone();if(e instanceof Object){const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=na(e[r]));return t}return e}function aa(e,t){if("CURRENTCOLOR"===t.toUpperCase()){const r=e||window.document.getElementsByTagName("head")[0]||window.document.getElementsByTagName("svg")[0];r.style.color?t="CURRENTCOLOR"===r.style.color.toUpperCase()?window.getComputedStyle(r).getPropertyValue("color"):r.style.color:(r.style.color=t,t=window.getComputedStyle(r).getPropertyValue("color"))}return new Zn(t).to("srgb")}async function oa(e,t){for(const[n,a]of Object.entries(e))if(!ua(a))try{const t=await fetch(a);if(!t.ok){console.warn(`Failed to load SVG from ${a}`);continue}e[n]=await t.text()}catch(r){console.warn(`Error loading SVG from ${a}:`,r);continue}return sa(e,t)}function sa(e,t){const r=[];for(const[a,o]of Object.entries(e)){if(!ua(o)){console.warn(`${o} is not a valid SVG source`);continue}const e=ma(o),t=pa(o),n=da(o).fill;let s=fa(o);n&&["path","polygon","rect","circle","ellipse","line","polyline"].forEach(e=>{const t=new RegExp(`<${e}(\\s[^>]*)?>`,"gi");s=s.replace(t,t=>/fill\s*=\s*['"][^'"]*['"]/i.test(t)?t:(t.endsWith("/>"),t.replace(new RegExp(`<${e}(\\s*)`),`<${e}$1 fill="${n}" `)))});let i=`id="${a}"`;e&&(i+=` data-original-viewbox="${e.original}"`),(Object.keys(t.gradients).length>0||Object.keys(t.patterns).length>0)&&(i+=' data-has-defs="true"');const c=`<g ${i}>${s}</g>`;r.push(c)}const n={xmlns:"http://www.w3.org/2000/svg",style:"display:none;",...t};return`<svg ${Object.entries(n).map(([e,t])=>`${e}="${t}"`).join(" ")}>\n${r.join("\n")}\n</svg>`}function ia(e,t){const r=sa(e,t),n=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(n)}async function ca(e,t){const r=await oa(e,t),n=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(n)}async function la(e,t){return oa(e,t)}function ha(e,t){return sa(e,t)}function ua(e){const t=e.trim();return t.startsWith("<?xml")?t.includes("<svg"):!(!t.startsWith("<svg")&&!t.startsWith("<!DOCTYPE svg"))}function fa(e){let t=e.trim();t=t.replace(/<\?xml[^?]*\?>\s*/gi,""),t=t.replace(/<!DOCTYPE[^>]*>\s*/gi,""),t=t.replace(/<\?[^?]*\?>\s*/gi,""),t=t.trim();const r=t.match(/<svg[^>]*>([\s\S]*?)<\/svg>/i);if(r&&r[1])return r[1].trim();if(t.startsWith("<svg")){const e=t.indexOf(">");if(-1!==e){const r=t.substring(e+1),n=r.lastIndexOf("</svg>");if(-1!==n)return r.substring(0,n).trim()}}return t}function ma(e){const t=e.match(/<svg[^>]*>/i);if(!t)return null;const r=t[0].match(/viewBox\s*=\s*["']([^"']+)["']/i);if(!r)return null;const n=r[1],a=n.trim().split(/\s+/).map(Number);return 4!==a.length?null:{values:[a[0],a[1],a[2],a[3]],original:n}}function pa(e){const t={gradients:{},patterns:{},others:{},raw:void 0},r=e.match(/<defs[^>]*>([\s\S]*?)<\/defs>/i);if(!r)return t;t.raw=r[0];const n=r[1],a=n.match(/<linearGradient[^>]*>[\s\S]*?<\/linearGradient>/gi);a&&a.forEach(e=>{const r=e.match(/id\s*=\s*["']([^"']+)["']/i);r&&(t.gradients[r[1]]=e)});const o=n.match(/<radialGradient[^>]*>[\s\S]*?<\/radialGradient>/gi);o&&o.forEach(e=>{const r=e.match(/id\s*=\s*["']([^"']+)["']/i);r&&(t.gradients[r[1]]=e)});const s=n.match(/<pattern[^>]*>[\s\S]*?<\/pattern>/gi);s&&s.forEach(e=>{const r=e.match(/id\s*=\s*["']([^"']+)["']/i);r&&(t.patterns[r[1]]=e)});const i=n.match(/<(?!linearGradient|radialGradient|pattern)[^>]+>[\s\S]*?<\/[^>]+>/gi);return i&&i.forEach(e=>{const r=e.match(/id\s*=\s*["']([^"']+)["']/i);r&&(t.others[r[1]]=e)}),t}function da(e){const t=e.match(/<svg([^>]*)>/i);if(!t)return{};const r={},n=t[1].match(/(\w+)\s*=\s*["']([^"']*)["']/g);return n&&n.forEach(e=>{const[,t,n]=e.match(/(\w+)\s*=\s*["']([^"']*)["']/)||[];t&&n&&(r[t]=n)}),r}G.add("colorspace-init-end",e=>{var t;Un(e.id,e),null==(t=e.aliases)||t.forEach(t=>{Un(t,e)})}),Zn.extend(Ft),Zn.extend({deltaE:gr}),Object.assign(Zn,{deltaEMethods:Ft}),Zn.extend(Mr),Zn.extend({contrast:function(e,t,r){R(r)&&(r={algorithm:r});let{algorithm:n,...a}=r||{};if(!n){let e=Object.keys(fr).map(e=>e.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${e}`)}e=ee(e),t=ee(t);for(let o in fr)if("contrast"+n.toLowerCase()===o.toLowerCase())return fr[o](e,t,a);throw new TypeError(`Unknown contrast algorithm: ${n}`)}}),Zn.extend(dr),Zn.extend(nr),Zn.extend(xr),Zn.extend(fr);class ga{_icons={};_defDuration;_defEasing;_defRotation;_defCallback;_lite;_curIconId="";_toIconId="";_curIconItems=[];_fromIconItems=[];_toIconItems=[];_morphNodes=[];_morphG=null;_startTime;_duration;_easing;_rotation;_callback;_rafid;_svgDoc=null;_fnTick;constructor(e,t,r){if(!e)throw new Error('SVGMorpheus > "element" is required');let n;if("string"==typeof e){const t=document.querySelector(e);if(!t)throw new Error('SVGMorpheus > "element" query is not related to an existing DOM node');n=t}else n=e;if(t&&"object"!=typeof t)throw new Error('SVGMorpheus > "options" parameter must be an object');if(t=t||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus > "callback" parameter must be a function');const a=this;this._icons={},this._defDuration=t.duration||750,this._defEasing=t.easing||"quad-in-out",this._defRotation=t.rotation||"clock",this._defCallback=r||function(){},this._lite=t.lite||!1,this._curIconId=t.iconId||"",this._toIconId="",this._curIconItems=[],this._fromIconItems=[],this._toIconItems=[],this._morphNodes=[],this._morphG=null,this._startTime=void 0,this._duration=this._defDuration,this._easing=this._defEasing,this._rotation=this._defRotation,this._callback=this._defCallback,this._rafid=void 0,this._fnTick=function(e){if(a._startTime||(a._startTime=e),0===a._duration)return;const t=Math.min((e-a._startTime)/a._duration,1);a._updateAnimationProgress(t),t<1?a._rafid=window.requestAnimationFrame(a._fnTick):""!==a._toIconId&&a._animationEnd()},"SVG"===n.nodeName.toUpperCase()?this._svgDoc=n:this._svgDoc=n.getSVGDocument(),this._svgDoc?a._init():n.addEventListener("load",function(){a._svgDoc=n.getSVGDocument(),a._init()},!1)}_init(){if(this._svgDoc){if("SVG"!==this._svgDoc.nodeName.toUpperCase()){const e=this._svgDoc.getElementsByTagName("svg");this._svgDoc=e[0]}if(this._svgDoc){let e="";const t=this._svgDoc.outerHTML,r=ma(t),n=pa(t),a=da(t);for(let s=this._svgDoc.childNodes.length-1;s>=0;s--){const t=this._svgDoc.childNodes[s];if("G"===t.nodeName.toUpperCase()){const o=t,s=o.getAttribute("id");if(s){const i=[];let c=r||void 0,l=n,h=a;const u=o.getAttribute("data-original-viewbox");if(u){const e=u.trim().split(/\s+/).map(Number);4===e.length&&(c={values:[e[0],e[1],e[2],e[3]],original:u})}const f=o.outerHTML,m=pa(f);l={gradients:{...n.gradients,...m.gradients},patterns:{...n.patterns,...m.patterns},others:{...n.others,...m.others},raw:m.raw||n.raw},h={...a,...da(f)};for(let e=0,t=o.childNodes.length;e<t;e++){const t=o.childNodes[e],r={path:"",attrs:{},style:{}};switch(t.nodeName.toUpperCase()){case"PATH":r.path=t.getAttribute("d")||"";break;case"CIRCLE":const e=t,n=parseFloat(e.getAttribute("cx")||"0"),a=parseFloat(e.getAttribute("cy")||"0"),o=parseFloat(e.getAttribute("r")||"0");r.path=`M${n-o},${a}a${o},${o} 0 1,0 ${2*o},0a${o},${o} 0 1,0 -${2*o},0z`;break;case"ELLIPSE":const s=t,i=parseFloat(s.getAttribute("cx")||"0"),c=parseFloat(s.getAttribute("cy")||"0"),l=parseFloat(s.getAttribute("rx")||"0"),h=parseFloat(s.getAttribute("ry")||"0");r.path=`M${i-l},${c}a${l},${h} 0 1,0 ${2*l},0a${l},${h} 0 1,0 -${2*l},0z`;break;case"RECT":const u=t,f=parseFloat(u.getAttribute("x")||"0"),m=parseFloat(u.getAttribute("y")||"0"),p=parseFloat(u.getAttribute("width")||"0"),d=parseFloat(u.getAttribute("height")||"0"),g=parseFloat(u.getAttribute("rx")||"0"),b=parseFloat(u.getAttribute("ry")||"0");r.path=g||b?`M${f+g},${m}l${p-2*g},0a${g},${b} 0 0,1 ${g},${b}l0,${d-2*b}a${g},${b} 0 0,1 -${g},${b}l${2*g-p},0a${g},${b} 0 0,1 -${g},-${b}l0,${2*b-d}a${g},${b} 0 0,1 ${g},-${b}z`:`M${f},${m}l${p},0l0,${d}l-${p},0z`;break;case"POLYGON":const y=(t.getAttribute("points")||"").split(/\s+/);let M="";for(let t=0,r=y.length;t<r;t++)M+=(t?"L":"M")+y[t];r.path=M+"z";break;case"LINE":const w=t,v=parseFloat(w.getAttribute("x1")||"0"),_=parseFloat(w.getAttribute("y1")||"0"),I=parseFloat(w.getAttribute("x2")||"0"),x=parseFloat(w.getAttribute("y2")||"0");r.path=`M${v},${_}L${I},${x}z`}if(""!==r.path){for(let n=0,a=t.attributes.length;n<a;n++){const e=t.attributes[n],a=e.name.toLowerCase();switch(a){case"fill":case"stroke":case"fill-opacity":case"opacity":case"stroke-opacity":case"stroke-width":r.attrs[a]=e.value}}const e=t.style;for(let t=0,n=e.length;t<n;t++){const n=e[t];switch(n){case"fill":case"stroke":case"fill-opacity":case"opacity":case"stroke-opacity":case"stroke-width":r.style[n]=e[t]}}i.push(r)}}if(i.length>0){const e={id:s,items:i,viewBox:c,defs:l,rootAttrs:h};this._icons[s]=e}this._morphG?this._svgDoc.removeChild(t):(e=s,this._morphG=document.createElementNS("http://www.w3.org/2000/svg","g"),this._svgDoc.replaceChild(this._morphG,t))}}}const o=this._curIconId||e;""!==o&&(this._setupAnimation(o),this._updateAnimationProgress(1),this._animationEnd())}}}_setupAnimation(e){var t,r,s,i,c,l,f,m;if(e&&this._icons[e]){let g,b;this._toIconId=e,this._startTime=void 0,this._fromIconItems=na(this._curIconItems),this._toIconItems=na(this._icons[e].items);const y=this._icons[this._curIconId],M=this._icons[e],v=M.viewBox||(null==y?void 0:y.viewBox)||{values:[0,0,24,24],original:"0 0 24 24"};if(this._svgDoc&&this._svgDoc.setAttribute("viewBox",v.original),y&&y.viewBox&&M.viewBox){const e=p(y.viewBox,v),t=`from_${this._curIconId}_`,r={};y.defs&&(Object.keys(y.defs.gradients).forEach(e=>{r[e]=t+e}),Object.keys(y.defs.patterns).forEach(e=>{r[e]=t+e}),Object.keys(y.defs.others).forEach(e=>{r[e]=t+e})),this._fromIconItems=this._fromIconItems.map(t=>{const o=function(e,t){if(!e||!e.trim())return e;try{return h(a(n(e)).map(e=>{const r=e[0],n=e.slice(1),a=[r];switch(r){case"M":case"L":if(n.length>=2){const[e,r]=d(n[0],n[1],t);a.push(e,r);for(let o=2;o<n.length;o+=2)if(o+1<n.length){const[e,r]=d(n[o],n[o+1],t);a.push(e,r)}}break;case"C":if(n.length>=6)for(let e=0;e<n.length;e+=2)if(e+1<n.length){const[r,o]=d(n[e],n[e+1],t);a.push(r,o)}break;case"Q":if(n.length>=4)for(let e=0;e<n.length;e+=2)if(e+1<n.length){const[r,o]=d(n[e],n[e+1],t);a.push(r,o)}break;case"A":if(n.length>=7){const e=n[0]*t.scaleX,r=n[1]*t.scaleY,[o,s]=d(n[5],n[6],t);a.push(e,r,n[2],n[3],n[4],o,s)}break;case"H":if(n.length>=1){const[e]=d(n[0],0,t);a.push(e)}break;case"V":if(n.length>=1){const[,e]=d(0,n[0],t);a.push(e)}break;case"Z":case"z":break;default:for(let e=0;e<n.length;e+=2)if(e+1<n.length){const[r,o]=d(n[e],n[e+1],t);a.push(r,o)}else a.push(n[e])}return a}))}catch(g){return console.warn("Path transformation failed:",g),e}}(t.path,e),s=w(o,t.attrs,r),i=w(o,t.style,r);return{...t,path:o,attrs:s.attrs,style:i.attrs}})}if(M.defs){const t=`to_${e}_`,r={};Object.keys(M.defs.gradients).forEach(e=>{r[e]=t+e}),Object.keys(M.defs.patterns).forEach(e=>{r[e]=t+e}),Object.keys(M.defs.others).forEach(e=>{r[e]=t+e}),this._toIconItems=this._toIconItems.map(e=>{const t=w(e.path,e.attrs,r),n=w(e.path,e.style,r);return{...e,attrs:t.attrs,style:n.attrs}}),this._injectTransformedDefs(y,M)}for(g=0,b=this._morphNodes.length;g<b;g++){const e=this._morphNodes[g];e.fromIconItemIdx=g,e.toIconItemIdx=g}const _=Math.max(this._fromIconItems.length,this._toIconItems.length);let I;for(g=0;g<_;g++)if(this._fromIconItems[g]||(this._toIconItems[g]?(I=u(o(this._toIconItems[g].path)),this._fromIconItems.push({path:"M"+I.cx+","+I.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,I.cx,I.cy]}})):this._fromIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),this._toIconItems[g]||(this._fromIconItems[g]?(I=u(o(this._fromIconItems[g].path)),this._toIconItems.push({path:"M"+I.cx+","+I.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,I.cx,I.cy]}})):this._toIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),!this._morphNodes[g]&&this._morphG){const e=document.createElementNS("http://www.w3.org/2000/svg","path");this._morphG.appendChild(e),this._morphNodes.push({node:e,fromIconItemIdx:g,toIconItemIdx:g})}for(g=0;g<_;g++){const e=this._fromIconItems[g],n=this._toIconItems[g],a=o(this._fromIconItems[g].path,this._toIconItems[g].path);e.curve=a[0],n.curve=a[1];const h=Kn(this._fromIconItems[g].attrs,this._toIconItems[g].attrs,this._lite,this._svgDoc);e.attrsNorm=h[0],n.attrsNorm=h[1],e.attrs=Qn(e.attrsNorm),n.attrs=Qn(n.attrsNorm);const p=Kn(this._fromIconItems[g].style,this._toIconItems[g].style,this._lite,this._svgDoc);e.styleNorm=p[0],n.styleNorm=p[1],e.style=Qn(e.styleNorm),n.style=Qn(n.styleNorm),I=u(n.curve);let d=0,b=0,y=0;for(let t=0;t<this._toIconItems.length;t++)if(this._toIconItems[t].curve){const e=u(this._toIconItems[t].curve);e&&!isNaN(e.cx)&&!isNaN(e.cy)&&(d+=e.cx,b+=e.cy,y++)}const M=y>0?{x:d/y,y:b/y}:{x:12,y:12};n.trans={rotate:[0,M.x,M.y]},e.trans?e.trans.rotate&&(e.trans.rotate[0]=0,e.trans.rotate[1]=M.x,e.trans.rotate[2]=M.y):e.trans={rotate:[0,M.x,M.y]};let w,v=this._rotation;switch("random"===v&&(v=Math.random()<.5?"counterclock":"clock"),v){case"none":(null==(t=e.trans)?void 0:t.rotate)&&(null==(r=n.trans)?void 0:r.rotate)&&(n.trans.rotate[0]=e.trans.rotate[0]);break;case"counterclock":(null==(s=e.trans)?void 0:s.rotate)&&(null==(i=n.trans)?void 0:i.rotate)?(n.trans.rotate[0]=e.trans.rotate[0]-360,w=-e.trans.rotate[0]%360,n.trans.rotate[0]+=w<180?w:w-360):(null==(c=n.trans)?void 0:c.rotate)&&(n.trans.rotate[0]=-360);break;default:(null==(l=e.trans)?void 0:l.rotate)&&(null==(f=n.trans)?void 0:f.rotate)?(n.trans.rotate[0]=e.trans.rotate[0]+360,w=e.trans.rotate[0]%360,n.trans.rotate[0]+=w<180?-w:360-w):(null==(m=n.trans)?void 0:m.rotate)&&(n.trans.rotate[0]=360)}}this._curIconItems=na(this._fromIconItems)}}_updateAnimationProgress(e){let t,r,n,a;for(e=I[this._easing](e),t=0,a=this._curIconItems.length;t<a;t++)this._fromIconItems[t].curve&&this._toIconItems[t].curve&&(this._curIconItems[t].curve=ra(this._fromIconItems[t].curve,this._toIconItems[t].curve,e),this._curIconItems[t].path=h(this._curIconItems[t].curve)),this._fromIconItems[t].attrsNorm&&this._toIconItems[t].attrsNorm&&(this._curIconItems[t].attrsNorm=Jn(this._fromIconItems[t].attrsNorm,this._toIconItems[t].attrsNorm,e,this._lite),this._curIconItems[t].attrs=Qn(this._curIconItems[t].attrsNorm)),this._fromIconItems[t].styleNorm&&this._toIconItems[t].styleNorm&&(this._curIconItems[t].styleNorm=Jn(this._fromIconItems[t].styleNorm,this._toIconItems[t].styleNorm,e,this._lite),this._curIconItems[t].style=Qn(this._curIconItems[t].styleNorm)),this._fromIconItems[t].trans&&this._toIconItems[t].trans&&(this._curIconItems[t].trans=ea(this._fromIconItems[t].trans,this._toIconItems[t].trans,e),this._curIconItems[t].transStr=ta(this._curIconItems[t].trans));for(t=0,a=this._morphNodes.length;t<a;t++){const e=this._morphNodes[t];e.node.setAttribute("d",this._curIconItems[t].path);const a=this._curIconItems[t].attrs;for(r in a)e.node.setAttribute(r,a[r]);const o=this._curIconItems[t].style;for(n in o)e.node.style[n]=o[n];e.node.setAttribute("transform",this._curIconItems[t].transStr||"")}}_animationEnd(){for(let e=this._morphNodes.length-1;e>=0;e--){const t=this._morphNodes[e];if(this._toIconItems[e]){t.node.setAttribute("d",this._toIconItems[e].path);const r=this._toIconItems[e].attrs;for(const e in r)t.node.setAttribute(e,r[e]);const n=this._toIconItems[e].style;for(const e in n)t.node.style[e]=n[e];const a=this._toIconItems[e].transStr||"";t.node.setAttribute("transform",a)}else t.node.parentNode&&t.node.parentNode.removeChild(t.node),this._morphNodes.splice(e,1)}this._curIconId=this._toIconId,this._toIconId="",this._callback()}to(e,t,r){if(e!==this._toIconId){if(t&&"object"!=typeof t)throw new Error('SVGMorpheus.to() > "options" parameter must be an object');if(t=t||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus.to() > "callback" parameter must be a function');this._rafid&&window.cancelAnimationFrame(this._rafid),this._duration=t.duration??this._defDuration,this._easing=t.easing||this._defEasing,this._rotation=t.rotation||this._defRotation,this._callback=r||this._defCallback,this._setupAnimation(e),0===this._duration?(this._updateAnimationProgress(1),this._animationEnd()):this._rafid=window.requestAnimationFrame(this._fnTick)}}currIconId(){return this._curIconId}registerEasing(e,t){if(e in I)throw new Error(`Easing function with name '${e}' already exists.`);I[e]=t}_injectTransformedDefs(e,t){if(!this._svgDoc)return;let r=this._svgDoc.querySelector("defs");if(r||(r=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._svgDoc.insertBefore(r,this._svgDoc.firstChild)),e&&e.defs&&e.viewBox){const n=`from_${this._curIconId}_`,a=t.viewBox||{values:[0,0,24,24]},o=p(e.viewBox,a),s=g(e.defs,n,o);this._insertDefsContent(r,s)}if(t.defs){const e=`to_${t.id}_`,n=g(t.defs,e);this._insertDefsContent(r,n)}}_insertDefsContent(e,t){const r=new DOMParser;Object.values(t.gradients).forEach(t=>{try{const n=`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,a=r.parseFromString(n,"image/svg+xml").documentElement.firstElementChild;if(a){const t=document.importNode(a,!0);e.appendChild(t)}}catch(n){console.warn("Failed to parse gradient:",t,n)}}),Object.values(t.patterns).forEach(t=>{try{const n=`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,a=r.parseFromString(n,"image/svg+xml").documentElement.firstElementChild;if(a){const t=document.importNode(a,!0);e.appendChild(t)}}catch(n){console.warn("Failed to parse pattern:",t,n)}}),Object.values(t.others).forEach(t=>{try{const n=`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,a=r.parseFromString(n,"image/svg+xml").documentElement.firstElementChild;if(a){const t=document.importNode(a,!0);e.appendChild(t)}}catch(n){console.warn("Failed to parse other def:",t,n)}})}}const ba=["clock","counterclock","none","random"];export{ga as SVGMorpheus,ca as bundleSvgs,la as bundleSvgsString,ha as bundleSvgsStringSync,ia as bundleSvgsSync,na as clone,ra as curveCalc,u as curvePathBBox,ga as default,I as easings,n as parsePathString,o as path2curve,h as path2string,a as pathToAbsolute,ba as rotations,Jn as styleNormCalc,Qn as styleNormToString,Kn as styleToNorm,ta as trans2string,ea as transCalc};
