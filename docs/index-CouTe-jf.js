/*!
 * SVG Morpheus TypeScript Demo - Compiled Version
 * Version: v1.3.1
 * Build Date: 2025-08-08T23:29:16.215Z
 * Repository: https://github.com/caixw/SVG-Morpheus-ts
 */
const t="\t\n\v\f\r   ᠎             　\u2028\u2029",e=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),r=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");function n(t){if(!t)return null;if(Array.isArray(t))return t;{const n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];return String(t).replace(e,function(t,e,o){const s=[];let i=e.toLowerCase();if(o.replace(r,function(t,e){return e&&s.push(+e),""}),"m"===i&&s.length>2&&(a.push([e.charCodeAt(0)].concat(s.splice(0,2))),i="l",e="m"===e?"l":"L"),"o"===i&&1===s.length&&a.push([e.charCodeAt(0),s[0]]),"r"===i)a.push([e.charCodeAt(0)].concat(s));else for(;s.length>=n[i]&&(a.push([e.charCodeAt(0)].concat(s.splice(0,n[i]))),n[i]););return""}),a}}function a(t){const e=n(t);if(!e||!e.length)return[["M",0,0]];const r=[];let a=0,o=0,s=0,i=0,c=0;e[0][0]==="M".charCodeAt(0)&&(a=+e[0][1],o=+e[0][2],s=a,i=o,c++,r[0]=["M",a,o]);for(let n=c,l=e.length;n<l;n++){const t=[],c=e[n],l=c[0],h=String.fromCharCode(l);if(h!==h.toUpperCase())switch(t[0]=h.toUpperCase(),t[0]){case"A":t[1]=c[1],t[2]=c[2],t[3]=c[3],t[4]=c[4],t[5]=c[5],t[6]=+c[6]+a,t[7]=+c[7]+o;break;case"V":t[1]=+c[1]+o;break;case"H":t[1]=+c[1]+a;break;case"M":s=+c[1]+a,i=+c[2]+o;default:for(let e=1,r=c.length;e<r;e++)t[e]=+c[e]+(e%2?a:o)}else{t[0]=h;for(let e=1,r=c.length;e<r;e++)t[e]=c[e]}switch(t[0]){case"Z":a=s,o=i;break;case"H":a=t[1];break;case"V":o=t[1];break;case"M":s=t[1],i=t[2],a=t[1],o=t[2];break;default:a=t[t.length-2],o=t[t.length-1]}r.push(t)}return r}function o(t,e){const r=a(t),n=e&&a(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(t,e,r){let n,a;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(c.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==r||"S"==r?(n=2*e.x-e.bx,a=2*e.y-e.by):(n=e.x,a=e.y),t=["C",n,a].concat(t.slice(1));break;case"T":"Q"==r||"T"==r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(i(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(i(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(s(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(s(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(s(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(s(e.x,e.y,e.X,e.Y))}return t},u=function(t,e){if(t[e].length>7){t[e].shift();const r=t[e];for(;r.length;)m[e]="A",n&&(d[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1)}},f=function(t,e,r,n,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=t[a][1],r.y=t[a][2])},m=[],d=[];let p="",g="";for(let a=0,s=Math.max(r.length,n&&n.length||0);a<s;a++){r[a]&&(p=r[a][0]),"C"!=p&&(m[a]=p,a&&(g=m[a-1])),r[a]=h(r[a],o,g),"A"!=m[a]&&"C"==p&&(m[a]="C"),u(r,a),n&&(n[a]&&(p=n[a][0]),"C"!=p&&(d[a]=p,a&&(g=d[a-1])),n[a]=h(n[a],l,g),"A"!=d[a]&&"C"==p&&(d[a]="C"),u(n,a)),f(r,n,o,l,a),f(n,r,l,o,a);const t=r[a],e=n&&n[a],s=t.length,i=n&&e.length;o.x=t[s-2],o.y=t[s-1],o.bx=parseFloat(t[s-4])||o.x,o.by=parseFloat(t[s-3])||o.y,l.bx=n&&(parseFloat(e[i-4])||l.x),l.by=n&&(parseFloat(e[i-3])||l.y),l.x=n&&e[i-2],l.y=n&&e[i-1]}return n?[r,n]:r}function s(t,e,r,n){return[t,e,r,n,r,n]}function i(t,e,r,n,a,o){var s=1/3,i=2/3;return[s*t+i*r,s*e+i*n,s*a+i*r,s*o+i*n,a,o]}function c(t,e,r,n,a,o,s,i,l,h){var u,f=120*Math.PI/180,m=Math.PI/180*(+a||0),d=[],p=function(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}};if(h)x=h[0],C=h[1],I=h[2],v=h[3];else{t=(u=p(t,e,-m)).x,e=u.y;var g=(t-(i=(u=p(i,l,-m)).x))/2,b=(e-(l=u.y))/2,y=g*g/(r*r)+b*b/(n*n);y>1&&(r*=y=Math.sqrt(y),n*=y);var M=r*r,w=n*n,_=(o==s?-1:1)*Math.sqrt(Math.abs((M*w-M*b*b-w*g*g)/(M*b*b+w*g*g))),I=_*r*b/n+(t+i)/2,v=_*-n*g/r+(e+l)/2,x=Math.asin(+((e-v)/n).toFixed(9)),C=Math.asin(+((l-v)/n).toFixed(9));x=t<I?Math.PI-x:x,C=i<I?Math.PI-C:C,x<0&&(x=2*Math.PI+x),C<0&&(C=2*Math.PI+C),s&&x>C&&(x-=2*Math.PI),!s&&C>x&&(C-=2*Math.PI)}var k=C-x;if(Math.abs(k)>f){var N=C,$=i,E=l;C=x+f*(s&&C>x?1:-1),d=c(i=I+r*Math.cos(C),l=v+n*Math.sin(C),r,n,a,0,s,$,E,[C,N,I,v])}k=C-x;var A=Math.cos(x),R=Math.sin(x),S=Math.cos(C),B=Math.sin(C),P=Math.tan(k/4),j=4/3*r*P,F=4/3*n*P,q=[t,e],L=[t+j*R,e-F*A],D=[i+j*B,l-F*S],O=[i,l];if(L[0]=2*q[0]-L[0],L[1]=2*q[1]-L[1],h)return[L,D,O].concat(d);for(var z=[],G=0,T=(d=[L,D,O].concat(d).join().split(",")).length;G<T;G++)z[G]=G%2?p(d[G-1],d[G],m).y:p(d[G],d[G+1],m).x;return z}const l=/,?([a-z]),?/gi;function h(t){return t.join(",").replace(l,"$1")}function u(t){if(!t||!Array.isArray(t)||0===t.length)return f(0,0,0,0);let e=0,r=0;const n=[],a=[];let o;for(let h=0,u=t.length;h<u;h++)if(o=t[h],"M"==o[0])e=isFinite(o[1])?o[1]:0,r=isFinite(o[2])?o[2]:0,n.push(e),a.push(r);else{const t=e,s=r,i=isFinite(o[1])?o[1]:0,c=isFinite(o[2])?o[2]:0,l=isFinite(o[3])?o[3]:0,h=isFinite(o[4])?o[4]:0,u=isFinite(o[5])?o[5]:0,f=isFinite(o[6])?o[6]:0,d=m(t,s,i,c,l,h,u,f);isFinite(d.min.x)&&isFinite(d.max.x)&&isFinite(d.min.y)&&isFinite(d.max.y)&&(n.push(d.min.x,d.max.x),a.push(d.min.y,d.max.y)),e=u,r=f}if(0===n.length||0===a.length)return f(0,0,0,0);const s=Math.min(...n),i=Math.min(...a),c=Math.max(...n),l=Math.max(...a);return isFinite(s)&&isFinite(i)&&isFinite(c)&&isFinite(l)?f(s,i,c-s,l-i):f(0,0,0,0)}function f(t,e,r,n){return{x:t=isFinite(t)?t:0,y:e=isFinite(e)?e:0,w:r=isFinite(r)?r:0,h:n=isFinite(n)?n:0,cx:t+r/2,cy:e+n/2}}function m(t,e,r,n,a,o,s,i){for(var c,l,h,u,f,m,d,p,g=[],b=[[],[]],y=0;y<2;++y)if(0==y?(l=6*t-12*r+6*a,c=-3*t+9*r-9*a+3*s,h=3*r-3*t):(l=6*e-12*n+6*o,c=-3*e+9*n-9*o+3*i,h=3*n-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;0<(u=-h/l)&&u<1&&g.push(u)}else d=l*l-4*h*c,p=Math.sqrt(d),d<0||(0<(f=(-l+p)/(2*c))&&f<1&&g.push(f),0<(m=(-l-p)/(2*c))&&m<1&&g.push(m));for(var M,w=g.length,_=w;w--;)M=1-(u=g[w]),b[0][w]=M*M*M*t+3*M*M*u*r+3*M*u*u*a+u*u*u*s,b[1][w]=M*M*M*e+3*M*M*u*n+3*M*u*u*o+u*u*u*i;return b[0][_]=t,b[1][_]=e,b[0][_+1]=s,b[1][_+1]=i,b[0].length=b[1].length=_+2,{min:{x:Math.min.apply(0,b[0]),y:Math.min.apply(0,b[1])},max:{x:Math.max.apply(0,b[0]),y:Math.max.apply(0,b[1])}}}function d(t,e){const[r,n,a,o]=t.values,[s,i,c,l]=e.values,h=c/a,u=l/o;return{scaleX:h,scaleY:u,translateX:s-r*h,translateY:i-n*u}}function p(t,e,r){return[t*r.scaleX+r.translateX,e*r.scaleY+r.translateY]}function g(t,e="",r){const n={gradients:{},patterns:{},others:{}};for(const[a,o]of Object.entries(t.gradients)){const t=e+a;let s=o;s=s.replace(new RegExp(`id="${a}"`,"g"),`id="${t}"`),s=s.replace(new RegExp(`id='${a}'`,"g"),`id='${t}'`),r&&(s=b(s,r)),n.gradients[t]=s}for(const[a,o]of Object.entries(t.patterns)){const t=e+a;let s=o;s=s.replace(new RegExp(`id="${a}"`,"g"),`id="${t}"`),s=s.replace(new RegExp(`id='${a}'`,"g"),`id='${t}'`),r&&(s=y(s,r)),n.patterns[t]=s}for(const[a,o]of Object.entries(t.others)){const t=e+a;let r=o;r=r.replace(new RegExp(`id="${a}"`,"g"),`id="${t}"`),r=r.replace(new RegExp(`id='${a}'`,"g"),`id='${t}'`),n.others[t]=r}return n}function b(t,e){let r=t;return t.includes("linearGradient")&&(r=r.replace(/\b(x1|y1|x2|y2)=["']([^"']+)["']/g,(t,r,n)=>`${r}="${M(r,n,e)}"`)),t.includes("radialGradient")&&(r=r.replace(/\b(cx|cy|fx|fy|r)=["']([^"']+)["']/g,(t,r,n)=>`${r}="${M(r,n,e)}"`)),r}function y(t,e){let r=t;return r=r.replace(/\b(x|y|width|height)=["']([^"']+)["']/g,(t,r,n)=>`${r}="${M(r,n,e)}"`),r}function M(t,e,r){if(e.endsWith("%"))return e;const n=parseFloat(e);if(isNaN(n))return e;let a;switch(t){case"x1":case"x2":case"cx":case"fx":case"x":a=n*r.scaleX+r.translateX;break;case"y1":case"y2":case"cy":case"fy":case"y":a=n*r.scaleY+r.translateY;break;case"r":a=n*Math.sqrt(r.scaleX*r.scaleY);break;case"width":a=n*r.scaleX;break;case"height":a=n*r.scaleY;break;default:a=n}return a.toFixed(3)}function w(t,e,r){let n={...e};for(const[a,o]of Object.entries(n))if("string"==typeof o&&o.startsWith("url(#")){const t=o.match(/url\(#([^)]+)\)/);t&&r[t[1]]&&(n[a]=`url(#${r[t[1]]})`)}return{pathData:t,attrs:n}}const _={"circ-in":t=>-1*(Math.sqrt(1-t*t)-1),"circ-out":t=>Math.sqrt(1-(t-=1)*t),"circ-in-out":t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),"cubic-in":t=>t*t*t,"cubic-out":t=>--t*t*t+1,"cubic-in-out":t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,"elastic-in":t=>{var e=1.70158,r=0,n=1;if(0==t)return 0;if(1==t)return 1;if(r||(r=.3),n<Math.abs(1)){n=1;e=r/4}else e=r/(2*Math.PI)*Math.asin(1/n);return-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)},"elastic-out":t=>{var e=1.70158,r=0,n=1;if(0==t)return 0;if(1==t)return 1;if(r||(r=.3),n<Math.abs(1)){n=1;e=r/4}else e=r/(2*Math.PI)*Math.asin(1/n);return n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1},"elastic-in-out":t=>{var e=1.70158,r=0,n=1;if(0==t)return 0;if(2==(t/=.5))return 1;if(r||(r=.3*1.5*1),n<Math.abs(1)){n=1;e=r/4}else e=r/(2*Math.PI)*Math.asin(1/n);return t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1},"expo-in":t=>0==t?0:Math.pow(2,10*(t-1)),"expo-out":t=>1==t?1:1-Math.pow(2,-10*t),"expo-in-out":t=>0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t)),linear:t=>t,"quad-in":t=>t*t,"quad-out":t=>t*(2-t),"quad-in-out":t=>t<.5?2*t*t:(4-2*t)*t-1,"quart-in":t=>t*t*t*t,"quart-out":t=>1- --t*t*t*t,"quart-in-out":t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,"quint-in":t=>t*t*t*t*t,"quint-out":t=>1+--t*t*t*t*t,"quint-in-out":t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,"sine-in":t=>1-Math.cos(t*(Math.PI/2)),"sine-out":t=>Math.sin(t*(Math.PI/2)),"sine-in-out":t=>.5*(1-Math.cos(Math.PI*t))};function I(t,e){let r=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(t=>[t]));let n=e[0].length,a=e[0].map((t,r)=>e.map(t=>t[r])),o=t.map(t=>a.map(e=>{let r=0;if(!Array.isArray(t)){for(let n of e)r+=t*n;return r}for(let n=0;n<t.length;n++)r+=t[n]*(e[n]||0);return r}));return 1===r&&(o=o[0]),1===n?o.map(t=>t[0]):o}function v(t){return"string"===x(t)}function x(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function C(t,{precision:e,unit:r}){return k(t)?"none":$(t,e)+(r??"")}function k(t){return Number.isNaN(t)||t instanceof Number&&(null==t?void 0:t.none)}function N(t){return k(t)?0:t}function $(t,e){if(0===t)return 0;let r=~~t,n=0;r&&e&&(n=1+~~Math.log10(Math.abs(r)));const a=10**(e-n);return Math.floor(t*a+.5)/a}const E={deg:1,grad:.9,rad:180/Math.PI,turn:360};function A(t){if(!t)return;t=t.trim();const e=/^-?[\d.]+$/,r=/%|deg|g?rad|turn$/,n=/\/?\s*(none|[-\w.]+(?:%|deg|g?rad|turn)?)/g;let a=t.match(/^([a-z]+)\((.+?)\)$/i);if(a){let t=[];return a[2].replace(n,(n,a)=>{let o=a.match(r),s=a;if(o){let t=o[0],e=s.slice(0,-t.length);"%"===t?(s=new Number(e/100),s.type="<percentage>"):(s=new Number(e*E[t]),s.type="<angle>",s.unit=t)}else e.test(s)?(s=new Number(s),s.type="<number>"):"none"===s&&(s=new Number(NaN),s.none=!0);n.startsWith("/")&&(s=s instanceof Number?s:new Number(s),s.alpha=!0),"object"==typeof s&&s instanceof Number&&(s.raw=a),t.push(s)}),{name:a[1].toLowerCase(),rawName:a[1],rawArgs:a[2],args:t}}}function R(t){return t[t.length-1]}function S(t,e,r){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*r}function B(t,e,r){return(r-t)/(e-t)}function P(t,e,r){return S(e[0],e[1],B(t[0],t[1],r))}function j(t){return t.map(t=>t.split("|").map(t=>{let e=(t=t.trim()).match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(e){let t=new String(e[1]);return t.range=[+e[2],+e[3]],t}return t}))}function F(t,e,r){return Math.max(Math.min(r,e),t)}function q(t,e){return Math.sign(t)===Math.sign(e)?t:-t}function L(t,e){return q(Math.abs(t)**e,t)}function D(t,e){return 0===e?0:t/e}function O(t,e,r=0,n=t.length){for(;r<n;){const a=r+n>>1;t[a]<e?r=a+1:n=a}return r}var z=Object.freeze({__proto__:null,bisectLeft:O,clamp:F,copySign:q,interpolate:S,interpolateInv:B,isNone:k,isString:v,last:R,mapRange:P,multiplyMatrices:I,parseCoordGrammar:j,parseFunction:A,serializeNumber:C,skipNone:N,spow:L,toPrecision:$,type:x,zdiv:D});const G=new class{add(t,e,r){if("string"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach(function(t){this[t]=this[t]||[],e&&this[t][r?"unshift":"push"](e)},this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])}run(t,e){this[t]=this[t]||[],this[t].forEach(function(t){t.call(e&&e.context?e.context:e,e)})}};var T={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!=="production".toLowerCase(),warn:function(t){var e,r;this.verbose&&(null==(r=null==(e=null==globalThis?void 0:globalThis.console)?void 0:e.warn)||r.call(e,t))}};const H={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function W(t){return Array.isArray(t)?t:H[t]}function Y(t,e,r,n={}){if(t=W(t),e=W(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${t||e?"":"/"}${e?"":"to"}`);if(t===e)return r;let a={W1:t,W2:e,XYZ:r,options:n};if(G.run("chromatic-adaptation-start",a),a.M||(a.W1===H.D65&&a.W2===H.D50?a.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:a.W1===H.D50&&a.W2===H.D65&&(a.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),G.run("chromatic-adaptation-end",a),a.M)return I(a.M,a.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}const X=new Set(["<number>","<percentage>","<angle>"]);function Z(t,e,r,n){return Object.entries(t.coords).map(([t,a],o)=>{let s,i=e.coordGrammar[o],c=n[o],l=null==c?void 0:c.type;if(s=c.none?i.find(t=>X.has(t)):i.find(t=>t==l),!s){let e=a.name||t;throw new TypeError(`${l??c.raw} not allowed for ${e} in ${r}()`)}let h=s.range;"<percentage>"===l&&(h||=[0,1]);let u=a.range||a.refRange;return h&&u&&(n[o]=P(h,u,n[o])),s})}function J(t,{meta:e}={}){var r,n,a,o;let s={str:null==(r=String(t))?void 0:r.trim()};if(G.run("parse-start",s),s.color)return s.color;if(s.parsed=A(s.str),s.parsed){let t=s.parsed.name;if("color"===t){let t=s.parsed.args.shift(),r=t.startsWith("--")?t.substring(2):`--${t}`,i=[t,r],c=s.parsed.rawArgs.indexOf("/")>0?s.parsed.args.pop():1;for(let a of V.all){let r=a.getFormat("color");if(r&&(i.includes(r.id)||(null==(n=r.ids)?void 0:n.filter(t=>i.includes(t)).length))){const n=Object.keys(a.coords).map((t,e)=>s.parsed.args[e]||0);let o;return r.coordGrammar&&(o=Z(a,r,"color",n)),e&&Object.assign(e,{formatId:"color",types:o}),r.id.startsWith("--")&&!t.startsWith("--")&&T.warn(`${a.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${r.id}) instead of color(${t}).`),t.startsWith("--")&&!r.id.startsWith("--")&&T.warn(`${a.name} is a standard space and supported in the CSS spec. Use color(${r.id}) instead of prefixed color(${t}).`),{spaceId:a.id,coords:n,alpha:c}}}let l="",h=t in V.registry?t:r;if(h in V.registry){let t=null==(o=null==(a=V.registry[h].formats)?void 0:a.color)?void 0:o.id;t&&(l=`Did you mean color(${t})?`)}throw new TypeError(`Cannot parse color(${t}). `+(l||"Missing a plugin?"))}for(let r of V.all){let n=r.getFormat(t);if(n&&"function"===n.type){let a=1;(n.lastAlpha||R(s.parsed.args).alpha)&&(a=s.parsed.args.pop());let o,i=s.parsed.args;return n.coordGrammar&&(o=Z(r,n,t,i)),e&&Object.assign(e,{formatId:n.name,types:o}),{spaceId:r.id,coords:i,alpha:a}}}}else for(let i of V.all)for(let t in i.formats){let r=i.formats[t];if("custom"!==r.type)continue;if(r.test&&!r.test(s.str))continue;let n=r.parse(s.str);if(n)return n.alpha??=1,e&&(e.formatId=t),n}throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`)}function U(t){if(Array.isArray(t))return t.map(U);if(!t)throw new TypeError("Empty color reference");v(t)&&(t=J(t));let e=t.space||t.spaceId;return e instanceof V||(t.space=V.get(e)),void 0===t.alpha&&(t.alpha=1),t}class V{constructor(t){var e;this.id=t.id,this.name=t.name,this.base=t.base?V.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let r=t.coords??this.base.coords;for(let a in r)"name"in r[a]||(r[a].name=a);this.coords=r;let n=t.white??this.base.white??"D65";this.white=W(n),this.formats=t.formats??{};for(let a in this.formats){let t=this.formats[a];t.type||="function",t.name||=a}(null==(e=this.formats.color)?void 0:e.id)||(this.formats.color={...this.formats.color??{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace="self"===t.gamutSpace?this:V.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(t,e)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:Q(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),G.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=75e-6}={}){if(!this.equals(this.gamutSpace))return t=this.to(this.gamutSpace,t),this.gamutSpace.inGamut(t,{epsilon:e});let r=Object.values(this.coords);return t.every((t,n)=>{let a=r[n];if("angle"!==a.type&&a.range){if(Number.isNaN(t))return!0;let[r,n]=a.range;return(void 0===r||t>=r-e)&&(void 0===n||t<=n+e)}return!0})}get isUnbounded(){return Object.values(this.coords).every(t=>!("range"in t))}get cssId(){var t,e;return(null==(e=null==(t=this.formats)?void 0:t.color)?void 0:e.id)||this.id}get isPolar(){for(let t in this.coords)if("angle"===this.coords[t].type)return!0;return!1}getFormat(t){if("object"==typeof t)return t=K(t,this);let e;return e="default"===t?Object.values(this.formats)[0]:this.formats[t],e?(e=K(e,this),e):null}equals(t){return!!t&&(this===t||this.id===t||this.id===t.id)}to(t,e){if(1===arguments.length){const r=U(t);[t,e]=[r.space,r.coords]}if(t=V.get(t),this.equals(t))return e;e=e.map(t=>Number.isNaN(t)?0:t);let r,n,a=this.path,o=t.path;for(let s=0;s<a.length&&a[s].equals(o[s]);s++)r=a[s],n=s;if(!r)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let s=a.length-1;s>n;s--)e=a[s].toBase(e);for(let s=n+1;s<o.length;s++)e=o[s].fromBase(e);return e}from(t,e){if(1===arguments.length){const r=U(t);[t,e]=[r.space,r.coords]}return(t=V.get(t)).to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let r=this.coords[e],n=r.range||r.refRange;t.push((null==n?void 0:n.min)??0)}return t}static registry={};static get all(){return[...new Set(Object.values(V.registry))]}static register(t,e){if(1===arguments.length&&(t=(e=arguments[0]).id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,1===arguments.length&&e.aliases)for(let r of e.aliases)this.register(r,e);return e}static get(t,...e){if(!t||t instanceof V)return t;if("string"===x(t)){let e=V.registry[t.toLowerCase()];if(!e)throw new TypeError(`No color space found with id = "${t}"`);return e}if(e.length)return V.get(...e);throw new TypeError(`${t} is not a valid color space`)}static resolveCoord(t,e){var r;let n,a,o=x(t);if("string"===o?t.includes(".")?[n,a]=t.split("."):[n,a]=[,t]:Array.isArray(t)?[n,a]=t:(n=t.space,a=t.coordId),n=V.get(n),n||(n=e),!n)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(o=x(a),"number"===o||"string"===o&&a>=0){let t=Object.entries(n.coords)[a];if(t)return{space:n,id:t[0],index:a,...t[1]}}n=V.get(n);let s=a.toLowerCase(),i=0;for(let c in n.coords){let t=n.coords[c];if(c.toLowerCase()===s||(null==(r=t.name)?void 0:r.toLowerCase())===s)return{space:n,id:c,index:i,...t};i++}throw new TypeError(`No "${a}" coordinate found in ${n.name}. Its coordinates are: ${Object.keys(n.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function Q(t){let e=[t];for(let r=t;r=r.base;)e.push(r);return e}function K(t,{coords:e}={}){if(t.coords&&!t.coordGrammar){t.type||="function",t.name||="color",t.coordGrammar=j(t.coords);let r=Object.entries(e).map(([e,r],n)=>{let a=t.coordGrammar[n][0],o=r.range||r.refRange,s=a.range,i="";return"<percentage>"==a?(s=[0,100],i="%"):"<angle>"==a&&(i="deg"),{fromRange:o,toRange:s,suffix:i}});t.serializeCoords=(t,e)=>t.map((t,n)=>{let{fromRange:a,toRange:o,suffix:s}=r[n];return a&&o&&(t=P(a,o,t)),t=C(t,{precision:e,unit:s})})}return t}var tt=new V({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class et extends V{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=tt),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??=e=>{let r=I(t.toXYZ_M,e);return this.white!==this.base.white&&(r=Y(this.white,this.base.white,r)),r},t.fromBase??=e=>(e=Y(this.base.white,this.white,e),I(t.fromXYZ_M,e))),t.referred??="display",super(t)}}function rt(t,e){return t=U(t),!e||t.space.equals(e)?t.coords.slice():(e=V.get(e)).from(t)}function nt(t,e){t=U(t);let{space:r,index:n}=V.resolveCoord(e,t.space);return rt(t,r)[n]}function at(t,e,r){return t=U(t),e=V.get(e),t.coords=e.to(t.space,r),t}function ot(t,e,r){if(t=U(t),2===arguments.length&&"object"===x(arguments[1])){let e=arguments[1];for(let r in e)ot(t,r,e[r])}else{"function"==typeof r&&(r=r(nt(t,e)));let{space:n,index:a}=V.resolveCoord(e,t.space),o=rt(t,n);o[a]=r,at(t,n,o)}return t}at.returns="color",ot.returns="color";var st=new V({id:"xyz-d50",name:"XYZ D50",white:"D50",base:tt,fromBase:t=>Y(tt.white,"D50",t),toBase:t=>Y("D50",tt.white,t)});const it=216/24389,ct=24/116,lt=24389/27;let ht=H.D50;var ut=new V({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:ht,base:st,fromBase(t){let e=t.map((t,e)=>t/ht[e]).map(t=>t>it?Math.cbrt(t):(lt*t+16)/116);return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>ct?Math.pow(e[0],3):(116*e[0]-16)/lt,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/lt,e[2]>ct?Math.pow(e[2],3):(116*e[2]-16)/lt].map((t,e)=>t*ht[e])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function ft(t){return(t%360+360)%360}var mt=new V({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:ut,fromBase(t){let e,[r,n,a]=t;return e=Math.abs(n)<.02&&Math.abs(a)<.02?NaN:180*Math.atan2(a,n)/Math.PI,[r,Math.sqrt(n**2+a**2),ft(e)]},toBase(t){let[e,r,n]=t;return r<0&&(r=0),isNaN(n)&&(n=0),[e,r*Math.cos(n*Math.PI/180),r*Math.sin(n*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const dt=25**7,pt=Math.PI,gt=180/pt,bt=pt/180;function yt(t){const e=t*t;return e*e*e*t}function Mt(t,e,{kL:r=1,kC:n=1,kH:a=1}={}){[t,e]=U([t,e]);let[o,s,i]=ut.from(t),c=mt.from(ut,[o,s,i])[1],[l,h,u]=ut.from(e),f=mt.from(ut,[l,h,u])[1];c<0&&(c=0),f<0&&(f=0);let m=yt((c+f)/2),d=.5*(1-Math.sqrt(m/(m+dt))),p=(1+d)*s,g=(1+d)*h,b=Math.sqrt(p**2+i**2),y=Math.sqrt(g**2+u**2),M=0===p&&0===i?0:Math.atan2(i,p),w=0===g&&0===u?0:Math.atan2(u,g);M<0&&(M+=2*pt),w<0&&(w+=2*pt),M*=gt,w*=gt;let _,I=l-o,v=y-b,x=w-M,C=M+w,k=Math.abs(x);b*y===0?_=0:k<=180?_=x:x>180?_=x-360:x<-180?_=x+360:T.warn("the unthinkable has happened");let N,$=2*Math.sqrt(y*b)*Math.sin(_*bt/2),E=(o+l)/2,A=(b+y)/2,R=yt(A);N=b*y===0?C:k<=180?C/2:C<360?(C+360)/2:(C-360)/2;let S=(E-50)**2,B=1+.015*S/Math.sqrt(20+S),P=1+.045*A,j=1;j-=.17*Math.cos((N-30)*bt),j+=.24*Math.cos(2*N*bt),j+=.32*Math.cos((3*N+6)*bt),j-=.2*Math.cos((4*N-63)*bt);let F=1+.015*A*j,q=30*Math.exp(-1*((N-275)/25)**2),L=2*Math.sqrt(R/(R+dt)),D=(I/(r*B))**2;return D+=(v/(n*P))**2,D+=($/(a*F))**2,D+=-1*Math.sin(2*q*bt)*L*(v/(n*P))*($/(a*F)),Math.sqrt(D)}const wt=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],_t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],It=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],vt=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var xt=new V({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:tt,fromBase(t){let e=I(wt,t).map(t=>Math.cbrt(t));return I(It,e)},toBase(t){let e=I(vt,t).map(t=>t**3);return I(_t,e)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Ct(t,e){[t,e]=U([t,e]);let[r,n,a]=xt.from(t),[o,s,i]=xt.from(e),c=r-o,l=n-s,h=a-i;return Math.sqrt(c**2+l**2+h**2)}function kt(t,e,{epsilon:r=75e-6}={}){t=U(t),e||(e=t.space),e=V.get(e);let n=t.coords;return e!==t.space&&(n=e.from(t)),e.inGamut(n,{epsilon:r})}function Nt(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}function $t(t,e,r="lab"){let n=(r=V.get(r)).from(t),a=r.from(e);return Math.sqrt(n.reduce((t,e,r)=>{let n=a[r];return isNaN(e)||isNaN(n)?t:t+(n-e)**2},0))}const Et=Math.PI/180;var At=new V({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:tt,fromBase:t=>t.map(t=>Math.max(203*t,0)),toBase:t=>t.map(t=>Math.max(t/203,0))});const Rt=1.15,St=.66,Bt=2610/16384,Pt=16384/2610,jt=.8359375,Ft=2413/128,qt=18.6875,Lt=1.7*2523/32,Dt=32/(1.7*2523),Ot=-.56,zt=16295499532821565e-27,Gt=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],Tt=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],Ht=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],Wt=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var Yt=new V({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:At,fromBase(t){let[e,r,n]=t,a=I(Gt,[Rt*e-(Rt-1)*n,St*r-(St-1)*e,n]).map(function(t){return((jt+Ft*(t/1e4)**Bt)/(1+qt*(t/1e4)**Bt))**Lt}),[o,s,i]=I(Ht,a);return[(1+Ot)*o/(1+Ot*o)-zt,s,i]},toBase(t){let[e,r,n]=t,a=I(Wt,[(e+zt)/(1+Ot-Ot*(e+zt)),r,n]).map(function(t){return 1e4*((jt-t**Dt)/(qt*t**Dt-Ft))**Pt}),[o,s,i]=I(Tt,a),c=(o+(Rt-1)*i)/Rt;return[c,(s+(St-1)*c)/St,i]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Xt=new V({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:Yt,fromBase(t){let e,[r,n,a]=t;const o=2e-4;return e=Math.abs(n)<o&&Math.abs(a)<o?NaN:180*Math.atan2(a,n)/Math.PI,[r,Math.sqrt(n**2+a**2),ft(e)]},toBase:t=>[t[0],t[1]*Math.cos(t[2]*Math.PI/180),t[1]*Math.sin(t[2]*Math.PI/180)]});const Zt=.8359375,Jt=2413/128,Ut=18.6875,Vt=2610/16384,Qt=2523/32,Kt=16384/2610,te=32/2523,ee=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],re=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],ne=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],ae=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var oe=new V({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:At,fromBase:t=>function(t){let e=t.map(function(t){return((Zt+Jt*(t/1e4)**Vt)/(1+Ut*(t/1e4)**Vt))**Qt});return I(re,e)}(I(ee,t)),toBase(t){let e=function(t){let e=I(ne,t),r=e.map(function(t){return 1e4*(Math.max(t**te-Zt,0)/(Jt-Ut*t**te))**Kt});return r}(t);return I(ae,e)}});const se=H.D65,ie=1/.42,ce=2*Math.PI,le=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],he=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],ue=[[460,451,288],[460,-891,-261],[460,-220,-6300]],fe={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},me={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},de=180/Math.PI,pe=Math.PI/180;function ge(t,e){return t.map(t=>{const r=L(e*Math.abs(t)*.01,.42);return 400*q(r,t)/(r+27.13)})}function be(t,e,r,n,a){const o={};o.discounting=a,o.refWhite=t,o.surround=n;const s=t.map(t=>100*t);o.la=e,o.yb=r;const i=s[1],c=I(le,s),l=(n=fe[o.surround])[0];o.c=n[1],o.nc=n[2];const h=(1/(5*o.la+1))**4;o.fl=h*o.la+.1*(1-h)*(1-h)*Math.cbrt(5*o.la),o.flRoot=o.fl**.25,o.n=o.yb/i,o.z=1.48+Math.sqrt(o.n),o.nbb=.725*o.n**-.2,o.ncb=o.nbb;const u=Math.max(Math.min(l*(1-1/3.6*Math.exp((-o.la-42)/92)),1),0);o.dRgb=c.map(t=>S(1,i/t,u)),o.dRgbInv=o.dRgb.map(t=>1/t);const f=ge(c.map((t,e)=>t*o.dRgb[e]),o.fl);return o.aW=o.nbb*(2*f[0]+f[1]+.05*f[2]),o}const ye=be(se,64/Math.PI*.2,20,"average",!1);function Me(t,e){if(!(void 0!==t.J^void 0!==t.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==t.C^void 0!==t.M^void 0!==t.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==t.h^void 0!==t.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===t.J||0===t.Q)return[0,0,0];let r=0;r=void 0!==t.h?ft(t.h)*pe:function(t){let e=(t%400+400)%400;const r=Math.floor(.01*e);e%=100;const[n,a]=me.h.slice(r,r+2),[o,s]=me.e.slice(r,r+2);return ft((e*(s*n-o*a)-100*n*s)/(e*(s-o)-100*s))}(t.H)*pe;const n=Math.cos(r),a=Math.sin(r);let o=0;void 0!==t.J?o=.1*L(t.J,.5):void 0!==t.Q&&(o=.25*e.c*t.Q/((e.aW+4)*e.flRoot));let s=0;void 0!==t.C?s=t.C/o:void 0!==t.M?s=t.M/e.flRoot/o:void 0!==t.s&&(s=4e-4*t.s**2*(e.aW+4)/e.c);const i=L(s*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),c=.25*(Math.cos(r+2)+3.8),l=e.aW*L(o,2/e.c/e.z),h=5e4/13*e.nc*e.ncb*c,u=l/e.nbb,f=23*(u+.305)*D(i,23*h+i*(11*n+108*a)),m=function(t,e){const r=100/e*2588.068098016295;return t.map(t=>{const e=Math.abs(t);return q(r*L(e/(400-e),ie),t)})}(I(ue,[u,f*n,f*a]).map(t=>1*t/1403),e.fl);return I(he,m.map((t,r)=>t*e.dRgbInv[r])).map(t=>t/100)}function we(t,e){const r=t.map(t=>100*t),n=ge(I(le,r).map((t,r)=>t*e.dRgb[r]),e.fl),a=n[0]+(-12*n[1]+n[2])/11,o=(n[0]+n[1]-2*n[2])/9,s=(Math.atan2(o,a)%ce+ce)%ce,i=.25*(Math.cos(s+2)+3.8),c=L(5e4/13*e.nc*e.ncb*D(i*Math.sqrt(a**2+o**2),n[0]+n[1]+1.05*n[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),l=L(e.nbb*(2*n[0]+n[1]+.05*n[2])/e.aW,.5*e.c*e.z),h=100*L(l,2),u=4/e.c*l*(e.aW+4)*e.flRoot,f=c*l,m=f*e.flRoot,d=ft(s*de),p=function(t){let e=ft(t);e<=me.h[0]&&(e+=360);const r=O(me.h,e)-1,[n,a]=me.h.slice(r,r+2),[o,s]=me.e.slice(r,r+2),i=(e-n)/o;return me.H[r]+100*i/(i+(a-e)/s)}(d);return{J:h,C:f,h:d,s:50*L(e.c*c/(e.aW+4),.5),Q:u,M:m,H:p}}var _e=new V({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:tt,fromBase(t){const e=we(t,ye);return[e.J,e.M,e.h]},toBase:t=>Me({J:t[0],M:t[1],h:t[2]},ye)});const Ie=H.D65,ve=216/24389,xe=24389/27;function Ce(t){return t>8?Math.pow((t+16)/116,3):t/xe}function ke(t,e){const r=116*((n=t[1])>ve?Math.cbrt(n):(xe*n+16)/116)-16;var n;if(0===r)return[0,0,0];const a=we(t,Ne);return[ft(a.h),a.C,r]}const Ne=be(Ie,200/Math.PI*Ce(50),100*Ce(50),"average",!1);var $e=new V({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:tt,fromBase:t=>ke(t),toBase:t=>function(t,e){let[r,n,a]=t,o=[],s=0;if(0===a)return[0,0,0];let i=Ce(a);s=a>0?.00379058511492914*a**2+.608983189401032*a+.9155088574762233:9514440756550361e-21*a**2+.08693057439788597*a-21.928975842194614;let c=0,l=1/0;for(;c<=15;){o=Me({J:s,C:n,h:r},e);const t=Math.abs(o[1]-i);if(t<l){if(t<=2e-12)return o;l=t}s-=(o[1]-i)*s/(2*o[1]),c+=1}return Me({J:s,C:n,h:r},e)}(t,Ne),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const Ee=Math.PI/180,Ae=[1,.007,.0228];function Re(t){t[1]<0&&(t=$e.fromBase($e.toBase(t)));const e=Math.log(Math.max(1+Ae[2]*t[1]*Ne.flRoot,1))/Ae[2],r=t[0]*Ee,n=e*Math.cos(r),a=e*Math.sin(r);return[t[2],n,a]}var Se={deltaE76:function(t,e){return $t(t,e,"lab")},deltaECMC:function(t,e,{l:r=2,c:n=1}={}){[t,e]=U([t,e]);let[a,o,s]=ut.from(t),[,i,c]=mt.from(ut,[a,o,s]),[l,h,u]=ut.from(e),f=mt.from(ut,[l,h,u])[1];i<0&&(i=0),f<0&&(f=0);let m=a-l,d=i-f,p=(o-h)**2+(s-u)**2-d**2,g=.511;a>=16&&(g=.040975*a/(1+.01765*a));let b,y=.0638*i/(1+.0131*i)+.638;Number.isNaN(c)&&(c=0),b=c>=164&&c<=345?.56+Math.abs(.2*Math.cos((c+168)*Et)):.36+Math.abs(.4*Math.cos((c+35)*Et));let M=Math.pow(i,4),w=Math.sqrt(M/(M+1900)),_=(m/(r*g))**2;return _+=(d/(n*y))**2,_+=p/(y*(w*b+1-w))**2,Math.sqrt(_)},deltaE2000:Mt,deltaEJz:function(t,e){[t,e]=U([t,e]);let[r,n,a]=Xt.from(t),[o,s,i]=Xt.from(e),c=r-o,l=n-s;Number.isNaN(a)&&Number.isNaN(i)?(a=0,i=0):Number.isNaN(a)?a=i:Number.isNaN(i)&&(i=a);let h=a-i,u=2*Math.sqrt(n*s)*Math.sin(h/2*(Math.PI/180));return Math.sqrt(c**2+l**2+u**2)},deltaEITP:function(t,e){[t,e]=U([t,e]);let[r,n,a]=oe.from(t),[o,s,i]=oe.from(e);return 720*Math.sqrt((r-o)**2+.25*(n-s)**2+(a-i)**2)},deltaEOK:Ct,deltaEHCT:function(t,e){[t,e]=U([t,e]);let[r,n,a]=Re($e.from(t)),[o,s,i]=Re($e.from(e));return Math.sqrt((r-o)**2+(n-s)**2+(a-i)**2)}};const Be={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function Pe(t,{method:e=T.gamut_mapping,space:r,deltaEMethod:n="",jnd:a=2,blackWhiteClamp:o={}}={}){if(t=U(t),v(arguments[1])?r=arguments[1]:r||(r=t.space),kt(t,r=V.get(r),{epsilon:0}))return t;let s;if("css"===e)s=function(t,{space:e}={}){const r=.02,n=1e-4;t=U(t),e||(e=t.space);e=V.get(e);const a=V.get("oklch");if(e.isUnbounded)return Fe(t,e);const o=Fe(t,a);let s=o.coords[0];if(s>=1){const r=Fe(je.WHITE,e);return r.alpha=t.alpha,Fe(r,e)}if(s<=0){const r=Fe(je.BLACK,e);return r.alpha=t.alpha,Fe(r,e)}if(kt(o,e,{epsilon:0}))return Fe(o,e);function i(t){const r=Fe(t,e),n=Object.values(e.coords);return r.coords=r.coords.map((t,e)=>{if("range"in n[e]){const[r,a]=n[e].range;return F(r,t,a)}return t}),r}let c=0,l=o.coords[1],h=!0,u=Nt(o),f=i(u),m=Ct(f,u);if(m<r)return f;for(;l-c>n;){const t=(c+l)/2;if(u.coords[1]=t,h&&kt(u,e,{epsilon:0}))c=t;else if(f=i(u),m=Ct(f,u),m<r){if(r-m<n)break;h=!1,c=t}else l=t}return f}(t,{space:r});else{if("clip"===e||kt(t,r))s=Fe(t,r);else{Object.prototype.hasOwnProperty.call(Be,e)&&({method:e,jnd:a,deltaEMethod:n,blackWhiteClamp:o}=Be[e]);let i=Mt;if(""!==n)for(let t in Se)if("deltae"+n.toLowerCase()===t.toLowerCase()){i=Se[t];break}let c=Pe(Fe(t,r),{method:"clip",space:r});if(i(t,c)>a){if(3===Object.keys(o).length){let e=V.resolveCoord(o.channel),r=nt(Fe(t,e.space),e.id);if(k(r)&&(r=0),r>=o.max)return Fe({space:"xyz-d65",coords:H.D65},t.space);if(r<=o.min)return Fe({space:"xyz-d65",coords:[0,0,0]},t.space)}let n=V.resolveCoord(e),c=n.space,l=n.id,h=Fe(t,c);h.coords.forEach((t,e)=>{k(t)&&(h.coords[e]=0)});let u=(n.range||n.refRange)[0],f=function(t){const e=t?Math.floor(Math.log10(Math.abs(t))):0;return Math.max(parseFloat("1e"+(e-2)),1e-6)}(a),m=u,d=nt(h,l);for(;d-m>f;){let t=Nt(h);t=Pe(t,{space:r,method:"clip"}),i(h,t)-a<f?m=nt(h,l):d=nt(h,l),ot(h,l,(m+d)/2)}s=Fe(h,r)}else s=c}if("clip"===e||!kt(s,r,{epsilon:0})){let t=Object.values(r.coords).map(t=>t.range||[]);s.coords=s.coords.map((e,r)=>{let[n,a]=t[r];return void 0!==n&&(e=Math.max(n,e)),void 0!==a&&(e=Math.min(e,a)),e})}}return r!==t.space&&(s=Fe(s,t.space)),t.coords=s.coords,t}Pe.returns="color";const je={WHITE:{space:xt,coords:[1,0,0]},BLACK:{space:xt,coords:[0,0,0]}};function Fe(t,e,{inGamut:r}={}){t=U(t);let n=(e=V.get(e)).from(t),a={space:e,coords:n,alpha:t.alpha};return r&&(a=Pe(a,!0===r?void 0:r)),a}function qe(t,{precision:e=T.precision,format:r="default",inGamut:n=!0,...a}={}){var o;let s,i=r;r=(t=U(t)).space.getFormat(r)??t.space.getFormat("default")??V.DEFAULT_FORMAT;let c=t.coords.slice();if(n||=r.toGamut,n&&!kt(t)&&(c=Pe(Nt(t),!0===n?void 0:n).coords),"custom"===r.type){if(a.precision=e,!r.serialize)throw new TypeError(`format ${i} can only be used to parse colors, not for serialization`);s=r.serialize(c,t.alpha,a)}else{let n=r.name||"color";r.serializeCoords?c=r.serializeCoords(c,e):null!==e&&(c=c.map(t=>C(t,{precision:e})));let a=[...c];if("color"===n){let e=r.id||(null==(o=r.ids)?void 0:o[0])||t.space.id;a.unshift(e)}let i=t.alpha;null!==e&&(i=C(i,{precision:e}));let l=t.alpha>=1||r.noAlpha?"":`${r.commas?",":" /"} ${i}`;s=`${n}(${a.join(r.commas?", ":" ")}${l})`}return s}Fe.returns="color";var Le=new et({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]]});const De=1.09929682680944,Oe=.018053968510807;var ze=new et({id:"rec2020",name:"REC.2020",base:Le,toBase:t=>t.map(function(t){return t<4.5*Oe?t/4.5:Math.pow((t+De-1)/De,1/.45)}),fromBase:t=>t.map(function(t){return t>=Oe?De*Math.pow(t,.45)-(De-1):4.5*t})});var Ge=new et({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]});const Te=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var He=new et({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:Te}),We={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Ye=Array(3).fill("<percentage> | <number>[0, 255]"),Xe=Array(3).fill("<number>[0, 255]");var Ze=new et({id:"srgb",name:"sRGB",base:He,fromBase:t=>t.map(t=>{let e=t<0?-1:1,r=t*e;return r>.0031308?e*(1.055*r**(1/2.4)-.055):12.92*t}),toBase:t=>t.map(t=>{let e=t<0?-1:1,r=t*e;return r<=.04045?t/12.92:e*((r+.055)/1.055)**2.4}),formats:{rgb:{coords:Ye},rgb_number:{name:"rgb",commas:!0,coords:Xe,noAlpha:!0},color:{},rgba:{coords:Ye,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Xe},hex:{type:"custom",toGamut:!0,test:t=>/^#([a-f0-9]{3,4}){1,2}$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,t=>{e.push(parseInt(t,16)/255)}),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:r=!0}={})=>{e<1&&t.push(e),t=t.map(t=>Math.round(255*t));let n=r&&t.every(t=>t%17==0);return"#"+t.map(t=>n?(t/17).toString(16):t.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){let e={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(t=t.toLowerCase())?(e.coords=We.black,e.alpha=0):e.coords=We[t],e.coords)return e}}}}),Je=new et({id:"p3",cssId:"display-p3",name:"P3",base:Ge,fromBase:Ze.fromBase,toBase:Ze.toBase});let Ue;if(T.display_space=Ze,"undefined"!=typeof CSS&&CSS.supports)for(let zn of[ut,ze,Je]){let t=zn.getMinCoords(),e=qe({space:zn,coords:t,alpha:1});if(CSS.supports("color",e)){T.display_space=zn;break}}function Ve(t){return nt(t,[tt,"y"])}function Qe(t,e){ot(t,[tt,"y"],e)}var Ke=Object.freeze({__proto__:null,getLuminance:Ve,register:function(t){Object.defineProperty(t.prototype,"luminance",{get(){return Ve(this)},set(t){Qe(this,t)}})},setLuminance:Qe});function tr(t){return t>=.022?t:t+(.022-t)**1.414}function er(t){let e=t<0?-1:1,r=Math.abs(t);return e*Math.pow(r,2.4)}const rr=216/24389,nr=24/116,ar=24389/27;let or=H.D65;var sr=new V({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:or,base:tt,fromBase(t){let e=t.map((t,e)=>t/or[e]).map(t=>t>rr?Math.cbrt(t):(ar*t+16)/116);return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>nr?Math.pow(e[0],3):(116*e[0]-16)/ar,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/ar,e[2]>nr?Math.pow(e[2],3):(116*e[2]-16)/ar].map((t,e)=>t*or[e])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});const ir=.5*Math.pow(5,.5)+.5;var cr=Object.freeze({__proto__:null,contrastAPCA:function(t,e){let r,n,a,o,s,i;e=U(e),t=U(t),e=Fe(e,"srgb"),[o,s,i]=e.coords;let c=.2126729*er(o)+.7151522*er(s)+.072175*er(i);t=Fe(t,"srgb"),[o,s,i]=t.coords;let l=.2126729*er(o)+.7151522*er(s)+.072175*er(i),h=tr(c),u=tr(l),f=u>h;return Math.abs(u-h)<5e-4?n=0:f?(r=u**.56-h**.57,n=1.14*r):(r=u**.65-h**.62,n=1.14*r),a=Math.abs(n)<.1?0:n>0?n-.027:n+.027,100*a},contrastDeltaPhi:function(t,e){t=U(t),e=U(e);let r=nt(t,[sr,"l"]),n=nt(e,[sr,"l"]),a=Math.abs(Math.pow(r,ir)-Math.pow(n,ir)),o=Math.pow(a,1/ir)*Math.SQRT2-40;return o<7.5?0:o},contrastLstar:function(t,e){t=U(t),e=U(e);let r=nt(t,[ut,"l"]),n=nt(e,[ut,"l"]);return Math.abs(r-n)},contrastMichelson:function(t,e){t=U(t),e=U(e);let r=Math.max(Ve(t),0),n=Math.max(Ve(e),0);n>r&&([r,n]=[n,r]);let a=r+n;return 0===a?0:(r-n)/a},contrastWCAG21:function(t,e){t=U(t),e=U(e);let r=Math.max(Ve(t),0),n=Math.max(Ve(e),0);return n>r&&([r,n]=[n,r]),(r+.05)/(n+.05)},contrastWeber:function(t,e){t=U(t),e=U(e);let r=Math.max(Ve(t),0),n=Math.max(Ve(e),0);return n>r&&([r,n]=[n,r]),0===n?5e4:(r-n)/n}});function lr(t){let[e,r,n]=rt(t,tt),a=e+15*r+3*n;return[4*e/a,9*r/a]}function hr(t){let[e,r,n]=rt(t,tt),a=e+r+n;return[e/a,r/a]}var ur=Object.freeze({__proto__:null,register:function(t){Object.defineProperty(t.prototype,"uv",{get(){return lr(this)}}),Object.defineProperty(t.prototype,"xy",{get(){return hr(this)}})},uv:lr,xy:hr});function fr(t,e,r={}){v(r)&&(r={method:r});let{method:n=T.deltaE,...a}=r;for(let o in Se)if("deltae"+n.toLowerCase()===o.toLowerCase())return Se[o](t,e,a);throw new TypeError(`Unknown deltaE method: ${n}`)}var mr=Object.freeze({__proto__:null,darken:function(t,e=.25){return ot(t,[V.get("oklch","lch"),"l"],t=>t*(1-e))},lighten:function(t,e=.25){return ot(t,[V.get("oklch","lch"),"l"],t=>t*(1+e))}});function dr(t,e,r=.5,n={}){return[t,e]=[U(t),U(e)],"object"===x(r)&&([r,n]=[.5,r]),gr(t,e,n)(r)}function pr(t,e,r={}){let n;br(t)&&([n,r]=[t,e],[t,e]=n.rangeArgs.colors);let{maxDeltaE:a,deltaEMethod:o,steps:s=2,maxSteps:i=1e3,...c}=r;n||([t,e]=[U(t),U(e)],n=gr(t,e,c));let l=fr(t,e),h=a>0?Math.max(s,Math.ceil(l/a)+1):s,u=[];if(void 0!==i&&(h=Math.min(h,i)),1===h)u=[{p:.5,color:n(.5)}];else{let t=1/(h-1);u=Array.from({length:h},(e,r)=>{let a=r*t;return{p:a,color:n(a)}})}if(a>0){let t=u.reduce((t,e,r)=>{if(0===r)return 0;let n=fr(e.color,u[r-1].color,o);return Math.max(t,n)},0);for(;t>a;){t=0;for(let e=1;e<u.length&&u.length<i;e++){let r=u[e-1],a=u[e],o=(a.p+r.p)/2,s=n(o);t=Math.max(t,fr(s,r.color),fr(s,a.color)),u.splice(e,0,{p:o,color:n(o)}),e++}}}return u=u.map(t=>t.color),u}function gr(t,e,r={}){if(br(t)){let[r,n]=[t,e];return gr(...r.rangeArgs.colors,{...r.rangeArgs.options,...n})}let{space:n,outputSpace:a,progression:o,premultiplied:s}=r;t=U(t),e=U(e),t=Nt(t),e=Nt(e);let i={colors:[t,e],options:r};if(n=n?V.get(n):V.registry[T.interpolationSpace]||t.space,a=a?V.get(a):n,t=Fe(t,n),e=Fe(e,n),t=Pe(t),e=Pe(e),n.coords.h&&"angle"===n.coords.h.type){let a=r.hue=r.hue||"shorter",o=[n,"h"],[s,i]=[nt(t,o),nt(e,o)];isNaN(s)&&!isNaN(i)?s=i:isNaN(i)&&!isNaN(s)&&(i=s),[s,i]=function(t,e){if("raw"===t)return e;let[r,n]=e.map(ft),a=n-r;return"increasing"===t?a<0&&(n+=360):"decreasing"===t?a>0&&(r+=360):"longer"===t?-180<a&&a<180&&(a>0?r+=360:n+=360):"shorter"===t&&(a>180?r+=360:a<-180&&(n+=360)),[r,n]}(a,[s,i]),ot(t,o,s),ot(e,o,i)}return s&&(t.coords=t.coords.map(e=>e*t.alpha),e.coords=e.coords.map(t=>t*e.alpha)),Object.assign(r=>{r=o?o(r):r;let i=t.coords.map((t,n)=>S(t,e.coords[n],r)),c=S(t.alpha,e.alpha,r),l={space:n,coords:i,alpha:c};return s&&(l.coords=l.coords.map(t=>t/c)),a!==n&&(l=Fe(l,a)),l},{rangeArgs:i})}function br(t){return"function"===x(t)&&!!t.rangeArgs}T.interpolationSpace="lab";var yr=Object.freeze({__proto__:null,isRange:br,mix:dr,range:gr,register:function(t){t.defineFunction("mix",dr,{returns:"color"}),t.defineFunction("range",gr,{returns:"function<color>"}),t.defineFunction("steps",pr,{returns:"array<color>"})},steps:pr}),Mr=new V({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Ze,fromBase:t=>{let e=Math.max(...t),r=Math.min(...t),[n,a,o]=t,[s,i,c]=[NaN,0,(r+e)/2],l=e-r;if(0!==l){switch(i=0===c||1===c?0:(e-c)/Math.min(c,1-c),e){case n:s=(a-o)/l+(a<o?6:0);break;case a:s=(o-n)/l+2;break;case o:s=(n-a)/l+4}s*=60}return i<0&&(s+=180,i=Math.abs(i)),s>=360&&(s-=360),[s,100*i,100*c]},toBase:t=>{let[e,r,n]=t;function a(t){let a=(t+e/30)%12,o=r*Math.min(n,1-n);return n-o*Math.max(-1,Math.min(a-3,9-a,1))}return e%=360,e<0&&(e+=360),r/=100,n/=100,[a(0),a(8),a(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),wr=new V({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Mr,fromBase(t){let[e,r,n]=t;r/=100,n/=100;let a=n+r*Math.min(n,1-n);return[e,0===a?0:200*(1-n/a),100*a]},toBase(t){let[e,r,n]=t;r/=100,n/=100;let a=n*(1-r/2);return[e,0===a||1===a?0:(n-a)/Math.min(a,1-a)*100,100*a]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),_r=new V({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:wr,fromBase(t){let[e,r,n]=t;return[e,n*(100-r)/100,100-n]},toBase(t){let[e,r,n]=t;r/=100,n/=100;let a=r+n;if(a>=1){return[e,0,100*(r/a)]}let o=1-n;return[e,100*(0===o?0:1-r/o),100*o]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});var Ir=new et({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),vr=new et({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:Ir,toBase:t=>t.map(t=>Math.pow(Math.abs(t),563/256)*Math.sign(t)),fromBase:t=>t.map(t=>Math.pow(Math.abs(t),256/563)*Math.sign(t))});var xr=new et({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:st,toXYZ_M:[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],fromXYZ_M:[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]]});const Cr=1/512;var kr=new et({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:xr,toBase:t=>t.map(t=>t<.03125?t/16:t**1.8),fromBase:t=>t.map(t=>t>=Cr?t**(1/1.8):16*t)}),Nr=new V({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:xt,fromBase(t){let e,[r,n,a]=t;const o=2e-4;return e=Math.abs(n)<o&&Math.abs(a)<o?NaN:180*Math.atan2(a,n)/Math.PI,[r,Math.sqrt(n**2+a**2),ft(e)]},toBase(t){let e,r,[n,a,o]=t;return isNaN(o)?(e=0,r=0):(e=a*Math.cos(o*Math.PI/180),r=a*Math.sin(o*Math.PI/180)),[n,e,r]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});let $r=H.D65;const Er=216/24389,Ar=24389/27,[Rr,Sr]=lr({space:tt,coords:$r});var Br=new V({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:$r,base:tt,fromBase(t){let e=[N(t[0]),N(t[1]),N(t[2])],r=e[1],[n,a]=lr({space:tt,coords:e});if(!Number.isFinite(n)||!Number.isFinite(a))return[0,0,0];let o=r<=Er?Ar*r:116*Math.cbrt(r)-16;return[o,13*o*(n-Rr),13*o*(a-Sr)]},toBase(t){let[e,r,n]=t;if(0===e||k(e))return[0,0,0];r=N(r),n=N(n);let a=r/(13*e)+Rr,o=n/(13*e)+Sr,s=e<=8?e/Ar:Math.pow((e+16)/116,3);return[s*(9*a/(4*o)),s,s*((12-3*a-20*o)/(4*o))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Pr=new V({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Br,fromBase(t){let e,[r,n,a]=t;return e=Math.abs(n)<.02&&Math.abs(a)<.02?NaN:180*Math.atan2(a,n)/Math.PI,[r,Math.sqrt(n**2+a**2),ft(e)]},toBase(t){let[e,r,n]=t;return r<0&&(r=0),isNaN(n)&&(n=0),[e,r*Math.cos(n*Math.PI/180),r*Math.sin(n*Math.PI/180)]},formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const jr=216/24389,Fr=24389/27,qr=Te[0][0],Lr=Te[0][1],Dr=Te[0][2],Or=Te[1][0],zr=Te[1][1],Gr=Te[1][2],Tr=Te[2][0],Hr=Te[2][1],Wr=Te[2][2];function Yr(t,e,r){const n=e/(Math.sin(r)-t*Math.cos(r));return n<0?1/0:n}function Xr(t){const e=Math.pow(t+16,3)/1560896,r=e>jr?e:t/Fr,n=r*(284517*qr-94839*Dr),a=r*(838422*Dr+769860*Lr+731718*qr),o=r*(632260*Dr-126452*Lr),s=r*(284517*Or-94839*Gr),i=r*(838422*Gr+769860*zr+731718*Or),c=r*(632260*Gr-126452*zr),l=r*(284517*Tr-94839*Wr),h=r*(838422*Wr+769860*Hr+731718*Tr),u=r*(632260*Wr-126452*Hr);return{r0s:n/o,r0i:a*t/o,r1s:n/(o+126452),r1i:(a-769860)*t/(o+126452),g0s:s/c,g0i:i*t/c,g1s:s/(c+126452),g1i:(i-769860)*t/(c+126452),b0s:l/u,b0i:h*t/u,b1s:l/(u+126452),b1i:(h-769860)*t/(u+126452)}}function Zr(t,e){const r=e/360*Math.PI*2,n=Yr(t.r0s,t.r0i,r),a=Yr(t.r1s,t.r1i,r),o=Yr(t.g0s,t.g0i,r),s=Yr(t.g1s,t.g1i,r),i=Yr(t.b0s,t.b0i,r),c=Yr(t.b1s,t.b1i,r);return Math.min(n,a,o,s,i,c)}var Jr=new V({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Pr,gamutSpace:Ze,fromBase(t){let e,[r,n,a]=[N(t[0]),N(t[1]),N(t[2])];if(r>99.9999999)e=0,r=100;else if(r<1e-8)e=0,r=0;else{e=n/Zr(Xr(r),a)*100}return[a,e,r]},toBase(t){let e,[r,n,a]=[N(t[0]),N(t[1]),N(t[2])];if(a>99.9999999)a=100,e=0;else if(a<1e-8)a=0,e=0;else{e=Zr(Xr(a),r)/100*n}return[a,e,r]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});function Ur(t,e){return Math.abs(e)/Math.sqrt(Math.pow(t,2)+1)}function Vr(t){let e=Ur(t.r0s,t.r0i),r=Ur(t.r1s,t.r1i),n=Ur(t.g0s,t.g0i),a=Ur(t.g1s,t.g1i),o=Ur(t.b0s,t.b0i),s=Ur(t.b1s,t.b1i);return Math.min(e,r,n,a,o,s)}Te[0][0],Te[0][1],Te[0][2],Te[1][0],Te[1][1],Te[1][2],Te[2][0],Te[2][1],Te[2][2];var Qr=new V({id:"hpluv",name:"HPLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Pr,gamutSpace:"self",fromBase(t){let e,[r,n,a]=[N(t[0]),N(t[1]),N(t[2])];if(r>99.9999999)e=0,r=100;else if(r<1e-8)e=0,r=0;else{e=n/Vr(Xr(r))*100}return[a,e,r]},toBase(t){let e,[r,n,a]=[N(t[0]),N(t[1]),N(t[2])];if(a>99.9999999)a=100,e=0;else if(a<1e-8)a=0,e=0;else{e=Vr(Xr(a))/100*n}return[a,e,r]},formats:{color:{id:"--hpluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const Kr=2610/16384,tn=16384/2610,en=32/2523,rn=.8359375,nn=2413/128,an=18.6875;var on=new et({id:"rec2100pq",cssId:"rec2100-pq",name:"REC.2100-PQ",base:Le,toBase:t=>t.map(function(t){return 1e4*(Math.max(t**en-rn,0)/(nn-an*t**en))**tn/203}),fromBase:t=>t.map(function(t){let e=Math.max(203*t/1e4,0);return((rn+nn*e**Kr)/(1+an*e**Kr))**78.84375})});const sn=.17883277,cn=.28466892,ln=.55991073,hn=3.7743;var un=new et({id:"rec2100hlg",cssId:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:Le,toBase:t=>t.map(function(t){return t<=.5?t**2/3*hn:(Math.exp((t-ln)/sn)+cn)/12*hn}),fromBase:t=>t.map(function(t){return(t/=hn)<=1/12?Math.sqrt(3*t):sn*Math.log(12*t-cn)+ln})});const fn={};function mn({id:t,toCone_M:e,fromCone_M:r}){fn[t]=arguments[0]}function dn(t,e,r="Bradford"){let n=fn[r],[a,o,s]=I(n.toCone_M,t),[i,c,l]=I(n.toCone_M,e),h=I([[i/a,0,0],[0,c/o,0],[0,0,l/s]],n.toCone_M);return I(n.fromCone_M,h)}G.add("chromatic-adaptation-start",t=>{t.options.method&&(t.M=dn(t.W1,t.W2,t.options.method))}),G.add("chromatic-adaptation-end",t=>{t.M||(t.M=dn(t.W1,t.W2,t.options.method))}),mn({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599363874558397,-1.1293816185800916,.21989740959619328],[.3611914362417676,.6388124632850422,-6370596838649899e-21],[0,0,1.0890636230968613]]}),mn({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929054667121,-.14705425642099013,.15996265166373122],[.4323052697233945,.5183602715367774,.049291228212855594],[-.00852866457517732,.04004282165408486,.96848669578755]]}),mn({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238208355142,-.27886900021828726,.18274517938277307],[.4543690419753592,.4735331543074117,.07209780371722911],[-.009627608738429355,-.00569803121611342,1.0153256399545427]]}),mn({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.0112546305316845,.14918677544445172],[.3875265432361372,.6214474419314753,-.008973985167612521],[-.01584149884933386,-.03412293802851557,1.0499644368778496]]}),Object.assign(H,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]}),H.ACES=[.32168/.33767,1,.34065/.33767];var pn=new et({id:"acescg",cssId:"--acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:H.ACES,toXYZ_M:[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],fromXYZ_M:[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]]});const gn=2**-16,bn=-.35828683,yn=(Math.log2(65504)+9.72)/17.52;var Mn=new et({id:"acescc",cssId:"--acescc",name:"ACEScc",coords:{r:{range:[bn,yn],name:"Red"},g:{range:[bn,yn],name:"Green"},b:{range:[bn,yn],name:"Blue"}},referred:"scene",base:pn,toBase:t=>t.map(function(t){return t<=-.3013698630136986?2*(2**(17.52*t-9.72)-gn):t<yn?2**(17.52*t-9.72):65504}),fromBase:t=>t.map(function(t){return t<=0?(Math.log2(gn)+9.72)/17.52:t<gn?(Math.log2(gn+.5*t)+9.72)/17.52:(Math.log2(t)+9.72)/17.52})}),wn=Object.freeze({__proto__:null,A98RGB:vr,A98RGB_Linear:Ir,ACEScc:Mn,ACEScg:pn,CAM16_JMh:_e,HCT:$e,HPLuv:Qr,HSL:Mr,HSLuv:Jr,HSV:wr,HWB:_r,ICTCP:oe,JzCzHz:Xt,Jzazbz:Yt,LCH:mt,LCHuv:Pr,Lab:ut,Lab_D65:sr,Luv:Br,OKLCH:Nr,OKLab:xt,P3:Je,P3_Linear:Ge,ProPhoto:kr,ProPhoto_Linear:xr,REC_2020:ze,REC_2020_Linear:Le,REC_2100_HLG:un,REC_2100_PQ:on,XYZ_ABS_D65:At,XYZ_D50:st,XYZ_D65:tt,sRGB:Ze,sRGB_Linear:He});class _n{constructor(...t){let e,r,n,a;1===t.length&&(e=U(t[0])),e?(r=e.space||e.spaceId,n=e.coords,a=e.alpha):[r,n,a]=t,Object.defineProperty(this,"space",{value:V.get(r),writable:!1,enumerable:!0,configurable:!0}),this.coords=n?n.slice():[0,0,0],this.alpha=a>1||void 0===a?1:a<0?0:a;for(let o=0;o<this.coords.length;o++)"NaN"===this.coords[o]&&(this.coords[o]=NaN);for(let o in this.space.coords)Object.defineProperty(this,o,{get:()=>this.get(o),set:t=>this.set(o,t)})}get spaceId(){return this.space.id}clone(){return new _n(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...t){let e=function(t,{space:e=T.display_space,...r}={}){let n=qe(t,r);if("undefined"==typeof CSS||CSS.supports("color",n)||!T.display_space)n=new String(n),n.color=t;else{let a=t;if((t.coords.some(k)||k(t.alpha))&&!(Ue??=CSS.supports("color","hsl(none 50% 50%)"))&&(a=Nt(t),a.coords=a.coords.map(N),a.alpha=N(a.alpha),n=qe(a,r),CSS.supports("color",n)))return n=new String(n),n.color=a,n;a=Fe(a,e),n=new String(qe(a,r)),n.color=a}return n}(this,...t);return e.color=new _n(e.color),e}static get(t,...e){return t instanceof _n?t:new _n(t,...e)}static defineFunction(t,e,r=e){let{instance:n=!0,returns:a}=r,o=function(...t){let r=e(...t);if("color"===a)r=_n.get(r);else if("function<color>"===a){let t=r;r=function(...e){let r=t(...e);return _n.get(r)},Object.assign(r,t)}else"array<color>"===a&&(r=r.map(t=>_n.get(t)));return r};t in _n||(_n[t]=o),n&&(_n.prototype[t]=function(...t){return o(this,...t)})}static defineFunctions(t){for(let e in t)_n.defineFunction(e,t[e],t[e])}static extend(t){if(t.register)t.register(_n);else for(let e in t)_n.defineFunction(e,t[e])}}_n.defineFunctions({get:nt,getAll:rt,set:ot,setAll:at,to:Fe,equals:function(t,e){return t=U(t),e=U(e),t.space===e.space&&t.alpha===e.alpha&&t.coords.every((t,r)=>t===e.coords[r])},inGamut:kt,toGamut:Pe,distance:$t,toString:qe}),Object.assign(_n,{util:z,hooks:G,WHITES:H,Space:V,spaces:V.registry,parse:J,defaults:T});for(let zn of Object.keys(wn))V.register(wn[zn]);for(let zn in V.registry)In(zn,V.registry[zn]);function In(t,e){let r=t.replace(/-/g,"_");Object.defineProperty(_n.prototype,r,{get(){let r=this.getAll(t);return"undefined"==typeof Proxy?r:new Proxy(r,{has:(t,r)=>{try{return V.resolveCoord([e,r]),!0}catch(n){}return Reflect.has(t,r)},get:(t,r,n)=>{if(r&&"symbol"!=typeof r&&!(r in t)){let{index:n}=V.resolveCoord([e,r]);if(n>=0)return t[n]}return Reflect.get(t,r,n)},set:(r,n,a,o)=>{if(n&&"symbol"!=typeof n&&!(n in r)||n>=0){let{index:o}=V.resolveCoord([e,n]);if(o>=0)return r[o]=a,this.setAll(t,r),!0}return Reflect.set(r,n,a,o)}})},set(e){this.setAll(t,e)},configurable:!0,enumerable:!0})}function vn(t,e,r){const n={};for(const a in t){const o=a;switch(o){case"fill":case"stroke":if(t[o]&&e[o]){const a=t[o],s=e[o];"string"==typeof a||"string"==typeof s?n[o]=r<.5?a:s:(n[o]=a.clone(),n[o].r=a.r+(s.r-a.r)*r,n[o].g=a.g+(s.g-a.g)*r,n[o].b=a.b+(s.b-a.b)*r,n[o].alpha=a.alpha+(s.alpha-a.alpha)*r)}break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":"number"==typeof t[o]&&"number"==typeof e[o]&&(n[o]=t[o]+(e[o]-t[o])*r)}}return n}function xn(t){const e={};for(const r in t){const n=r;switch(n){case"fill":case"stroke":if(t[n]){const r=t[n];e[n]="string"==typeof r?r:r.toString()}break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":"number"==typeof t[n]&&(e[n]=t[n].toFixed())}}return e}function Cn(t,e,r){const n=[{},{}],a=t=>"string"==typeof t&&t.trim().startsWith("url(#");for(const o in t){const s=o;switch(s){case"fill":case"stroke":t[s]&&(a(t[s])?(n[0][s]=t[s],void 0===e[s]&&(n[1][s]=t[s])):(n[0][s]=An(r,t[s]),void 0===e[s]&&(n[1][s]=An(r,t[s]),n[1][s].alpha=0)));break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":t[s]&&(n[0][s]=t[s],void 0===e[s]&&(n[1][s]=1))}}for(const o in e){const s=o;switch(s){case"fill":case"stroke":e[s]&&(a(e[s])?(n[1][s]=e[s],void 0===t[s]&&(n[0][s]=e[s])):(n[1][s]=An(r,e[s]),void 0===t[s]&&(n[0][s]=An(r,e[s]),n[0][s].alpha=0)));break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":e[s]&&(n[1][s]=e[s],void 0===t[s]&&(n[0][s]=1))}}return n}function kn(t,e,r){const n={};for(const a in t){const o=a;if("rotate"===o)if(t[o]&&e[o]){n[o]=[0,0,0];for(let a=0;a<3;a++){const s=t[o][a],i=e[o][a];isFinite(s)&&isFinite(i)&&isFinite(r)?n[o][a]=s+(i-s)*r:n[o][a]=isFinite(s)?s:0}}}return n}function Nn(t){let e="";if(t.rotate&&3===t.rotate.length){const[r,n,a]=t.rotate;isFinite(r)&&isFinite(n)&&isFinite(a)?e+="rotate("+t.rotate.join(" ")+")":e+="rotate(0 0 0)"}return e}function $n(t,e,r){const n=[];for(let a=0,o=t.length;a<o;a++)if(n.push([t[a][0]]),e[a])for(let s=1,i=t[a].length;s<i;s++){const o=t[a][s],i=e[a]&&void 0!==e[a][s]?e[a][s]:o;n[a].push(o+(i-o)*r)}else for(let e=1,r=t[a].length;e<r;e++)n[a].push(t[a][e]);return n}function En(t){if(t instanceof Array){const e=[];for(let r=0,n=t.length;r<n;r++)e[r]=En(t[r]);return e}if(t instanceof _n)return t.clone();if(t instanceof Object){const e={};for(const r in t)t.hasOwnProperty(r)&&(e[r]=En(t[r]));return e}return t}function An(t,e){if("CURRENTCOLOR"===e.toUpperCase()){const r=t||window.document.getElementsByTagName("head")[0]||window.document.getElementsByTagName("svg")[0];r.style.color?e="CURRENTCOLOR"===r.style.color.toUpperCase()?window.getComputedStyle(r).getPropertyValue("color"):r.style.color:(r.style.color=e,e=window.getComputedStyle(r).getPropertyValue("color"))}return new _n(e).to("srgb")}async function Rn(t,e){const r=[];for(const[o,s]of Object.entries(t)){let t;if(Pn(s))t=s;else try{const e=await fetch(s);if(!e.ok){console.warn(`Failed to load SVG from ${s}`);continue}t=await e.text()}catch(a){console.warn(`Error loading SVG from ${s}:`,a);continue}const e=Fn(t),n=qn(t),i=Ln(t).fill;let c=jn(t);if(i){["path","polygon","rect","circle","ellipse","line","polyline"].forEach(t=>{const e=new RegExp(`<${t}(\\s[^>]*)?>`,"gi");c=c.replace(e,e=>/fill\s*=\s*['"][^'"]*['"]/i.test(e)?e:(e.endsWith("/>"),e.replace(new RegExp(`<${t}(\\s*)`),`<${t}$1 fill="${i}" `)))})}let l=`id="${o}"`;e&&(l+=` data-original-viewbox="${e.original}"`),(Object.keys(n.gradients).length>0||Object.keys(n.patterns).length>0)&&(l+=' data-has-defs="true"');const h=`<g ${l}>${c}</g>`;r.push(h)}const n={xmlns:"http://www.w3.org/2000/svg",style:"display:none;",...e};return`<svg ${Object.entries(n).map(([t,e])=>`${t}="${e}"`).join(" ")}>\n${r.join("\n")}\n</svg>`}async function Sn(t,e){const r=await Rn(t,e),n=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(n)}async function Bn(t,e){return Rn(t,e)}function Pn(t){const e=t.trim();return e.startsWith("<?xml")?e.includes("<svg"):!!e.startsWith("<svg")||!!e.startsWith("<!DOCTYPE svg")}function jn(t){let e=t.trim();e=e.replace(/<\?xml[^?]*\?>\s*/gi,""),e=e.replace(/<!DOCTYPE[^>]*>\s*/gi,""),e=e.replace(/<\?[^?]*\?>\s*/gi,""),e=e.trim();const r=e.match(/<svg[^>]*>([\s\S]*?)<\/svg>/i);if(r&&r[1])return r[1].trim();if(e.startsWith("<svg")){const t=e.indexOf(">");if(-1!==t){const r=e.substring(t+1),n=r.lastIndexOf("</svg>");if(-1!==n)return r.substring(0,n).trim()}}return e}function Fn(t){const e=t.match(/<svg[^>]*>/i);if(!e)return null;const r=e[0].match(/viewBox\s*=\s*["']([^"']+)["']/i);if(!r)return null;const n=r[1],a=n.trim().split(/\s+/).map(Number);return 4!==a.length?null:{values:[a[0],a[1],a[2],a[3]],original:n}}function qn(t){const e={gradients:{},patterns:{},others:{},raw:void 0},r=t.match(/<defs[^>]*>([\s\S]*?)<\/defs>/i);if(!r)return e;e.raw=r[0];const n=r[1],a=n.match(/<linearGradient[^>]*>[\s\S]*?<\/linearGradient>/gi);a&&a.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.gradients[r[1]]=t)});const o=n.match(/<radialGradient[^>]*>[\s\S]*?<\/radialGradient>/gi);o&&o.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.gradients[r[1]]=t)});const s=n.match(/<pattern[^>]*>[\s\S]*?<\/pattern>/gi);s&&s.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.patterns[r[1]]=t)});const i=n.match(/<(?!linearGradient|radialGradient|pattern)[^>]+>[\s\S]*?<\/[^>]+>/gi);return i&&i.forEach(t=>{const r=t.match(/id\s*=\s*["']([^"']+)["']/i);r&&(e.others[r[1]]=t)}),e}function Ln(t){const e=t.match(/<svg([^>]*)>/i);if(!e)return{};const r={},n=e[1].match(/(\w+)\s*=\s*["']([^"']*)["']/g);return n&&n.forEach(t=>{const[,e,n]=t.match(/(\w+)\s*=\s*["']([^"']*)["']/)||[];e&&n&&(r[e]=n)}),r}G.add("colorspace-init-end",t=>{var e;In(t.id,t),null==(e=t.aliases)||e.forEach(e=>{In(e,t)})}),_n.extend(Se),_n.extend({deltaE:fr}),Object.assign(_n,{deltaEMethods:Se}),_n.extend(mr),_n.extend({contrast:function(t,e,r={}){v(r)&&(r={algorithm:r});let{algorithm:n,...a}=r;if(!n){let t=Object.keys(cr).map(t=>t.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${t}`)}t=U(t),e=U(e);for(let o in cr)if("contrast"+n.toLowerCase()===o.toLowerCase())return cr[o](t,e,a);throw new TypeError(`Unknown contrast algorithm: ${n}`)}}),_n.extend(ur),_n.extend(Ke),_n.extend(yr),_n.extend(cr);class Dn{constructor(t,e,r){if(this._icons={},this._curIconId="",this._toIconId="",this._curIconItems=[],this._fromIconItems=[],this._toIconItems=[],this._morphNodes=[],this._morphG=null,this._svgDoc=null,!t)throw new Error('SVGMorpheus > "element" is required');let n;if("string"==typeof t){const e=document.querySelector(t);if(!e)throw new Error('SVGMorpheus > "element" query is not related to an existing DOM node');n=e}else n=t;if(e&&"object"!=typeof e)throw new Error('SVGMorpheus > "options" parameter must be an object');if(e=e||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus > "callback" parameter must be a function');const a=this;this._icons={},this._curIconId=e.iconId||"",this._toIconId="",this._curIconItems=[],this._fromIconItems=[],this._toIconItems=[],this._morphNodes=[],this._morphG=null,this._startTime=void 0,this._defDuration=e.duration||750,this._defEasing=e.easing||"quad-in-out",this._defRotation=e.rotation||"clock",this._defCallback=r||function(){},this._duration=this._defDuration,this._easing=this._defEasing,this._rotation=this._defRotation,this._callback=this._defCallback,this._rafid=void 0,this._fnTick=function(t){a._startTime||(a._startTime=t);const e=Math.min((t-a._startTime)/a._duration,1);a._updateAnimationProgress(e),e<1?a._rafid=window.requestAnimationFrame(a._fnTick):""!==a._toIconId&&a._animationEnd()},"SVG"===n.nodeName.toUpperCase()?this._svgDoc=n:this._svgDoc=n.getSVGDocument(),this._svgDoc?a._init():n.addEventListener("load",function(){a._svgDoc=n.getSVGDocument(),a._init()},!1)}_init(){if(this._svgDoc){if("SVG"!==this._svgDoc.nodeName.toUpperCase()){const t=this._svgDoc.getElementsByTagName("svg");this._svgDoc=t[0]}if(this._svgDoc){let t="";const e=this._svgDoc.outerHTML,r=Fn(e),n=qn(e),a=Ln(e);for(let s=this._svgDoc.childNodes.length-1;s>=0;s--){const e=this._svgDoc.childNodes[s];if("G"===e.nodeName.toUpperCase()){const o=e,s=o.getAttribute("id");if(s){const i=[];let c=r||void 0,l=n,h=a;const u=o.getAttribute("data-original-viewbox");if(u){const t=u.trim().split(/\s+/).map(Number);4===t.length&&(c={values:[t[0],t[1],t[2],t[3]],original:u})}const f=o.outerHTML,m=qn(f);l={gradients:{...n.gradients,...m.gradients},patterns:{...n.patterns,...m.patterns},others:{...n.others,...m.others},raw:m.raw||n.raw},h={...a,...Ln(f)};for(let t=0,e=o.childNodes.length;t<e;t++){const e=o.childNodes[t],r={path:"",attrs:{},style:{}};switch(e.nodeName.toUpperCase()){case"PATH":r.path=e.getAttribute("d")||"";break;case"CIRCLE":const t=e,n=parseFloat(t.getAttribute("cx")||"0"),a=parseFloat(t.getAttribute("cy")||"0"),o=parseFloat(t.getAttribute("r")||"0");r.path=`M${n-o},${a}a${o},${o} 0 1,0 ${2*o},0a${o},${o} 0 1,0 -${2*o},0z`;break;case"ELLIPSE":const s=e,i=parseFloat(s.getAttribute("cx")||"0"),c=parseFloat(s.getAttribute("cy")||"0"),l=parseFloat(s.getAttribute("rx")||"0"),h=parseFloat(s.getAttribute("ry")||"0");r.path=`M${i-l},${c}a${l},${h} 0 1,0 ${2*l},0a${l},${h} 0 1,0 -${2*l},0z`;break;case"RECT":const u=e,f=parseFloat(u.getAttribute("x")||"0"),m=parseFloat(u.getAttribute("y")||"0"),d=parseFloat(u.getAttribute("width")||"0"),p=parseFloat(u.getAttribute("height")||"0"),g=parseFloat(u.getAttribute("rx")||"0"),b=parseFloat(u.getAttribute("ry")||"0");r.path=g||b?`M${f+g},${m}l${d-2*g},0a${g},${b} 0 0,1 ${g},${b}l0,${p-2*b}a${g},${b} 0 0,1 -${g},${b}l${2*g-d},0a${g},${b} 0 0,1 -${g},-${b}l0,${2*b-p}a${g},${b} 0 0,1 ${g},-${b}z`:`M${f},${m}l${d},0l0,${p}l-${d},0z`;break;case"POLYGON":const y=(e.getAttribute("points")||"").split(/\s+/);let M="";for(let e=0,r=y.length;e<r;e++)M+=(e?"L":"M")+y[e];r.path=M+"z";break;case"LINE":const w=e,_=parseFloat(w.getAttribute("x1")||"0"),I=parseFloat(w.getAttribute("y1")||"0"),v=parseFloat(w.getAttribute("x2")||"0"),x=parseFloat(w.getAttribute("y2")||"0");r.path=`M${_},${I}L${v},${x}z`}if(""!==r.path){for(let n=0,a=e.attributes.length;n<a;n++){const t=e.attributes[n],a=t.name.toLowerCase();switch(a){case"fill":case"fill-opacity":case"opacity":case"stroke":case"stroke-opacity":case"stroke-width":r.attrs[a]=t.value}}const t=e.style;for(let e=0,n=t.length;e<n;e++){const n=t[e];switch(n){case"fill":case"fill-opacity":case"opacity":case"stroke":case"stroke-opacity":case"stroke-width":r.style[n]=t[e]}}i.push(r)}}if(i.length>0){const t={id:s,items:i,viewBox:c,defs:l,rootAttrs:h};this._icons[s]=t}this._morphG?this._svgDoc.removeChild(e):(t=s,this._morphG=document.createElementNS("http://www.w3.org/2000/svg","g"),this._svgDoc.replaceChild(this._morphG,e))}}}const o=this._curIconId||t;""!==o&&(this._setupAnimation(o),this._updateAnimationProgress(1),this._animationEnd())}}}_setupAnimation(t){var e,r,s,i,c,l,f,m;if(t&&this._icons[t]){let g,b;this._toIconId=t,this._startTime=void 0,this._fromIconItems=En(this._curIconItems),this._toIconItems=En(this._icons[t].items);const y=this._icons[this._curIconId],M=this._icons[t],_=M.viewBox||(null==y?void 0:y.viewBox)||{values:[0,0,24,24],original:"0 0 24 24"};if(this._svgDoc&&this._svgDoc.setAttribute("viewBox",_.original),y&&y.viewBox&&M.viewBox){const t=d(y.viewBox,_),e=`from_${this._curIconId}_`,r={};y.defs&&(Object.keys(y.defs.gradients).forEach(t=>{r[t]=e+t}),Object.keys(y.defs.patterns).forEach(t=>{r[t]=e+t}),Object.keys(y.defs.others).forEach(t=>{r[t]=e+t})),this._fromIconItems=this._fromIconItems.map(e=>{const o=function(t,e){if(!t||!t.trim())return t;try{return h(a(n(t)).map(t=>{const r=t[0],n=t.slice(1),a=[r];switch(r){case"M":case"L":if(n.length>=2){const[t,r]=p(n[0],n[1],e);a.push(t,r);for(let o=2;o<n.length;o+=2)if(o+1<n.length){const[t,r]=p(n[o],n[o+1],e);a.push(t,r)}}break;case"C":if(n.length>=6)for(let t=0;t<n.length;t+=2)if(t+1<n.length){const[r,o]=p(n[t],n[t+1],e);a.push(r,o)}break;case"Q":if(n.length>=4)for(let t=0;t<n.length;t+=2)if(t+1<n.length){const[r,o]=p(n[t],n[t+1],e);a.push(r,o)}break;case"A":if(n.length>=7){const t=n[0]*e.scaleX,r=n[1]*e.scaleY,[o,s]=p(n[5],n[6],e);a.push(t,r,n[2],n[3],n[4],o,s)}break;case"H":if(n.length>=1){const[t]=p(n[0],0,e);a.push(t)}break;case"V":if(n.length>=1){const[,t]=p(0,n[0],e);a.push(t)}break;case"Z":case"z":break;default:for(let t=0;t<n.length;t+=2)if(t+1<n.length){const[r,o]=p(n[t],n[t+1],e);a.push(r,o)}else a.push(n[t])}return a}))}catch(r){return console.warn("Path transformation failed:",r),t}}(e.path,t),s=w(o,e.attrs,r),i=w(o,e.style,r);return{...e,path:o,attrs:s.attrs,style:i.attrs}})}if(M.defs){const e=`to_${t}_`,r={};Object.keys(M.defs.gradients).forEach(t=>{r[t]=e+t}),Object.keys(M.defs.patterns).forEach(t=>{r[t]=e+t}),Object.keys(M.defs.others).forEach(t=>{r[t]=e+t}),this._toIconItems=this._toIconItems.map(t=>{const e=w(t.path,t.attrs,r),n=w(t.path,t.style,r);return{...t,attrs:e.attrs,style:n.attrs}}),this._injectTransformedDefs(y,M)}for(g=0,b=this._morphNodes.length;g<b;g++){const t=this._morphNodes[g];t.fromIconItemIdx=g,t.toIconItemIdx=g}const I=Math.max(this._fromIconItems.length,this._toIconItems.length);let v;for(g=0;g<I;g++)if(this._fromIconItems[g]||(this._toIconItems[g]?(v=u(o(this._toIconItems[g].path)),this._fromIconItems.push({path:"M"+v.cx+","+v.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,v.cx,v.cy]}})):this._fromIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),this._toIconItems[g]||(this._fromIconItems[g]?(v=u(o(this._fromIconItems[g].path)),this._toIconItems.push({path:"M"+v.cx+","+v.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,v.cx,v.cy]}})):this._toIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),!this._morphNodes[g]&&this._morphG){const t=document.createElementNS("http://www.w3.org/2000/svg","path");this._morphG.appendChild(t),this._morphNodes.push({node:t,fromIconItemIdx:g,toIconItemIdx:g})}for(g=0;g<I;g++){const t=this._fromIconItems[g],n=this._toIconItems[g],a=o(this._fromIconItems[g].path,this._toIconItems[g].path);t.curve=a[0],n.curve=a[1];const h=Cn(this._fromIconItems[g].attrs,this._toIconItems[g].attrs,this._svgDoc);t.attrsNorm=h[0],n.attrsNorm=h[1],t.attrs=xn(t.attrsNorm),n.attrs=xn(n.attrsNorm);const d=Cn(this._fromIconItems[g].style,this._toIconItems[g].style,this._svgDoc);t.styleNorm=d[0],n.styleNorm=d[1],t.style=xn(t.styleNorm),n.style=xn(n.styleNorm),v=u(n.curve);let p=0,b=0,y=0;for(let e=0;e<this._toIconItems.length;e++)if(this._toIconItems[e].curve){const t=u(this._toIconItems[e].curve);!t||isNaN(t.cx)||isNaN(t.cy)||(p+=t.cx,b+=t.cy,y++)}const M=y>0?{x:p/y,y:b/y}:{x:12,y:12};n.trans={rotate:[0,M.x,M.y]},t.trans?t.trans.rotate&&(t.trans.rotate[0]=0,t.trans.rotate[1]=M.x,t.trans.rotate[2]=M.y):t.trans={rotate:[0,M.x,M.y]};let w,_=this._rotation;switch("random"===_&&(_=Math.random()<.5?"counterclock":"clock"),_){case"none":(null==(e=t.trans)?void 0:e.rotate)&&(null==(r=n.trans)?void 0:r.rotate)&&(n.trans.rotate[0]=t.trans.rotate[0]);break;case"counterclock":(null==(s=t.trans)?void 0:s.rotate)&&(null==(i=n.trans)?void 0:i.rotate)?(n.trans.rotate[0]=t.trans.rotate[0]-360,w=-t.trans.rotate[0]%360,n.trans.rotate[0]+=w<180?w:w-360):(null==(c=n.trans)?void 0:c.rotate)&&(n.trans.rotate[0]=-360);break;default:(null==(l=t.trans)?void 0:l.rotate)&&(null==(f=n.trans)?void 0:f.rotate)?(n.trans.rotate[0]=t.trans.rotate[0]+360,w=t.trans.rotate[0]%360,n.trans.rotate[0]+=w<180?-w:360-w):(null==(m=n.trans)?void 0:m.rotate)&&(n.trans.rotate[0]=360)}}this._curIconItems=En(this._fromIconItems)}}_updateAnimationProgress(t){let e,r,n,a;for(t=_[this._easing](t),e=0,a=this._curIconItems.length;e<a;e++)this._fromIconItems[e].curve&&this._toIconItems[e].curve&&(this._curIconItems[e].curve=$n(this._fromIconItems[e].curve,this._toIconItems[e].curve,t),this._curIconItems[e].path=h(this._curIconItems[e].curve)),this._fromIconItems[e].attrsNorm&&this._toIconItems[e].attrsNorm&&(this._curIconItems[e].attrsNorm=vn(this._fromIconItems[e].attrsNorm,this._toIconItems[e].attrsNorm,t),this._curIconItems[e].attrs=xn(this._curIconItems[e].attrsNorm)),this._fromIconItems[e].styleNorm&&this._toIconItems[e].styleNorm&&(this._curIconItems[e].styleNorm=vn(this._fromIconItems[e].styleNorm,this._toIconItems[e].styleNorm,t),this._curIconItems[e].style=xn(this._curIconItems[e].styleNorm)),this._fromIconItems[e].trans&&this._toIconItems[e].trans&&(this._curIconItems[e].trans=kn(this._fromIconItems[e].trans,this._toIconItems[e].trans,t),this._curIconItems[e].transStr=Nn(this._curIconItems[e].trans));for(e=0,a=this._morphNodes.length;e<a;e++){const t=this._morphNodes[e];t.node.setAttribute("d",this._curIconItems[e].path);const a=this._curIconItems[e].attrs;for(r in a)t.node.setAttribute(r,a[r]);const o=this._curIconItems[e].style;for(n in o)t.node.style[n]=o[n];t.node.setAttribute("transform",this._curIconItems[e].transStr||"")}}_animationEnd(){for(let t=this._morphNodes.length-1;t>=0;t--){const e=this._morphNodes[t];if(this._toIconItems[t]){e.node.setAttribute("d",this._toIconItems[t].path);const r=this._toIconItems[t].attrs;for(const t in r)e.node.setAttribute(t,r[t]);const n=this._toIconItems[t].style;for(const t in n)e.node.style[t]=n[t];const a=this._toIconItems[t].transStr||"";e.node.setAttribute("transform",a)}else e.node.parentNode&&e.node.parentNode.removeChild(e.node),this._morphNodes.splice(t,1)}this._curIconId=this._toIconId,this._toIconId="",this._callback()}to(t,e,r){if(t!==this._toIconId){if(e&&"object"!=typeof e)throw new Error('SVGMorpheus.to() > "options" parameter must be an object');if(e=e||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus.to() > "callback" parameter must be a function');this._rafid&&window.cancelAnimationFrame(this._rafid),this._duration=e.duration||this._defDuration,this._easing=e.easing||this._defEasing,this._rotation=e.rotation||this._defRotation,this._callback=r||this._defCallback,this._setupAnimation(t),this._rafid=window.requestAnimationFrame(this._fnTick)}}currIconId(){return this._curIconId}registerEasing(t,e){if(t in _)throw new Error(`Easing function with name '${t}' already exists.`);_[t]=e}_injectTransformedDefs(t,e){if(!this._svgDoc)return;let r=this._svgDoc.querySelector("defs");if(r||(r=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._svgDoc.insertBefore(r,this._svgDoc.firstChild)),t&&t.defs&&t.viewBox){const n=`from_${this._curIconId}_`,a=e.viewBox||{values:[0,0,24,24]},o=d(t.viewBox,a),s=g(t.defs,n,o);this._insertDefsContent(r,s)}if(e.defs){const t=`to_${e.id}_`,n=g(e.defs,t);this._insertDefsContent(r,n)}}_insertDefsContent(t,e){const r=new DOMParser;Object.values(e.gradients).forEach(e=>{try{const n=r.parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${e}</svg>`,"image/svg+xml").documentElement.firstElementChild;if(n){const e=document.importNode(n,!0);t.appendChild(e)}}catch(n){console.warn("Failed to parse gradient:",e,n)}}),Object.values(e.patterns).forEach(e=>{try{const n=r.parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${e}</svg>`,"image/svg+xml").documentElement.firstElementChild;if(n){const e=document.importNode(n,!0);t.appendChild(e)}}catch(n){console.warn("Failed to parse pattern:",e,n)}}),Object.values(e.others).forEach(e=>{try{const n=r.parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${e}</svg>`,"image/svg+xml").documentElement.firstElementChild;if(n){const e=document.importNode(n,!0);t.appendChild(e)}}catch(n){console.warn("Failed to parse other def:",e,n)}})}}const On=["clock","counterclock","none","random"];export{Dn as SVGMorpheus,Sn as bundleSvgs,Bn as bundleSvgsString,En as clone,$n as curveCalc,u as curvePathBBox,Dn as default,_ as easings,n as parsePathString,o as path2curve,h as path2string,a as pathToAbsolute,On as rotations,vn as styleNormCalc,xn as styleNormToString,Cn as styleToNorm,Nn as trans2string,kn as transCalc};
